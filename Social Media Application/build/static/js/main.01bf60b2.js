/*! For license information please see main.01bf60b2.js.LICENSE.txt */
!function(){var e={318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},757:function(e,t,n){e.exports=n(727)},86:function(e,t,n){"use strict";var r=n(318);t.Z=void 0;var i=r(n(649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}),"AddAPhoto");t.Z=o},649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(462)},462:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return s},createChainedFunction:function(){return u},createSvgIcon:function(){return Mr},debounce:function(){return Lr},deprecatedPropType:function(){return Fr},isMuiElement:function(){return Ur},ownerDocument:function(){return Vr},ownerWindow:function(){return qr},requirePropFactory:function(){return Br},setRef:function(){return Wr},unstable_ClassNameGenerator:function(){return ci},unstable_useEnhancedEffect:function(){return Hr},unstable_useId:function(){return Qr},unsupportedProp:function(){return Yr},useControlled:function(){return $r},useEventCallback:function(){return Xr},useForkRef:function(){return ei},useIsFocusVisible:function(){return ui}});var r=function(e){return e},i=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();function a(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function o(e){if("string"!==typeof e)throw new Error(a(7));return e.charAt(0).toUpperCase()+e.slice(1)}var s=o;var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))};function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l=n(791),f=n.t(l,2);function h(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function d(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function p(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r}function v(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=c({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,r):r}function g(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?c({},e):e;return g(e)&&g(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(g(t[i])&&i in e&&g(e[i])?r[i]=m(e[i],t[i],n):r[i]=t[i])})),r}var y=n(942),k=["values","unit","step"];function b(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=h(e,k),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return c({},e,(0,y.Z)({},t.key,t.val))}),{})}(n),l=Object.keys(u);function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function p(e,t){var r=l.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[l[r]]?n[l[r]]:t)-o/100).concat(i,")")}return c({keys:l,values:u,up:f,down:d,between:p,only:function(e){return l.indexOf(e)+1<l.length?p(e,l[l.indexOf(e)+1]):f(e)},not:function(e){var t=l.indexOf(e);return 0===t?f(l[1]):t===l.length-1?d(l[t]):p(e,l[l.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var w={borderRadius:4},_=n(439),x={xs:0,sm:600,md:900,lg:1200,xl:1536},I={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(x[e],"px)")}};function T(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||I;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||I;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||x).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function S(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function E(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function C(e,t){if(!t||"string"!==typeof t)return null;if(e&&e.vars){var n="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=n)return n}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function N(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:C(e,n)||i,t&&(r=t(r)),r}var A=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,s=function(e){if(null==e[t])return null;var n=e[t],s=C(e.theme,i)||{};return T(e,n,(function(e){var n=N(s,a,e);return e===n&&"string"===typeof e&&(n=N(s,a,"".concat(t).concat("default"===e?"":o(e)),e)),!1===r?n:(0,y.Z)({},r,n)}))};return s.propTypes={},s.filterProps=[t],s};var P=function(e,t){return t?m(e,t,{clone:!1}):e};var R={m:"margin",p:"padding"},D={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},O={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},M=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!O[e])return[e];e=O[e]}var t=e.split(""),n=(0,_.Z)(t,2),r=n[0],i=n[1],a=R[r],o=D[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),L=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],F=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],U=[].concat(L,F);function j(e,t,n,r){var i,a=null!=(i=C(e,t))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function V(e){return j(e,"spacing",8)}function q(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function B(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=q(t,n),e}),{})}}(M(n),r);return T(e,e[n],i)}function z(e,t){var n=V(e.theme);return Object.keys(e).map((function(r){return B(e,t,r,n)})).reduce(P,{})}function W(e){return z(e,L)}function K(e){return z(e,F)}function H(e){return z(e,U)}W.propTypes={},W.filterProps=L,K.propTypes={},K.filterProps=F,H.propTypes={},H.filterProps=U;var G=H;function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=V({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var Q=["breakpoints","palette","spacing","shape"];var Y=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=h(e,Q),l=b(n),f=Z(a),d=m({breakpoints:l,direction:"ltr",components:{},palette:c({mode:"light"},i),spacing:f,shape:c({},w,s)},u),p=arguments.length,v=new Array(p>1?p-1:0),g=1;g<p;g++)v[g-1]=arguments[g];return d=v.reduce((function(e,t){return m(e,t)}),d)};var $=l.createContext(null);function X(){return l.useContext($)}function J(e){return 0===Object.keys(e).length}var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=X();return!t||J(t)?e:t},te=Y();var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te;return ee(e)};function re(e,t,n){var r;return c({toolbar:(r={minHeight:56},(0,y.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,y.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function ae(e){if(e.type)return e;if("#"===e.charAt(0))return ae(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(a(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(a(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function oe(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function se(e){var t="hsl"===(e=ae(e)).type?ae(function(e){var t=(e=ae(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),oe({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ue(e,t){if(e=ae(e),t=ie(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return oe(e)}function ce(e,t){if(e=ae(e),t=ie(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return oe(e)}var le={black:"#000",white:"#fff"},fe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},he={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},de={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ve={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ge={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},me={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ye=["mode","contrastThreshold","tonalOffset"],ke={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:le.white,default:le.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},be={text:{primary:le.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:le.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function we(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=ce(e.main,i):"dark"===t&&(e.dark=ue(e.main,a)))}function _e(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,o=e.tonalOffset,s=void 0===o?.2:o,u=h(e,ye),l=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ve[200],light:ve[50],dark:ve[400]}:{main:ve[700],light:ve[400],dark:ve[800]}}(n),f=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:he[200],light:he[50],dark:he[400]}:{main:he[500],light:he[300],dark:he[700]}}(n),d=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:de[500],light:de[300],dark:de[700]}:{main:de[700],light:de[400],dark:de[800]}}(n),p=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ge[400],light:ge[300],dark:ge[700]}:{main:ge[700],light:ge[500],dark:ge[900]}}(n),v=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:me[400],light:me[300],dark:me[700]}:{main:me[800],light:me[500],dark:me[900]}}(n),g=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:pe[400],light:pe[300],dark:pe[700]}:{main:"#ed6c02",light:pe[500],dark:pe[900]}}(n);function y(e){var t=function(e,t){var n=se(e),r=se(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,be.text.primary)>=i?be.text.primary:ke.text.primary;return t}var k=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,o=e.lightShade,u=void 0===o?300:o,l=e.darkShade,f=void 0===l?700:l;if(!(t=c({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(a(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(a(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return we(t,"light",u,s),we(t,"dark",f,s),t.contrastText||(t.contrastText=y(t.main)),t},b={dark:be,light:ke};return m(c({common:c({},le),mode:n,primary:k({color:l,name:"primary"}),secondary:k({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:k({color:d,name:"error"}),warning:k({color:g,name:"warning"}),info:k({color:p,name:"info"}),success:k({color:v,name:"success"}),grey:fe,contrastThreshold:i,getContrastText:y,augmentColor:k,tonalOffset:s},b[n]),u)}var xe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var Ie={textTransform:"uppercase"},Te='"Roboto", "Helvetica", "Arial", sans-serif';function Se(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Te:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,f=void 0===l?400:l,d=n.fontWeightMedium,p=void 0===d?500:d,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,k=void 0===y?16:y,b=n.allVariants,w=n.pxToRem,_=h(n,xe);var x=o/14,I=w||function(e){return"".concat(e/k*x,"rem")},T=function(e,t,n,r,a){return c({fontFamily:i,fontWeight:e,fontSize:I(t),lineHeight:n},i===Te?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,b);var o},S={h1:T(u,96,1.167,-1.5),h2:T(u,60,1.2,-.5),h3:T(f,48,1.167,0),h4:T(f,34,1.235,.25),h5:T(f,24,1.334,0),h6:T(p,20,1.6,.15),subtitle1:T(f,16,1.75,.15),subtitle2:T(p,14,1.57,.1),body1:T(f,16,1.5,.15),body2:T(f,14,1.43,.15),button:T(p,14,1.75,.4,Ie),caption:T(f,12,1.66,.4),overline:T(f,12,2.66,1,Ie)};return m(c({htmlFontSize:k,pxToRem:I,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:f,fontWeightMedium:p,fontWeightBold:g},S),_,{clone:!1})}function Ee(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Ce=["none",Ee(0,2,1,-1,0,1,1,0,0,1,3,0),Ee(0,3,1,-2,0,2,2,0,0,1,5,0),Ee(0,3,3,-2,0,3,4,0,0,1,8,0),Ee(0,2,4,-1,0,4,5,0,0,1,10,0),Ee(0,3,5,-1,0,5,8,0,0,1,14,0),Ee(0,3,5,-1,0,6,10,0,0,1,18,0),Ee(0,4,5,-2,0,7,10,1,0,2,16,1),Ee(0,5,5,-3,0,8,10,1,0,3,14,2),Ee(0,5,6,-3,0,9,12,1,0,3,16,2),Ee(0,6,6,-3,0,10,14,1,0,4,18,3),Ee(0,6,7,-4,0,11,15,1,0,4,20,3),Ee(0,7,8,-4,0,12,17,2,0,5,22,4),Ee(0,7,8,-4,0,13,19,2,0,5,24,4),Ee(0,7,9,-4,0,14,21,2,0,5,26,4),Ee(0,8,9,-5,0,15,22,2,0,6,28,5),Ee(0,8,10,-5,0,16,24,2,0,6,30,5),Ee(0,8,11,-5,0,17,26,2,0,6,32,5),Ee(0,9,11,-5,0,18,28,2,0,7,34,6),Ee(0,9,12,-6,0,19,29,2,0,7,36,6),Ee(0,10,13,-6,0,20,31,3,0,8,38,7),Ee(0,10,13,-6,0,21,33,3,0,8,40,7),Ee(0,10,14,-6,0,22,35,3,0,8,42,7),Ee(0,11,14,-7,0,23,36,3,0,9,44,8),Ee(0,11,15,-7,0,24,38,3,0,9,46,8)],Ne=["duration","easing","delay"],Ae={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Pe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Re(e){return"".concat(Math.round(e),"ms")}function De(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function Oe(e){var t=c({},Ae,e.easing),n=c({},Pe,e.duration);return c({getAutoHeightDuration:De,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,c=void 0===u?0:u;h(r,Ne);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:Re(a)," ").concat(s," ").concat("string"===typeof c?c:Re(c))})).join(",")}},e,{easing:t,duration:n})}var Me={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Le=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,l=h(e,Le),f=_e(i),d=Y(e),p=m(d,{mixins:re(d.breakpoints,d.spacing,n),palette:f,shadows:Ce.slice(),typography:Se(f,u),transitions:Oe(o),zIndex:c({},Me)});p=m(p,l);for(var v=arguments.length,g=new Array(v>1?v-1:0),y=1;y<v;y++)g[y-1]=arguments[y];return p=g.reduce((function(e,t){return m(e,t)}),p)}var Ue=Fe();function je(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return v({theme:ne(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:Ue})}var Ve=n(433);var qe=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Be=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ze=qe((function(e){return Be.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var We=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ke=Math.abs,He=String.fromCharCode,Ge=Object.assign;function Ze(e){return e.trim()}function Qe(e,t,n){return e.replace(t,n)}function Ye(e,t){return e.indexOf(t)}function $e(e,t){return 0|e.charCodeAt(t)}function Xe(e,t,n){return e.slice(t,n)}function Je(e){return e.length}function et(e){return e.length}function tt(e,t){return t.push(e),e}var nt=1,rt=1,it=0,at=0,ot=0,st="";function ut(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:nt,column:rt,length:o,return:""}}function ct(e,t){return Ge(ut("",null,null,"",null,null,0),e,{length:-e.length},t)}function lt(){return ot=at>0?$e(st,--at):0,rt--,10===ot&&(rt=1,nt--),ot}function ft(){return ot=at<it?$e(st,at++):0,rt++,10===ot&&(rt=1,nt++),ot}function ht(){return $e(st,at)}function dt(){return at}function pt(e,t){return Xe(st,e,t)}function vt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gt(e){return nt=rt=1,it=Je(st=e),at=0,[]}function mt(e){return st="",e}function yt(e){return Ze(pt(at-1,wt(91===e?e+2:40===e?e+1:e)))}function kt(e){for(;(ot=ht())&&ot<33;)ft();return vt(e)>2||vt(ot)>3?"":" "}function bt(e,t){for(;--t&&ft()&&!(ot<48||ot>102||ot>57&&ot<65||ot>70&&ot<97););return pt(e,dt()+(t<6&&32==ht()&&32==ft()))}function wt(e){for(;ft();)switch(ot){case e:return at;case 34:case 39:34!==e&&39!==e&&wt(ot);break;case 40:41===e&&wt(e);break;case 92:ft()}return at}function _t(e,t){for(;ft()&&e+ot!==57&&(e+ot!==84||47!==ht()););return"/*"+pt(t,at-1)+"*"+He(47===e?e:ft())}function xt(e){for(;!vt(ht());)ft();return pt(e,at)}var It="-ms-",Tt="-moz-",St="-webkit-",Et="comm",Ct="rule",Nt="decl",At="@keyframes";function Pt(e,t){for(var n="",r=et(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Rt(e,t,n,r){switch(e.type){case"@import":case Nt:return e.return=e.return||e.value;case Et:return"";case At:return e.return=e.value+"{"+Pt(e.children,r)+"}";case Ct:e.value=e.props.join(",")}return Je(n=Pt(e.children,r))?e.return=e.value+"{"+n+"}":""}function Dt(e,t){switch(function(e,t){return(((t<<2^$e(e,0))<<2^$e(e,1))<<2^$e(e,2))<<2^$e(e,3)}(e,t)){case 5103:return St+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return St+e+Tt+e+It+e+e;case 6828:case 4268:return St+e+It+e+e;case 6165:return St+e+It+"flex-"+e+e;case 5187:return St+e+Qe(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return St+e+It+"flex-item-"+Qe(e,/flex-|-self/,"")+e;case 4675:return St+e+It+"flex-line-pack"+Qe(e,/align-content|flex-|-self/,"")+e;case 5548:return St+e+It+Qe(e,"shrink","negative")+e;case 5292:return St+e+It+Qe(e,"basis","preferred-size")+e;case 6060:return St+"box-"+Qe(e,"-grow","")+St+e+It+Qe(e,"grow","positive")+e;case 4554:return St+Qe(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return Qe(Qe(Qe(e,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),e,"")+e;case 5495:case 3959:return Qe(e,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return Qe(Qe(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+e+e;case 4095:case 3583:case 4068:case 2532:return Qe(e,/(.+)-inline(.+)/,St+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Je(e)-1-t>6)switch($e(e,t+1)){case 109:if(45!==$e(e,t+4))break;case 102:return Qe(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+Tt+(108==$e(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ye(e,"stretch")?Dt(Qe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==$e(e,t+1))break;case 6444:switch($e(e,Je(e)-3-(~Ye(e,"!important")&&10))){case 107:return Qe(e,":",":"+St)+e;case 101:return Qe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+St+(45===$e(e,14)?"inline-":"")+"box$3$1"+St+"$2$3$1"+It+"$2box$3")+e}break;case 5936:switch($e(e,t+11)){case 114:return St+e+It+Qe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return St+e+It+Qe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return St+e+It+Qe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return St+e+It+e+e}return e}function Ot(e){return mt(Mt("",null,null,null,[""],e=gt(e),0,[0],e))}function Mt(e,t,n,r,i,a,o,s,u){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,g=1,m=1,y=0,k="",b=i,w=a,_=r,x=k;g;)switch(p=y,y=ft()){case 40:if(108!=p&&58==x.charCodeAt(f-1)){-1!=Ye(x+=Qe(yt(y),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:x+=yt(y);break;case 9:case 10:case 13:case 32:x+=kt(p);break;case 92:x+=bt(dt()-1,7);continue;case 47:switch(ht()){case 42:case 47:tt(Ft(_t(ft(),dt()),t,n),u);break;default:x+="/"}break;case 123*v:s[c++]=Je(x)*m;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+l:d>0&&Je(x)-f&&tt(d>32?Ut(x+";",r,n,f-1):Ut(Qe(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(tt(_=Lt(x,t,n,c,l,i,s,k,b=[],w=[],f),a),123===y)if(0===l)Mt(x,t,_,_,b,a,f,s,w);else switch(h){case 100:case 109:case 115:Mt(e,_,_,r&&tt(Lt(e,_,_,0,0,i,s,k,i,b=[],f),w),i,w,f,s,r?b:w);break;default:Mt(x,_,_,_,[""],w,0,s,w)}}c=l=d=0,v=m=1,k=x="",f=o;break;case 58:f=1+Je(x),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==lt())continue;switch(x+=He(y),y*v){case 38:m=l>0?1:(x+="\f",-1);break;case 44:s[c++]=(Je(x)-1)*m,m=1;break;case 64:45===ht()&&(x+=yt(ft())),h=ht(),l=f=Je(k=x+=xt(dt())),y++;break;case 45:45===p&&2==Je(x)&&(v=0)}}return a}function Lt(e,t,n,r,i,a,o,s,u,c,l){for(var f=i-1,h=0===i?a:[""],d=et(h),p=0,v=0,g=0;p<r;++p)for(var m=0,y=Xe(e,f+1,f=Ke(v=o[p])),k=e;m<d;++m)(k=Ze(v>0?h[m]+" "+y:Qe(y,/&\f/g,h[m])))&&(u[g++]=k);return ut(e,t,n,0===i?Ct:s,u,c,l)}function Ft(e,t,n){return ut(e,t,n,Et,He(ot),Xe(e,2,-2),0)}function Ut(e,t,n,r){return ut(e,t,n,Nt,Xe(e,0,r),Xe(e,r+1,-1),r)}var jt=function(e,t,n){for(var r=0,i=0;r=i,i=ht(),38===r&&12===i&&(t[n]=1),!vt(i);)ft();return pt(e,at)},Vt=function(e,t){return mt(function(e,t){var n=-1,r=44;do{switch(vt(r)){case 0:38===r&&12===ht()&&(t[n]=1),e[n]+=jt(at-1,t,n);break;case 2:e[n]+=yt(r);break;case 4:if(44===r){e[++n]=58===ht()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=He(r)}}while(r=ft());return e}(gt(e),t))},qt=new WeakMap,Bt=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||qt.get(n))&&!r){qt.set(e,!0);for(var i=[],a=Vt(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},zt=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Wt=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Nt:e.return=Dt(e.value,e.length);break;case At:return Pt([ct(e,{value:Qe(e.value,"@","@"+St)})],r);case Ct:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pt([ct(e,{props:[Qe(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Pt([ct(e,{props:[Qe(t,/:(plac\w+)/,":-webkit-input-$1")]}),ct(e,{props:[Qe(t,/:(plac\w+)/,":-moz-$1")]}),ct(e,{props:[Qe(t,/:(plac\w+)/,It+"input-$1")]})],r)}return""}))}}],Kt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Wt;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,c,l=[Rt,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],f=function(e){var t=et(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([Bt,zt].concat(r,l));a=function(e,t,n,r){u=n,Pt(Ot(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new We({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return h.sheet.hydrate(s),h};var Ht=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Gt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zt=/[A-Z]|^ms/g,Qt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Yt=function(e){return 45===e.charCodeAt(1)},$t=function(e){return null!=e&&"boolean"!==typeof e},Xt=qe((function(e){return Yt(e)?e:e.replace(Zt,"-$&").toLowerCase()})),Jt=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Qt,(function(e,t,n){return tn={name:t,styles:n,next:tn},t}))}return 1===Gt[e]||Yt(e)||"number"!==typeof t||0===t?t:t+"px"};function en(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return tn={name:n.name,styles:n.styles,next:tn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)tn={name:r.name,styles:r.styles,next:tn},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=en(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":$t(o)&&(r+=Xt(a)+":"+Jt(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=en(e,t,o);switch(a){case"animation":case"animationName":r+=Xt(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)$t(o[u])&&(r+=Xt(a)+":"+Jt(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=tn,a=n(e);return tn=i,en(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var tn,nn=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var rn=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";tn=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=en(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=en(n,t,e[o]),r&&(i+=a[o]);nn.lastIndex=0;for(var s,u="";null!==(s=nn.exec(i));)u+="-"+s[1];return{name:Ht(i)+u,styles:i,next:tn}},an=(0,l.createContext)("undefined"!==typeof HTMLElement?Kt({key:"css"}):null);an.Provider;var on=function(e){return(0,l.forwardRef)((function(t,n){var r=(0,l.useContext)(an);return e(t,r,n)}))},sn=(0,l.createContext)({});f.useInsertionEffect&&f.useInsertionEffect;function un(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var cn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},ln=ze,fn=function(e){return"theme"!==e},hn=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?ln:fn},dn=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},pn=f.useInsertionEffect?f.useInsertionEffect:function(e){e()};var vn=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;cn(t,n,r);var i;i=function(){return function(e,t,n){cn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)},pn(i);return null},gn=function e(t,n){var r,i,a=t.__emotion_real===t,o=a&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var s=dn(t,n,a),u=s||hn(o),f=!u("as");return function(){var h=arguments,d=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var p=h.length,v=1;v<p;v++)d.push(h[v],h[0][v])}var g=on((function(e,t,n){var r=f&&e.as||o,a="",c=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=(0,l.useContext)(sn)}"string"===typeof e.className?a=un(t.registered,c,e.className):null!=e.className&&(a=e.className+" ");var v=rn(d.concat(c),t.registered,h);a+=t.key+"-"+v.name,void 0!==i&&(a+=" "+i);var g=f&&void 0===s?hn(r):u,m={};for(var y in e)f&&"as"===y||g(y)&&(m[y]=e[y]);return m.className=a,m.ref=n,(0,l.createElement)(l.Fragment,null,(0,l.createElement)(vn,{cache:t,serialized:v,isStringTag:"string"===typeof r}),(0,l.createElement)(r,m))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof o?o:o.displayName||o.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=o,g.__emotion_styles=d,g.__emotion_forwardProp=s,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,c({},n,r,{shouldForwardProp:dn(g,r,!0)})).apply(void 0,d)},g}},mn=gn.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){mn[e]=mn(e)}));var yn=mn;function kn(e,t){return yn(e,t)}var bn=["variant"];function wn(e){return 0===e.length}function _n(e){var t=e.variant,n=h(e,bn),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?wn(r)?e[t]:o(e[t]):"".concat(wn(r)?t:o(t)).concat(o(e[t].toString()))})),r}var xn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?P(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function In(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Tn=A({prop:"border",themeKey:"borders",transform:In}),Sn=A({prop:"borderTop",themeKey:"borders",transform:In}),En=A({prop:"borderRight",themeKey:"borders",transform:In}),Cn=A({prop:"borderBottom",themeKey:"borders",transform:In}),Nn=A({prop:"borderLeft",themeKey:"borders",transform:In}),An=A({prop:"borderColor",themeKey:"palette"}),Pn=A({prop:"borderTopColor",themeKey:"palette"}),Rn=A({prop:"borderRightColor",themeKey:"palette"}),Dn=A({prop:"borderBottomColor",themeKey:"palette"}),On=A({prop:"borderLeftColor",themeKey:"palette"}),Mn=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=j(e.theme,"shape.borderRadius",4);return T(e,e.borderRadius,(function(e){return{borderRadius:q(t,e)}}))}return null};Mn.propTypes={},Mn.filterProps=["borderRadius"];var Ln=xn(Tn,Sn,En,Cn,Nn,An,Pn,Rn,Dn,On,Mn),Fn=xn(A({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),A({prop:"display"}),A({prop:"overflow"}),A({prop:"textOverflow"}),A({prop:"visibility"}),A({prop:"whiteSpace"})),Un=xn(A({prop:"flexBasis"}),A({prop:"flexDirection"}),A({prop:"flexWrap"}),A({prop:"justifyContent"}),A({prop:"alignItems"}),A({prop:"alignContent"}),A({prop:"order"}),A({prop:"flex"}),A({prop:"flexGrow"}),A({prop:"flexShrink"}),A({prop:"alignSelf"}),A({prop:"justifyItems"}),A({prop:"justifySelf"})),jn=function(e){if(void 0!==e.gap&&null!==e.gap){var t=j(e.theme,"spacing",8);return T(e,e.gap,(function(e){return{gap:q(t,e)}}))}return null};jn.propTypes={},jn.filterProps=["gap"];var Vn=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=j(e.theme,"spacing",8);return T(e,e.columnGap,(function(e){return{columnGap:q(t,e)}}))}return null};Vn.propTypes={},Vn.filterProps=["columnGap"];var qn=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=j(e.theme,"spacing",8);return T(e,e.rowGap,(function(e){return{rowGap:q(t,e)}}))}return null};qn.propTypes={},qn.filterProps=["rowGap"];var Bn=xn(jn,Vn,qn,A({prop:"gridColumn"}),A({prop:"gridRow"}),A({prop:"gridAutoFlow"}),A({prop:"gridAutoColumns"}),A({prop:"gridAutoRows"}),A({prop:"gridTemplateColumns"}),A({prop:"gridTemplateRows"}),A({prop:"gridTemplateAreas"}),A({prop:"gridArea"})),zn=xn(A({prop:"position"}),A({prop:"zIndex",themeKey:"zIndex"}),A({prop:"top"}),A({prop:"right"}),A({prop:"bottom"}),A({prop:"left"})),Wn=xn(A({prop:"color",themeKey:"palette"}),A({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),A({prop:"backgroundColor",themeKey:"palette"})),Kn=A({prop:"boxShadow",themeKey:"shadows"});function Hn(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var Gn=A({prop:"width",transform:Hn}),Zn=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return T(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||x[t]||Hn(t)}}))}return null};Zn.filterProps=["maxWidth"];var Qn=A({prop:"minWidth",transform:Hn}),Yn=A({prop:"height",transform:Hn}),$n=A({prop:"maxHeight",transform:Hn}),Xn=A({prop:"minHeight",transform:Hn}),Jn=(A({prop:"size",cssProperty:"width",transform:Hn}),A({prop:"size",cssProperty:"height",transform:Hn}),xn(Gn,Zn,Qn,Yn,$n,Xn,A({prop:"boxSizing"}))),er=A({prop:"fontFamily",themeKey:"typography"}),tr=A({prop:"fontSize",themeKey:"typography"}),nr=A({prop:"fontStyle",themeKey:"typography"}),rr=A({prop:"fontWeight",themeKey:"typography"}),ir=A({prop:"letterSpacing"}),ar=A({prop:"textTransform"}),or=A({prop:"lineHeight"}),sr=A({prop:"textAlign"}),ur=xn(A({prop:"typography",cssProperty:!1,themeKey:"typography"}),er,tr,nr,rr,ir,or,sr,ar),cr={borders:Ln.filterProps,display:Fn.filterProps,flexbox:Un.filterProps,grid:Bn.filterProps,positions:zn.filterProps,palette:Wn.filterProps,shadows:Kn.filterProps,sizing:Jn.filterProps,spacing:G.filterProps,typography:ur.filterProps},lr={borders:Ln,display:Fn,flexbox:Un,grid:Bn,positions:zn,palette:Wn,shadows:Kn,sizing:Jn,spacing:G,typography:ur};Object.keys(cr).reduce((function(e,t){return cr[t].forEach((function(n){e[n]=lr[t]})),e}),{});function fr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function hr(e,t){return"function"===typeof e?e(t):e}var dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,a=(i={},(0,y.Z)(i,e,n),(0,y.Z)(i,"theme",r),i),o=t[e];return o?o(a):(0,y.Z)({},e,n)}function r(e){var i=e||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;function u(e){var i=e;if("function"===typeof e)i=e(s);else if("object"!==typeof e)return e;if(!i)return null;var a=S(s.breakpoints),o=Object.keys(a),u=a;return Object.keys(i).forEach((function(e){var a=hr(i[e],s);if(null!==a&&void 0!==a)if("object"===typeof a)if(t[e])u=P(u,n(e,a,s));else{var o=T({theme:s},a,(function(t){return(0,y.Z)({},e,t)}));fr(o,a)?u[e]=r({sx:a,theme:s}):u=P(u,o)}else u=P(u,n(e,a,s))})),E(o,u)}return Array.isArray(a)?a.map(u):u(a)}return r}();dr.filterProps=["sx"];var pr=dr,vr=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],gr=["theme"],mr=["theme"];function yr(e){return 0===Object.keys(e).length}var kr=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},br=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=_n(e.props);r[t]=e.style})),r},wr=function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[_n(n.props)])})),u};function _r(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var xr=Y();var Ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?xr:t,r=e.rootShouldForwardProp,i=void 0===r?_r:r,a=e.slotShouldForwardProp,o=void 0===a?_r:a,s=e.styleFunctionSx,u=void 0===s?pr:s;return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,s=r.slot,l=r.skipVariantsResolver,f=r.skipSx,d=r.overridesResolver,p=h(r,vr),v=void 0!==l?l:s&&"Root"!==s||!1,g=f||!1;var m=_r;"Root"===s?m=i:s&&(m=o);var y=kn(e,c({shouldForwardProp:m,label:t},p)),k=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=h(t,gr);return e(c({theme:yr(r)?n:r},i))}:e})):[],s=e;a&&d&&o.push((function(e){var t=yr(e.theme)?n:e.theme,r=kr(a,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=(0,_.Z)(n,2),a=r[0],o=r[1];i[a]="function"===typeof o?o(c({},e,{theme:t})):o})),d(e,i)}return null})),a&&!v&&o.push((function(e){var t=yr(e.theme)?n:e.theme;return wr(e,br(a,t),t,a)})),g||o.push((function(e){var t=yr(e.theme)?n:e.theme;return u(c({},e,{theme:t}))}));var l=o.length-r.length;if(Array.isArray(e)&&l>0){var f=new Array(l).fill("");(s=[].concat((0,Ve.Z)(e),(0,Ve.Z)(f))).raw=[].concat((0,Ve.Z)(e.raw),(0,Ve.Z)(f))}else"function"===typeof e&&e.__emotion_real!==e&&(s=function(t){var r=t.theme,i=h(t,mr);return e(c({theme:yr(r)?n:r},i))});var p=y.apply(void 0,[s].concat((0,Ve.Z)(o)));return p};return y.withConfig&&(k.withConfig=y.withConfig),k}}({defaultTheme:Ue,rootShouldForwardProp:function(e){return _r(e)&&"classes"!==e}}),Tr=Ir,Sr={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function Er(e,t){return Sr[t]||"".concat(i.generate(e),"-").concat(t)}function Cr(e){return Er("MuiSvgIcon",e)}!function(e,t){var n={};t.forEach((function(t){n[t]=Er(e,t)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Nr=n(184),Ar=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Pr=function(e){var t=e.color,n=e.fontSize,r=e.classes;return function(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&"color".concat(s(t)),"fontSize".concat(s(n))]},Cr,r)},Rr=Tr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(s(n.color))],t["fontSize".concat(s(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,u,c,l,f,h,d,p,v,g,m,y=e.theme,k=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875"}[k.fontSize],color:null!=(f=null==(h=(y.vars||y).palette)||null==(d=h[k.color])?void 0:d.main)?f:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(g=(y.vars||y).palette)||null==(m=g.action)?void 0:m.disabled,inherit:void 0}[k.color]}})),Dr=l.forwardRef((function(e,t){var n=je({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,a=n.color,o=void 0===a?"inherit":a,s=n.component,u=void 0===s?"svg":s,l=n.fontSize,f=void 0===l?"medium":l,d=n.htmlColor,v=n.inheritViewBox,g=void 0!==v&&v,m=n.titleAccess,y=n.viewBox,k=void 0===y?"0 0 24 24":y,b=h(n,Ar),w=c({},n,{color:o,component:u,fontSize:f,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:k}),_={};g||(_.viewBox=k);var x=Pr(w);return(0,Nr.jsxs)(Rr,c({as:u,className:p(x.root,i),ownerState:w,focusable:"false",color:d,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:t},_,b,{children:[r,m?(0,Nr.jsx)("title",{children:m}):null]}))}));Dr.muiName="SvgIcon";var Or=Dr;function Mr(e,t){var n=function(n,r){return(0,Nr.jsx)(Or,c({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))};return n.muiName=Or.muiName,l.memo(l.forwardRef(n))}var Lr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){e.apply(r,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var Fr=function(e,t){return function(){return null}};var Ur=function(e,t){return l.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function jr(e){return e&&e.ownerDocument||document}var Vr=jr;var qr=function(e){return jr(e).defaultView||window};var Br=function(e,t){return function(){return null}};function zr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var Wr=zr,Kr="undefined"!==typeof window?l.useLayoutEffect:l.useEffect,Hr=Kr,Gr=0;var Zr=f.useId;var Qr=function(e){if(void 0!==Zr){var t=Zr();return null!=e?e:t}return function(e){var t=l.useState(e),n=(0,_.Z)(t,2),r=n[0],i=n[1],a=e||r;return l.useEffect((function(){null==r&&i("mui-".concat(Gr+=1))}),[r]),a}(e)};var Yr=function(e,t,n,r,i){return null};var $r=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,l.useRef(void 0!==t).current),i=l.useState(n),a=(0,_.Z)(i,2),o=a[0],s=a[1];return[r?t:o,l.useCallback((function(e){r||s(e)}),[])]};var Xr=function(e){var t=l.useRef(e);return Kr((function(){t.current=e})),l.useCallback((function(){return t.current.apply(void 0,arguments)}),[])};var Jr,ei=function(e,t){return l.useMemo((function(){return null==e&&null==t?null:function(n){zr(e,n),zr(t,n)}}),[e,t])},ti=!0,ni=!1,ri={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ii(e){e.metaKey||e.altKey||e.ctrlKey||(ti=!0)}function ai(){ti=!1}function oi(){"hidden"===this.visibilityState&&ni&&(ti=!0)}function si(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return ti||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!ri[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var ui=function(){var e=l.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",ii,!0),t.addEventListener("mousedown",ai,!0),t.addEventListener("pointerdown",ai,!0),t.addEventListener("touchstart",ai,!0),t.addEventListener("visibilitychange",oi,!0))}),[]),t=l.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!si(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(ni=!0,window.clearTimeout(Jr),Jr=window.setTimeout((function(){ni=!1}),100),t.current=!1,!0)},ref:e}},ci={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),i.configure(e)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Te(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Me(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Le=!0,Fe=e}};function qe(e,t,n,r,i,a,o,s,u){Le=!1,Fe=null,Me.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Tt,St=!1,Et=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Et.length){qt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Zt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&Wr(e,t,r,Zt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Zt=null;function Qt(e,t,n,r){if(Zt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),gn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Mn,Fn=l&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Zn(e){Ur(e,0)}function Qn(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Kn(t,Gn,e,we(e)),Pe(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Tr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Tr("animationend"),Er=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Er,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Fe;Le=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Er:case Cr:u=mn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==u&&Zr(o,s,u,l,!1),null!==c&&null!==f&&Zr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Yn;else if(Wn(s))if($n)g=or;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),y?k.data=y:null!==(y=qn(n))&&(k.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Jt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,gi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ti(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ei={},Ci=Ii(Ei),Ni=Ii(!1),Ai=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),Si(Ci,e)):Ti(Ni),Si(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Je,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=b.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ii(null),Hi=null,Gi=null,Zi=null;function Qi(){Zi=Gi=Hi=null}function Yi(e){var t=Ki.current;Ti(Ki),e._currentValue=t}function $i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){Hi=e,Zi=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Ji(e){var t=e._currentValue;if(Zi!==e)if(e={context:e,memoizedValue:t,next:null},null===Gi){if(null===Hi)throw Error(a(308));Gi=e,Hi.dependencies={lanes:0,firstContext:e}}else Gi=Gi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function sa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ua(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Du|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$u(),i=Xu(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Ju(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$u(),i=Xu(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Ju(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$u(),r=Xu(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Ju(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function pa(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ji(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ji(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ya=0,ka=null,ba=0,wa=[],_a=0,xa=null,Ia=1,Ta="";function Sa(e,t){ma[ya++]=ba,ma[ya++]=ka,ka=e,ba=t}function Ea(e,t,n){wa[_a++]=Ia,wa[_a++]=Ta,wa[_a++]=xa,xa=e;var r=Ia;e=Ta;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Ta=a+e}else Ia=1<<a|n<<i|r,Ta=e}function Ca(e){null!==e.return&&(Sa(e,1),Ea(e,1,0))}function Na(e){for(;e===ka;)ka=ma[--ya],ma[ya]=null,ba=ma[--ya],ma[ya]=null;for(;e===xa;)xa=wa[--_a],wa[_a]=null,Ta=wa[--_a],wa[_a]=null,Ia=wa[--_a],wa[_a]=null}var Aa=null,Pa=null,Ra=!1,Da=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Ta}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Pa=null,!0);default:return!1}}function La(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Ra){var t=Pa;if(t){var n=t;if(!Ma(e,t)){if(La(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&Ma(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Ra=!1,Aa=e)}}else{if(La(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ra=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function ja(e){if(e!==Aa)return!1;if(!Ra)return Ua(e),Ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(La(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Aa?ci(e.stateNode.nextSibling):null;return!0}function Va(){Pa=Aa=null,Ra=!1}function qa(e){null===Da?Da=[e]:Da.push(e)}function Ba(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Ba(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ba(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ba(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=g);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=g}if(v===s.length)return n(i,f),Ra&&Sa(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ra&&Sa(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(g=p(f,i,v,s[v],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return e&&f.forEach((function(e){return t(i,e)})),Ra&&Sa(i,v),c}function g(i,s,u,c){var l=M(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,g),null===f?l=k:f.sibling=k,f=k,v=m}if(y.done)return n(i,v),Ra&&Sa(i,g),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return Ra&&Sa(i,g),l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),Ra&&Sa(i,g),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ba(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ba(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(M(o))return g(r,a,o,u);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Lc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ha=Ka(!0),Ga=Ka(!1),Za={},Qa=Ii(Za),Ya=Ii(Za),$a=Ii(Za);function Xa(e){if(e===Za)throw Error(a(174));return e}function Ja(e,t){switch(Si($a,t),Si(Ya,e),Si(Qa,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Qa),Si(Qa,t)}function eo(){Ti(Qa),Ti(Ya),Ti($a)}function to(e){Xa($a.current);var t=Xa(Qa.current),n=ue(t,e.type);t!==n&&(Si(Ya,e),Si(Qa,n))}function no(e){Ya.current===e&&(Ti(Qa),Ti(Ya))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=b.ReactCurrentDispatcher,uo=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,go=0,mo=0;function yo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),vo){o=0;do{if(vo=!1,go=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(vo)}if(so.current=ns,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==go;return go=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function To(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,lo.lanes|=f,Du|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Du|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ws=!0),r=r.queue,jo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Su)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Ju(e,1,-1)}function Po(e,t,n){return n((function(){Ro(t)&&Ju(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Do(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=$o.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Mo(){return xo().memoizedState}function Lo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Lo(8390656,8,e,t)}function jo(e,t){return Fo(2048,8,e,t)}function Vo(e,t){return Fo(4,2,e,t)}function qo(e,t){return Fo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Bo.bind(null,t,e),n)}function Wo(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),lo.lanes|=n,Du|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{kt=n,uo.transition=r}}function Qo(){return xo().memoizedState}function Yo(e,t,n){var r=Xu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Jo(t,n):(es(e,t,n),null!==(e=Ju(e,r,n=$u()))&&ts(e,t,r))}function $o(e,t,n){var r=Xu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Jo(t,i);else{es(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o))return}catch(u){}null!==(e=Ju(e,r,n=$u()))&&ts(e,t,r)}}function Xo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Jo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:Ji,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:Ji,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Ji,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Zo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Su)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Su.identifierPrefix;if(Ra){var n=Ta;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Ho,useReducer:To,useRef:Mo,useState:function(){return To(Io)},useDebugValue:Wo,useDeferredValue:function(e){return Go(xo(),fo.memoizedState,e)},useTransition:function(){return[To(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1},as={readContext:Ji,useCallback:Ko,useContext:Ji,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Vo,useLayoutEffect:qo,useMemo:Ho,useReducer:So,useRef:Mo,useState:function(){return So(Io)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Go(t,fo.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,cs,ls,fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qu||(qu=!0,Bu=r),ss(0,t)},n}function ds(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ss(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===zu?zu=new Set([this]):zu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function ms(e,t){if(!Ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ks(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Ri(t.type)&&Di(),ys(t),null;case 3:return r=t.stateNode,eo(),Ti(Ni),Ti(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ja(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),ys(t),null;case 5:no(t);var i=Xa($a.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ys(t),null}if(e=Xa(Qa.current),ja(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,us(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa($a.current),Xa(Qa.current),ja(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return ys(t),null;case 13:if(Ti(ro),r=t.memoizedState,Ra&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=ja(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else Va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?ja(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Pu&&(Pu=3):pc())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Br(t.stateNode.containerInfo),ys(t),null;case 10:return Yi(t.type._context),ys(t),null;case 19:if(Ti(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)ms(o,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=io(e))){for(t.flags|=128,ms(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ju&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ms(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Ra)return ys(t),null}else 2*$e()-o.renderingStartTime>ju&&1073741824!==n&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Si(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xa(Qa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var bs=b.ReactCurrentOwner,ws=!1;function _s(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Ha(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Xi(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||ws?(Ra&&n&&Ca(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ts(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Au,Nu),Nu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Au,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Au,Nu),Nu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Au,Nu),Nu|=r;return _s(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Xi(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||ws?(Ra&&r&&Ca(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ns(e,t,n,r,i){if(Ri(n)){var a=!0;Li(t)}else a=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ji(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,ua(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),u=t.memoizedState),(s=ta||da(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Wi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ji(u):u=Pi(t,u=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&va(t,o,r,u),ta=!1,h=t.memoizedState,o.state=h,ua(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ha(t,e.child,null,a),t.child=Ha(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ja(e,t.containerInfo)}function Rs(e,t,n,r,i){return Va(),qa(i),t.flags|=256,_s(e,t,n,r),t.child}var Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ls(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Mc(o,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ds,e):Fs(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Vs(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=Mc({mode:"visible",children:i.children},o,0,null),(s=Oc(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&Ha(t,e.child,null,n),t.child.memoizedState=Os(n),t.memoizedState=Ds,s);if(0===(1&t.mode))t=Vs(e,t,n,null);else if("$!"===r.data)t=Vs(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),ws||i){if(null!==(i=Su)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Ju(e,i,-1))}pc(),t=Vs(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Aa=t,Ra=!0,Da=null,null!==n&&(wa[_a++]=Ia,wa[_a++]=Ta,wa[_a++]=xa,Ia=n.id,Ta=n.overflow,xa=t),(t=Fs(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=js(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Os(n):Ms(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i):(n=Us(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=js(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Os(n):Ms(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i):(n=Us(e,t,i.children,n),t.memoizedState=null,n)}function Fs(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){var i=e.child;return e=i.sibling,n=Rc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function js(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Rc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vs(e,t,n,r){return null!==r&&qa(r),Ha(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),$i(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,n,t);else if(19===e.tag)qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Du|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){switch(Na(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ti(Ni),Ti(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ti(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ro),null;case 4:return eo(),null;case 10:return Yi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Hs=!1,Gs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Ys(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function $s(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Xs=!1;function Js(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&$s(t,n,a)}i=i.next}while(i!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function iu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function au(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(au(e,t,n),e=e.sibling;null!==e;)au(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function cu(e,t,n){for(n=n.child;null!==n;)lu(e,t,n),n=n.sibling}function lu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Gs||Ys(n,t);case 6:var r=su,i=uu;su=null,cu(e,t,n),uu=i,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(su,n.stateNode));break;case 4:r=su,i=uu,su=n.stateNode.containerInfo,uu=!0,cu(e,t,n),su=r,uu=i;break;case 0:case 11:case 14:case 15:if(!Gs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&$s(n,t,o),i=i.next}while(i!==r)}cu(e,t,n);break;case 1:if(!Gs&&(Ys(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:1&n.mode?(Gs=(r=Gs)||null!==n.memoizedState,cu(e,t,n),Gs=r):cu(e,t,n);break;default:cu(e,t,n)}}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(a(160));lu(o,s,i),su=null,uu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hu(t,e),pu(e),4&r){try{Js(3,e,e.return),eu(3,e)}catch(v){xc(e,e.return,v)}try{Js(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hu(t,e),pu(e),512&r&&null!==n&&Ys(n,n.return);break;case 5:if(hu(t,e),pu(e),512&r&&null!==n&&Ys(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ge(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hu(t,e),pu(e);break;case 13:hu(t,e),pu(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Uu=$e()),4&r&&fu(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Gs=(f=Gs)||l,hu(t,e),Gs=f):hu(t,e),pu(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Qs=e,e=e.child;null!==e;){for(l=Qs=e;null!==Qs;){switch(h=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:Js(4,f,f.return);break;case 1:if(Ys(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:Ys(f,f.return);break;case 22:if(null!==f.memoizedState){yu(l);continue}}null!==h?(h.return=f,Qs=h):yu(l)}e=e.sibling}}break;case 19:hu(t,e),pu(e),4&r&&fu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ou(e,iu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;au(e,iu(e),o);break;default:throw Error(a(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Qs=e,gu(e,t,n)}function gu(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Hs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Gs;s=Hs;var c=Gs;if(Hs=o,(Gs=u)&&!c)for(Qs=i;null!==Qs;)u=(o=Qs).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==u?(u.return=o,Qs=u):ku(i);for(;null!==a;)Qs=a,gu(a,t,n),a=a.sibling;Qs=i,Hs=s,Gs=c}mu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):mu(e)}}function mu(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Gs||512&t.flags&&tu(t)}catch(d){xc(t,t.return,d)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function yu(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function ku(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){xc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xc(t,i,u)}}var a=t.return;try{tu(t)}catch(u){xc(t,a,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){xc(t,o,u)}}}catch(u){xc(t,t.return,u)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var bu,wu=Math.ceil,_u=b.ReactCurrentDispatcher,xu=b.ReactCurrentOwner,Iu=b.ReactCurrentBatchConfig,Tu=0,Su=null,Eu=null,Cu=0,Nu=0,Au=Ii(0),Pu=0,Ru=null,Du=0,Ou=0,Mu=0,Lu=null,Fu=null,Uu=0,ju=1/0,Vu=null,qu=!1,Bu=null,zu=null,Wu=!1,Ku=null,Hu=0,Gu=0,Zu=null,Qu=-1,Yu=0;function $u(){return 0!==(6&Tu)?$e():-1!==Qu?Qu:Qu=$e()}function Xu(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==Cu?Cu&-Cu:null!==zi.transition?(0===Yu&&(Yu=vt()),Yu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Ju(e,t,n){if(50<Gu)throw Gu=0,Zu=null,Error(a(185));var r=ec(e,t);return null===r?null:(mt(r,t,n),0!==(2&Tu)&&r===Su||(r===Su&&(0===(2&Tu)&&(Ou|=t),4===Pu&&oc(r,Cu)),nc(r,n),1===t&&0===Tu&&0===(1&e.mode)&&(ju=$e()+500,ji&&Bi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Su||null!==ea)&&0!==(1&e.mode)&&0===(2&Tu)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Su?Cu:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===Tu&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Qu=-1,Yu=0,0!==(6&Tu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Su?Cu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Tu;Tu|=2;var o=dc();for(Su===e&&Cu===t||(Vu=null,ju=$e()+500,fc(e,t));;)try{mc();break}catch(u){hc(e,u)}Qi(),_u.current=o,Tu=i,null!==Eu?t=0:(Su=null,Cu=0,t=Pu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ru,fc(e,0),oc(e,r),nc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ru,fc(e,0),oc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fu,Vu);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Uu+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){$u(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fu,Vu),t);break}bc(e,Fu,Vu);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wu(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fu,Vu),r);break}bc(e,Fu,Vu);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Lu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fu,Fu=n,null!==t&&ac(t)),e}function ac(e){null===Fu?Fu=e:Fu.push.apply(Fu,e)}function oc(e,t){for(t&=~Mu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Tu))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ru,fc(e,0),oc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fu,Vu),nc(e,$e()),null}function uc(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(ju=$e()+500,ji&&Bi())}}function cc(e){null!==Ku&&0===Ku.tag&&0===(6&Tu)&&wc();var t=Tu;Tu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Tu=t))&&Bi()}}function lc(){Nu=Au.current,Ti(Au)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Eu)for(n=Eu.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ti(Ni),Ti(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ti(ro);break;case 10:Yi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Su=e,Eu=e=Rc(e.current,null),Cu=Nu=t,Pu=0,Ru=null,Mu=Ou=Du=0,Fu=Lu=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Eu;try{if(Qi(),so.current=ns,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,go=0,xu.current=null,null===n||null===n.return){Pu=1,Ru=t,Eu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Cu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ps(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){ps(o,l,t),pc();break e}c=Error(a(426))}else if(Ra&&1&u.mode){var m=vs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),qa(c);break e}}o=c,4!==Pu&&(Pu=2),null===Lu?Lu=[o]:Lu.push(o),c=os(c,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,sa(u,hs(0,c,t));break e;case 1:o=c;var y=u.type,k=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===zu||!zu.has(k)))){u.flags|=65536,t&=-t,u.lanes|=t,sa(u,ds(u,o,t));break e}}u=u.return}while(null!==u)}kc(n)}catch(b){t=b,Eu===n&&null!==n&&(Eu=n=n.return);continue}break}}function dc(){var e=_u.current;return _u.current=ns,null===e?ns:e}function pc(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Su||0===(268435455&Du)&&0===(268435455&Ou)||oc(Su,Cu)}function vc(e,t){var n=Tu;Tu|=2;var r=dc();for(Su===e&&Cu===t||(Vu=null,fc(e,t));;)try{gc();break}catch(i){hc(e,i)}if(Qi(),Tu=n,_u.current=r,null!==Eu)throw Error(a(261));return Su=null,Cu=0,Pu}function gc(){for(;null!==Eu;)yc(Eu)}function mc(){for(;null!==Eu&&!Qe();)yc(Eu)}function yc(e){var t=bu(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?kc(e):Eu=t,xu.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ks(n,t,Nu)))return void(Eu=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Eu=n);if(null===e)return Pu=6,void(Eu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Eu=t);Eu=t=e}while(null!==t);0===Pu&&(Pu=5)}function bc(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ku);if(0!==(6&Tu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Su&&(Eu=Su=null,Cu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wu||(Wu=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Tu;Tu|=4,xu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Wi(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}v=Xs,Xs=!1}(e,n),du(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vu(n,e,i),Ye(),Tu=u,kt=s,Iu.transition=o}else e.current=n;if(Wu&&(Wu=!1,Ku=e,Hu=i),0===(o=e.pendingLanes)&&(zu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(qu)throw qu=!1,e=Bu,Bu=null,e;0!==(1&Hu)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Zu?Gu++:(Gu=0,Zu=e):Gu=0,Bi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function wc(){if(null!==Ku){var e=bt(Hu),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Hu=0,0!==(6&Tu))throw Error(a(331));var i=Tu;for(Tu|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Qs=l;null!==Qs;){var f=Qs;switch(f.tag){case 0:case 11:case 15:Js(8,f,o)}var h=f.child;if(null!==h)h.return=f,Qs=h;else for(;null!==Qs;){var d=(f=Qs).sibling,p=f.return;if(nu(f),f===l){Qs=null;break}if(null!==d){d.return=p,Qs=d;break}Qs=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var k=e.current;for(Qs=k;null!==Qs;){var b=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Qs=b;else e:for(s=k;null!==Qs;){if(0!==(2048&(u=Qs).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(_){xc(u,u.return,_)}if(u===s){Qs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Qs=w;break e}Qs=u.return}}if(Tu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function _c(e,t,n){aa(e,t=hs(0,t=os(n,t),1)),t=$u(),null!==(e=ec(e,1))&&(mt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zu||!zu.has(r))){aa(t,e=ds(t,e=os(n,e),1)),e=$u(),null!==(t=ec(t,1))&&(mt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=$u(),e.pingedLanes|=e.suspendedLanes&n,Su===e&&(Cu&n)===n&&(4===Pu||3===Pu&&(130023424&Cu)===Cu&&500>$e()-Uu?fc(e,0):Mu|=n),nc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=$u();null!==(e=ec(e,t))&&(mt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:s=8,i|=8;break;case T:return(e=Ac(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case E:s=9;break e;case C:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ei;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=jc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=ia(r=$u(),i=Xu(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=$u(),o=Xu(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Ju(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}bu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),Va();break;case 5:to(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Si(ro,1&ro.current),null!==(e=Ws(e,t,n))?e.sibling:null);Si(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,Ra&&0!==(1048576&t.flags)&&Ea(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);Xi(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,Ra&&o&&Ca(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Is(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Rs(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Aa=t,Ra=!0,Da=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Ws(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Ls(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ha(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(Ki,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),$i(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),$i(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Ji(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Is(e,t,r,i=Wi(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Xi(t,n),pa(t,r,i),ga(t,r,i,n),As(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Jc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=jc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,$e()),0===(6&Tu)&&(ju=$e()+500,Bi()))}break;case 13:var r=$u();cc((function(){return Ju(e,1,r)})),Hc(e,1)}},_t=function(e){13===e.tag&&(Ju(e,134217728,$u()),Hc(e,134217728))},xt=function(e){if(13===e.tag){var t=$u(),n=Xu(e);Ju(e,n,t),Hc(e,n)}},It=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Ee,uc]},tl={findFiberByHostInstance:yi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Jc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=k.prototype=new y;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function g(){}function m(){}function y(){}var k={};u(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=y.prototype=g.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=y,u(_,"constructor",y),u(y,"constructor",m),m.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,g&&(g=!1,y(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,T=null,S=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(I=!1,T=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){T=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(g?(y(S),S=-1):g=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(878);var i=n(181),a=n(267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f055211e.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="demo:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkdemo=self.webpackChunkdemo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Z},SDK_VERSION:function(){return wt},_DEFAULT_ENTRY_NAME:function(){return ut},_addComponent:function(){return ht},_addOrOverwriteComponent:function(){return dt},_apps:function(){return lt},_clearComponents:function(){return mt},_components:function(){return ft},_getProvider:function(){return vt},_registerComponent:function(){return pt},_removeServiceInstance:function(){return gt},deleteApp:function(){return Tt},getApp:function(){return xt},getApps:function(){return It},initializeApp:function(){return _t},onLog:function(){return Ct},registerVersion:function(){return Et},setLogLevel:function(){return Nt}});var t=n(791),r=n(250);function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(xd){return void n(xd)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))}}var o=n(439),s=n(757),u=n.n(s);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=n(942),d=n(181);function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,d.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function _(e){var t=k();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function x(e,t,n){return x=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},x.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},I(e)}var T=!1,S=!1,E="${JSCORE_VERSION}",C=function(e,t){if(!e)throw N(t)},N=function(e){return new Error("Firebase Database ("+E+") INTERNAL ASSERT FAILED: "+e)},A=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},R=function(e){var t=A(e);return P.encodeByteArray(t,!0)},D=function(e){return R(e).replace(/\./g,"")},O=function(e){try{return P.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}var L=function(){function e(){var t=this;c(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function j(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())}function V(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function q(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function B(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function z(){var e=U();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function W(){return!0===T||!0===S}function K(){return"object"===typeof indexedDB}function H(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(xd){t(xd)}}))}function G(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var Z=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(v(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(v(a),Q.prototype.create),a}return f(n)}(I(Error)),Q=function(){function e(t,n,r){c(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Y(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Z(n,a,t);return o}}]),e}();function Y(e,t){return e.replace($,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var $=/\{\$([^}]+)}/g;function X(e){return JSON.parse(e)}function J(e){return JSON.stringify(e)}var ee=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=X(O(a[0])||""),n=X(O(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},te=function(e){var t=ee(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null};function ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ie(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ae(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function oe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(se(s)&&se(u)){if(!oe(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function se(e){return null!==e&&"object"===typeof e}function ue(e){for(var t=[],n=function(){var e=(0,o.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ce(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,o.Z)(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function le(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var fe=function(){function e(){c(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function he(e,t){var n=new de(e,t);return n.subscribe.bind(n)}var de=function(){function e(t,n){var r=this;c(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return f(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pe),void 0===r.error&&(r.error=pe),void 0===r.complete&&(r.complete=pe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pe(){}var ve=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ge(e,t){return"".concat(e," failed: ").concat(t," argument ")}function me(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ge(e,t)+"must be a valid function.")}function ye(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ge(e,t)+"must be a valid context object.")}var ke=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},be=144e5;function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(be,r+i)}function _e(e){return e&&e._delegate?e._delegate:e}var xe=n(433),Ie=function(){function e(t,n,r){c(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Te="[DEFAULT]",Se=function(){function e(t,n){c(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new L;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(c){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,o.Z)(t.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:s});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(s.mark((function e(){var t;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,xe.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,xe.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=p(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var u=(0,o.Z)(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){s.e(h)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mD){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Te?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mD){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.component?this.component.multipleInstances?e:Te:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ee,Ce,Ne=function(){function e(t){c(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Se(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ae=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ce||(Ce={}));var Pe={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Re=Ce.INFO,De=(Ee={},(0,h.Z)(Ee,Ce.DEBUG,"log"),(0,h.Z)(Ee,Ce.VERBOSE,"log"),(0,h.Z)(Ee,Ce.INFO,"info"),(0,h.Z)(Ee,Ce.WARN,"warn"),(0,h.Z)(Ee,Ce.ERROR,"error"),Ee),Oe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=De[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Me=function(){function e(t){c(this,e),this.name=t,this._logLevel=Re,this._logHandler=Oe,this._userLogHandler=null,Ae.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ce))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Pe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ce.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ce.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.INFO].concat(t)),this._logHandler.apply(this,[this,Ce.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.WARN].concat(t)),this._logHandler.apply(this,[this,Ce.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.ERROR].concat(t)),this._logHandler.apply(this,[this,Ce.ERROR].concat(t))}}]),e}();function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue,je;var Ve=new WeakMap,qe=new WeakMap,Be=new WeakMap,ze=new WeakMap,We=new WeakMap;var Ke={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Be.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ze(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function He(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(je||(je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Qe(this),n),Ze(Ve.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ze(e.apply(Qe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Qe(this),t].concat(r));return Be.set(a,t.sort?t.sort():[t]),Ze(a)}}function Ge(e){return"function"===typeof e?He(e):(e instanceof IDBTransaction&&function(e){if(!qe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));qe.set(e,t)}}(e),t=e,(Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ke):e);var t}function Ze(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ze(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ve.set(t,e)})).catch((function(){})),We.set(t,e),t}(e);if(ze.has(e))return ze.get(e);var t=Ge(e);return t!==e&&(ze.set(e,t),We.set(t,e)),t}var Qe=function(e){return We.get(e)};function Ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ze(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ze(s.result),e.oldVersion,e.newVersion,Ze(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blocked,r=indexedDB.deleteDatabase(e);return n&&r.addEventListener("blocked",(function(){return n()})),Ze(r).then((function(){}))}var Xe,Je,et=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],nt=new Map;function rt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(nt.get(t))return nt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=tt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||et.includes(n))){var o=function(){var e=a(s.mark((function e(t){var a,o,u,c,l,f,h=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return nt.set(t,o),o}}}Ke=function(e){return Fe(Fe({},e),{},{get:function(t,n,r){return rt(t,n)||e.get(t,n,r)},has:function(t,n){return!!rt(t,n)||e.has(t,n)}})}(Ke);var it=function(){function e(t){c(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var at="@firebase/app",ot="0.7.24",st=new Me("@firebase/app"),ut="[DEFAULT]",ct=(Xe={},(0,h.Z)(Xe,at,"fire-core"),(0,h.Z)(Xe,"@firebase/app-compat","fire-core-compat"),(0,h.Z)(Xe,"@firebase/analytics","fire-analytics"),(0,h.Z)(Xe,"@firebase/analytics-compat","fire-analytics-compat"),(0,h.Z)(Xe,"@firebase/app-check","fire-app-check"),(0,h.Z)(Xe,"@firebase/app-check-compat","fire-app-check-compat"),(0,h.Z)(Xe,"@firebase/auth","fire-auth"),(0,h.Z)(Xe,"@firebase/auth-compat","fire-auth-compat"),(0,h.Z)(Xe,"@firebase/database","fire-rtdb"),(0,h.Z)(Xe,"@firebase/database-compat","fire-rtdb-compat"),(0,h.Z)(Xe,"@firebase/functions","fire-fn"),(0,h.Z)(Xe,"@firebase/functions-compat","fire-fn-compat"),(0,h.Z)(Xe,"@firebase/installations","fire-iid"),(0,h.Z)(Xe,"@firebase/installations-compat","fire-iid-compat"),(0,h.Z)(Xe,"@firebase/messaging","fire-fcm"),(0,h.Z)(Xe,"@firebase/messaging-compat","fire-fcm-compat"),(0,h.Z)(Xe,"@firebase/performance","fire-perf"),(0,h.Z)(Xe,"@firebase/performance-compat","fire-perf-compat"),(0,h.Z)(Xe,"@firebase/remote-config","fire-rc"),(0,h.Z)(Xe,"@firebase/remote-config-compat","fire-rc-compat"),(0,h.Z)(Xe,"@firebase/storage","fire-gcs"),(0,h.Z)(Xe,"@firebase/storage-compat","fire-gcs-compat"),(0,h.Z)(Xe,"@firebase/firestore","fire-fst"),(0,h.Z)(Xe,"@firebase/firestore-compat","fire-fst-compat"),(0,h.Z)(Xe,"fire-js","fire-js"),(0,h.Z)(Xe,"firebase","fire-js-all"),Xe),lt=new Map,ft=new Map;function ht(e,t){try{e.container.addComponent(t)}catch(n){st.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function dt(e,t){e.container.addOrOverwriteComponent(t)}function pt(e){var t=e.name;if(ft.has(t))return st.debug("There were multiple attempts to register component ".concat(t,".")),!1;ft.set(t,e);var n,r=p(lt.values());try{for(r.s();!(n=r.n()).done;){ht(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function vt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut;vt(e,t).clearInstance(n)}function mt(){ft.clear()}var yt=(Je={},(0,h.Z)(Je,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,h.Z)(Je,"bad-app-name","Illegal App name: '{$appName}"),(0,h.Z)(Je,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,h.Z)(Je,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,h.Z)(Je,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,h.Z)(Je,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,h.Z)(Je,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,h.Z)(Je,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,h.Z)(Je,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,h.Z)(Je,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Je),kt=new Q("app","Firebase",yt),bt=function(){function e(t,n,r){var i=this;c(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ie("app",(function(){return i}),"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}}]),e}(),wt="9.8.1";function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ut,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw kt.create("bad-app-name",{appName:String(i)});var a=lt.get(i);if(a){if(oe(e,a.options)&&oe(r,a.config))return a;throw kt.create("duplicate-app",{appName:i})}var o,s=new Ne(i),u=p(ft.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new bt(e,r,s);return lt.set(i,l),l}function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=lt.get(e);if(!t)throw kt.create("no-app",{appName:e});return t}function It(){return Array.from(lt.values())}function Tt(e){return St.apply(this,arguments)}function St(){return St=a(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!lt.has(n)){e.next=6;break}return lt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Et(e,t,n){var r,i=null!==(r=ct[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void st.warn(s.join(" "))}pt(new Ie("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ct(e,t){if(null!==e&&"function"!==typeof e)throw kt.create("invalid-log-argument");!function(e,t){var n,r=p(Ae);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Pe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ce[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Nt(e){var t;t=e,Ae.forEach((function(e){e.setLogLevel(t)}))}var At="firebase-heartbeat-store",Pt=null;function Rt(){return Pt||(Pt=Ye("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(At)}}).catch((function(e){throw kt.create("storage-open",{originalErrorMessage:e.message})}))),Pt}function Dt(e){return Ot.apply(this,arguments)}function Ot(){return Ot=a(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rt();case 3:return n=e.sent,e.abrupt("return",n.transaction(At).objectStore(At).get(Ft(t)));case 7:throw e.prev=7,e.t0=e.catch(0),kt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ot.apply(this,arguments)}function Mt(e,t){return Lt.apply(this,arguments)}function Lt(){return Lt=a(s.mark((function e(t,n){var r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rt();case 3:return r=e.sent,i=r.transaction(At,"readwrite"),a=i.objectStore(At),e.next=8,a.put(n,Ft(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),kt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Lt.apply(this,arguments)}function Ft(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ut=function(){function e(t){var n=this;c(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new zt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return f(e,[{key:"triggerHeartbeat",value:function(){var e=a(s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=jt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=a(s.mark((function e(){var t,n,r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=jt(),n=Vt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=D(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jt(){return(new Date).toISOString().substring(0,10)}function Vt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var qt,Bt,zt=function(){function e(t){c(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return f(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=a(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",H().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=a(s.mark((function e(){var t;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Dt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,xe.Z)(r.heartbeats),(0,xe.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Wt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}qt="",pt(new Ie("platform-logger",(function(e){return new it(e)}),"PRIVATE")),pt(new Ie("heartbeat",(function(e){return new Ut(e)}),"PRIVATE")),Et(at,ot,qt),Et(at,ot,"esm2017"),Et("fire-js","");var Kt=function(){function e(t,n){var r=this;c(this,e),this._delegate=t,this.firebase=n,ht(t,new Ie("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Tt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ht(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){dt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ht=(Bt={},(0,h.Z)(Bt,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,h.Z)(Bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Bt),Gt=new Q("app-compat","Firebase",Ht);var Zt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=_t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ne(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Et,setLogLevel:Nt,onLog:Ct,apps:null,SDK_VERSION:wt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(pt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Gt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&M(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ne(n,e=e||ut))throw Gt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Kt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){M(n,e)},createSubscribe:he,ErrorFactory:Q,deepExtend:M}),n}(),Qt=new Me("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Qt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Yt=self.firebase.SDK_VERSION;Yt&&Yt.indexOf("LITE")>=0&&Qt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var $t,Xt=Zt;!function(e){Et("@firebase/app-compat","0.1.25",e)}();var Jt="@firebase/installations",en="0.5.9",tn=1e4,nn="w:".concat(en),rn="FIS_v2",an=36e5,on=($t={},(0,h.Z)($t,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,h.Z)($t,"not-registered","Firebase Installation is not registered."),(0,h.Z)($t,"installation-not-found","Firebase Installation not found."),(0,h.Z)($t,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,h.Z)($t,"app-offline","Could not process request. Application offline."),(0,h.Z)($t,"delete-pending-registration","Can't delete installation while there is a pending registration request."),$t),sn=new Q("installations","Installations",on);function un(e){return e instanceof Z&&e.code.includes("request-failed")}function cn(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function ln(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function fn(e,t){return hn.apply(this,arguments)}function hn(){return(hn=a(s.mark((function e(t,n){var r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",sn.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function pn(e,t){var n=t.refreshToken,r=dn(e);return r.append("Authorization",function(e){return"".concat(rn," ").concat(e)}(n)),r}function vn(e){return gn.apply(this,arguments)}function gn(){return gn=a(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),gn.apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=a(s.mark((function e(t,n){var r,i,a,o,u,c,l,f,h,d,p,v;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=cn(r),u=dn(r),!(c=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,c.getHeartbeatsHeader();case 8:(l=e.sent)&&u.append("x-firebase-client",l);case 10:return f={fid:a,authVersion:rn,appId:r.appId,sdkVersion:nn},h={method:"POST",headers:u,body:JSON.stringify(f)},e.next=14,vn((function(){return fetch(o,h)}));case 14:if(!(d=e.sent).ok){e.next=23;break}return e.next=18,d.json();case 18:return p=e.sent,v={fid:p.fid||a,registrationStatus:2,refreshToken:p.refreshToken,authToken:ln(p.authToken)},e.abrupt("return",v);case 23:return e.next=25,fn("Create Installation",d);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(e){return new Promise((function(t){setTimeout(t,e)}))}var bn=/^[cdef][\w-]{21}$/;function wn(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,(0,xe.Z)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return bn.test(t)?t:""}catch(mD){return""}}function _n(e){return"".concat(e.appName,"!").concat(e.appId)}var xn=new Map;function In(e,t){var n=_n(e);Tn(n,t),function(e,t){var n=En();n&&n.postMessage({key:e,fid:t});Cn()}(n,t)}function Tn(e,t){var n=xn.get(e);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var Sn=null;function En(){return!Sn&&"BroadcastChannel"in self&&((Sn=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Tn(e.data.key,e.data.fid)}),Sn}function Cn(){0===xn.size&&Sn&&(Sn.close(),Sn=null)}var Nn="firebase-installations-store",An=null;function Pn(){return An||(An=Ye("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Nn)}})),An}function Rn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=a(s.mark((function e(t,n){var r,i,a,o,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_n(t),e.next=3,Pn();case 3:return i=e.sent,a=i.transaction(Nn,"readwrite"),o=a.objectStore(Nn),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return u&&u.fid===n.fid||In(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function On(e){return Mn.apply(this,arguments)}function Mn(){return Mn=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_n(t),e.next=3,Pn();case 3:return r=e.sent,i=r.transaction(Nn,"readwrite"),e.next=7,i.objectStore(Nn).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function Ln(e,t){return Fn.apply(this,arguments)}function Fn(){return Fn=a(s.mark((function e(t,n){var r,i,a,o,u,c;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_n(t),e.next=3,Pn();case 3:return i=e.sent,a=i.transaction(Nn,"readwrite"),o=a.objectStore(Nn),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(c=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(c,r);case 17:return e.next=19,a.done;case 19:return!c||u&&u.fid===c.fid||In(t,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}function Un(e){return jn.apply(this,arguments)}function jn(){return(jn=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(t.appConfig,(function(e){var r=Vn(e),i=qn(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vn(e){return Hn(e||{fid:wn(),registrationStatus:0})}function qn(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(sn.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Bn.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:zn(e)}:{installationEntry:t}}function Bn(){return(Bn=a(s.mark((function e(t,n){var r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mn(t,n);case 3:return r=e.sent,e.abrupt("return",Rn(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!un(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,On(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Rn(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function zn(e){return Wn.apply(this,arguments)}function Wn(){return(Wn=a(s.mark((function e(t){var n,r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,kn(100);case 6:return e.next=8,Kn(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,Un(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e){return Ln(e,(function(e){if(!e)throw sn.create("installation-not-found");return Hn(e)}))}function Hn(e){return 1===(t=e).registrationStatus&&t.registrationTime+tn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Gn(e,t){return Zn.apply(this,arguments)}function Zn(){return(Zn=a(s.mark((function e(t,n){var r,i,a,o,u,c,l,f,h,d,p;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=Qn(r,n),o=pn(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&o.append("x-firebase-client",c);case 9:return l={installation:{sdkVersion:nn,appId:r.appId}},f={method:"POST",headers:o,body:JSON.stringify(l)},e.next=13,vn((function(){return fetch(a,f)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return d=e.sent,p=ln(d),e.abrupt("return",p);case 22:return e.next=24,fn("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t){var n=t.fid;return"".concat(cn(e),"/").concat(n,"/authTokens:generate")}function Yn(e){return $n.apply(this,arguments)}function $n(){return $n=a(s.mark((function e(t){var n,r,i,a,o=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,Ln(t.appConfig,(function(e){if(!rr(e))throw sn.create("not-registered");var i=e.authToken;if(!n&&ir(i))return e;if(1===i.requestStatus)return r=Xn(t,n),e;if(!navigator.onLine)throw sn.create("app-offline");var a=ar(e);return r=tr(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function Xn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=a(s.mark((function e(t,n){var r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,kn(100);case 6:return e.next=8,er(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Yn(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e){return Ln(e,(function(e){if(!rr(e))throw sn.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+tn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function tr(e,t){return nr.apply(this,arguments)}function nr(){return(nr=a(s.mark((function e(t,n){var r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gn(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Rn(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!un(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,On(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,Rn(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function rr(e){return void 0!==e&&2===e.registrationStatus}function ir(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+an}(e)}function ar(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function or(){return(or=a(s.mark((function e(t){var n,r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,Un(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Yn(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(){return sr=a(s.mark((function e(t){var n,r,i,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,ur(r);case 4:return e.next=6,Yn(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function ur(e){return cr.apply(this,arguments)}function cr(){return(cr=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e){return sn.create("missing-app-config-values",{valueName:e})}var fr,hr="installations",dr=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw lr("App Configuration");if(!e.name)throw lr("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw lr(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:vt(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},pr=function(e){var t=vt(e.getProvider("app").getImmediate(),hr).getImmediate(),n={getId:function(){return function(e){return or.apply(this,arguments)}(t)},getToken:function(e){return function(e){return sr.apply(this,arguments)}(t,e)}};return n};pt(new Ie(hr,dr,"PUBLIC")),pt(new Ie("installations-internal",pr,"PRIVATE")),Et(Jt,en),Et(Jt,en,"esm2017");var vr="analytics",gr=6e4,mr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yr="https://www.googletagmanager.com/gtag/js",kr=new Me("@firebase/analytics");function br(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function wr(e,t){var n=document.createElement("script");n.src="".concat(yr,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function _r(e,t,n,r,i,a){return xr.apply(this,arguments)}function xr(){return xr=a(s.mark((function e(t,n,r,i,a,o){var u,c,l;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,br(r);case 9:if(c=e.sent,!(l=c.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),kr.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),xr.apply(this,arguments)}function Ir(e,t,n,r,i){return Tr.apply(this,arguments)}function Tr(){return Tr=a(s.mark((function e(t,n,r,i,a){var o,u,c,l,f,h;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,br(r);case 7:c=e.sent,l=p(u),e.prev=9,h=function(){var e=f.value,t=c.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},l.s();case 12:if((f=l.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),kr.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),Tr.apply(this,arguments)}function Sr(e,t,n,r,i){var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){function i(){return(i=a(s.mark((function i(a,o,u){return s.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Ir(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,_r(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),kr.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function Er(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(yr))return r}return null}var Cr=(fr={},(0,h.Z)(fr,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),(0,h.Z)(fr,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),(0,h.Z)(fr,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),(0,h.Z)(fr,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),(0,h.Z)(fr,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,h.Z)(fr,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,h.Z)(fr,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),(0,h.Z)(fr,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),(0,h.Z)(fr,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),(0,h.Z)(fr,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),fr),Nr=new Q("analytics","Analytics",Cr),Ar=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;c(this,e),this.throttleMetadata=t,this.intervalMillis=n}return f(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),Pr=new Ar;function Rr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Dr(e){return Or.apply(this,arguments)}function Or(){return Or=a(s.mark((function e(t){var n,r,i,a,o,u,c,l;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:Rr(i)},o=mr.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return c="",e.prev=8,e.next=11,u.json();case 11:l=e.sent,(null===(n=l.error)||void 0===n?void 0:n.message)&&(c=l.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Nr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),Or.apply(this,arguments)}function Mr(e){return Lr.apply(this,arguments)}function Lr(){return Lr=a(s.mark((function e(t){var n,r,i,o,u,c,l,f,h=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:Pr,r=h.length>2?h[2]:void 0,i=t.options,o=i.appId,u=i.apiKey,c=i.measurementId,o){e.next=5;break}throw Nr.create("no-app-id");case 5:if(u){e.next=9;break}if(!c){e.next=8;break}return e.abrupt("return",{measurementId:c,appId:o});case 8:throw Nr.create("no-api-key");case 9:return l=n.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new qr,setTimeout(a(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:gr),e.abrupt("return",Fr({appId:o,apiKey:u,measurementId:c},l,f,n));case 13:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Fr(e,t,n){return Ur.apply(this,arguments)}function Ur(){return Ur=a(s.mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:Pr,u=t.appId,c=t.measurementId,e.prev=3,e.next=6,jr(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return kr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:u,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,Dr(t);case 17:return l=e.sent,o.deleteThrottleMetadata(u),e.abrupt("return",l);case 22:if(e.prev=22,e.t1=e.catch(14),Vr(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(u),!c){e.next=31;break}return kr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:u,measurementId:c});case 31:throw e.t1;case 32:return f=503===Number(e.t1.customData.httpStatus)?we(a,o.intervalMillis,30):we(a,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},o.setThrottleMetadata(u,h),kr.debug("Calling attemptFetch again in ".concat(f," millis")),e.abrupt("return",Fr(t,h,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),Ur.apply(this,arguments)}function jr(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Nr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Vr(e){if(!(e instanceof Z)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var qr=function(){function e(){c(this,e),this.listeners=[]}return f(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function Br(){return zr.apply(this,arguments)}function zr(){return(zr=a(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K()){e.next=5;break}return kr.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,H();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),kr.warn(Nr.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function Wr(){return Wr=a(s.mark((function e(t,n,r,i,a,u,c){var l,f,h,d,p,v,g,m;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(f=Mr(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&kr.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return kr.error(e)})),n.push(f),h=Br().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([f,h]);case 6:return d=e.sent,p=(0,o.Z)(d,2),v=p[0],g=p[1],Er()||wr(u,v.measurementId),a("js",new Date),(m=null!==(l=null===c||void 0===c?void 0:c.config)&&void 0!==l?l:{}).origin="firebase",m.update=!0,null!=g&&(m.firebase_id=g),a("config",v.measurementId,m),e.abrupt("return",v.measurementId);case 18:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}var Kr,Hr,Gr=function(){function e(t){c(this,e),this.app=t}return f(e,[{key:"_delete",value:function(){return delete Zr[this.app.options.appId],Promise.resolve()}}]),e}(),Zr={},Qr=[],Yr={},$r="dataLayer",Xr="gtag",Jr=!1;function ei(e){if(Jr)throw Nr.create("already-initialized");e.dataLayerName&&($r=e.dataLayerName),e.gtagName&&(Xr=e.gtagName)}function ti(e,t,n){!function(){var e=[];if(q()&&e.push("This is a browser extension environment."),G()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Nr.create("invalid-analytics-context",{errorInfo:t});kr.warn(n.message)}}();var r=e.options.appId;if(!r)throw Nr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Nr.create("no-api-key");kr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Zr[r])throw Nr.create("already-exists",{id:r});if(!Jr){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}($r);var i=Sr(Zr,Qr,Yr,$r,Xr),a=i.wrappedGtag,o=i.gtagCore;Hr=a,Kr=o,Jr=!0}return Zr[r]=function(e,t,n,r,i,a,o){return Wr.apply(this,arguments)}(e,Qr,Yr,t,Kr,$r,n),new Gr(e)}function ni(){return ni=a(s.mark((function e(t,n,r,i,a){var o,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(){return ri=a(s.mark((function e(t,n,r,i){var a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{screen_name:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,screen_name:r});case 9:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(){return ii=a(s.mark((function e(t,n,r,i){var a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{user_id:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,user_id:r});case 9:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ai(){return ai=a(s.mark((function e(t,n,r,i){var a,o,u,c,l;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=7;break}for(a={},o=0,u=Object.keys(r);o<u.length;o++)c=u[o],a["user_properties.".concat(c)]=r[c];return t("set",a),e.abrupt("return",Promise.resolve());case 7:return e.next=9,n;case 9:l=e.sent,t("config",l,{update:!0,user_properties:r});case 11:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(){return oi=a(s.mark((function e(t,n){var r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,window["ga-disable-".concat(r)]=!n;case 4:case"end":return e.stop()}}),e)}))),oi.apply(this,arguments)}function si(){return ui.apply(this,arguments)}function ui(){return(ui=a(s.mark((function e(){var t;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q()){e.next=2;break}return e.abrupt("return",!1);case 2:if(G()){e.next=4;break}return e.abrupt("return",!1);case 4:if(K()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,H();case 9:return t=e.sent,e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function ci(e,t,n){e=_e(e),function(e,t,n,r){return ri.apply(this,arguments)}(Hr,Zr[e.app.options.appId],t,n).catch((function(e){return kr.error(e)}))}function li(e,t,n){e=_e(e),function(e,t,n,r){return ii.apply(this,arguments)}(Hr,Zr[e.app.options.appId],t,n).catch((function(e){return kr.error(e)}))}function fi(e,t,n){e=_e(e),function(e,t,n,r){return ai.apply(this,arguments)}(Hr,Zr[e.app.options.appId],t,n).catch((function(e){return kr.error(e)}))}function hi(e,t){e=_e(e),function(e,t){return oi.apply(this,arguments)}(Zr[e.app.options.appId],t).catch((function(e){return kr.error(e)}))}function di(e,t,n,r){e=_e(e),function(e,t,n,r,i){return ni.apply(this,arguments)}(Hr,Zr[e.app.options.appId],t,n,r).catch((function(e){return kr.error(e)}))}var pi="@firebase/analytics",vi="0.7.9";pt(new Ie(vr,(function(e,t){var n=t.options;return ti(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),pt(new Ie("analytics-internal",(function(e){try{var t=e.getProvider(vr).getImmediate();return{logEvent:function(e,n,r){return di(t,e,n,r)}}}catch(n){throw Nr.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Et(pi,vi),Et(pi,vi,"esm2017");var gi,mi=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n}return f(e,[{key:"logEvent",value:function(e,t,n){di(this._delegate,e,t,n)}},{key:"setCurrentScreen",value:function(e,t){ci(this._delegate,e,t)}},{key:"setUserId",value:function(e,t){li(this._delegate,e,t)}},{key:"setUserProperties",value:function(e,t){fi(this._delegate,e,t)}},{key:"setAnalyticsCollectionEnabled",value:function(e){hi(this._delegate,e)}}]),e}();!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(gi||(gi={}));var yi=function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new mi(t,n)};!function(){var e={Analytics:mi,settings:ei,isSupported:si,EventName:gi};Xt.INTERNAL.registerComponent(new Ie("analytics-compat",yi,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),Xt.registerVersion("@firebase/analytics-compat","0.1.10");var ki;Xt.registerVersion("firebase","9.8.1","app-compat");var bi=new Map,wi={activated:!1,tokenObservers:[]},_i={initialized:!1,enabled:!1};function xi(e){return bi.get(e)||wi}function Ii(e,t){bi.set(e,t)}function Ti(){return _i}var Si="https://content-firebaseappcheck.googleapis.com/v1",Ei=3e4,Ci=96e4,Ni=function(){function e(t,n,r,i,a){if(c(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return f(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(){var e=a(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.prev=1,this.pending=new L,e.next=5,Ai(this.getNextRun(t));case 5:return this.pending.resolve(),e.next=8,this.pending.promise;case 8:return this.pending=new L,e.next=11,this.operation();case 11:return this.pending.resolve(),e.next=14,this.pending.promise;case 14:this.process(!0).catch((function(){})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),this.retryPolicy(e.t0)?this.process(!1).catch((function(){})):this.stop();case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}();function Ai(e){return new Promise((function(t){setTimeout(t,e)}))}var Pi=(ki={},(0,h.Z)(ki,"already-initialized","You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance."),(0,h.Z)(ki,"use-before-activation","App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services."),(0,h.Z)(ki,"fetch-network-error","Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,h.Z)(ki,"fetch-parse-error","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,h.Z)(ki,"fetch-status-error","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,h.Z)(ki,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ki,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ki,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ki,"recaptcha-error","ReCAPTCHA error."),(0,h.Z)(ki,"throttled","Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"),ki),Ri=new Q("appCheck","AppCheck",Pi);function Di(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function Oi(e){if(!xi(e).activated)throw Ri.create("use-before-activation",{appName:e.name})}function Mi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Li(e){var t=Math.round(e/1e3),n=Math.floor(t/86400),r=Math.floor((t-3600*n*24)/3600),i=Math.floor((t-3600*n*24-3600*r)/60),a=t-3600*n*24-3600*r-60*i,o="";return n&&(o+=Fi(n)+"d:"),r&&(o+=Fi(r)+"h:"),o+=Fi(i)+"m:"+Fi(a)+"s"}function Fi(e){return 0===e?"00":e>=10?e.toString():"0"+e}function Ui(e,t){return ji.apply(this,arguments)}function ji(){return(ji=a(s.mark((function e(t,n){var r,i,a,o,u,c,l,f,h,d,p;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,i=t.body,a={"Content-Type":"application/json"},!(o=n.getImmediate({optional:!0}))){e.next=8;break}return e.next=6,o.getHeartbeatsHeader();case 6:(u=e.sent)&&(a["X-Firebase-Client"]=u);case 8:return c={method:"POST",body:JSON.stringify(i),headers:a},e.prev=9,e.next=12,fetch(r,c);case 12:l=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(9),Ri.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 18:if(200===l.status){e.next=20;break}throw Ri.create("fetch-status-error",{httpStatus:l.status});case 20:return e.prev=20,e.next=23,l.json();case 23:f=e.sent,e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(20),Ri.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 29:if((h=f.ttl.match(/^([\d.]+)(s)$/))&&h[2]&&!isNaN(Number(h[1]))){e.next=32;break}throw Ri.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+"format: ".concat(f.ttl)});case 32:return d=1e3*Number(h[1]),p=Date.now(),e.abrupt("return",{token:f.token,expireTimeMillis:p+d,issuedAtTimeMillis:p});case 35:case"end":return e.stop()}}),e,null,[[9,15],[20,26]])})))).apply(this,arguments)}function Vi(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"".concat(Si,"/projects/").concat(r,"/apps/").concat(i,":").concat("exchangeRecaptchaV3Token","?key=").concat(a),body:{recaptcha_v3_token:t}}}function qi(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"".concat(Si,"/projects/").concat(r,"/apps/").concat(i,":").concat("exchangeRecaptchaEnterpriseToken","?key=").concat(a),body:{recaptcha_enterprise_token:t}}}function Bi(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"".concat(Si,"/projects/").concat(r,"/apps/").concat(i,":").concat("exchangeDebugToken","?key=").concat(a),body:{debug_token:t}}}var zi="firebase-app-check-store",Wi="debug-token",Ki=null;function Hi(){return Ki||(Ki=new Promise((function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(Ri.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;if(0===e.oldVersion)t.createObjectStore(zi,{keyPath:"compositeKey"})}}catch(r){t(Ri.create("storage-open",{originalErrorMessage:r.message}))}})),Ki)}function Gi(e){return Xi(ea(e))}function Zi(e){return Yi(Wi,e)}function Qi(){return Xi(Wi)}function Yi(e,t){return $i.apply(this,arguments)}function $i(){return $i=a(s.mark((function e(t,n){var r,i,a,o;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hi();case 2:return r=e.sent,i=r.transaction(zi,"readwrite"),a=i.objectStore(zi),o=a.put({compositeKey:t,value:n}),e.abrupt("return",new Promise((function(e,t){o.onsuccess=function(t){e()},i.onerror=function(e){var n;t(Ri.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})));case 7:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Xi(e){return Ji.apply(this,arguments)}function Ji(){return Ji=a(s.mark((function e(t){var n,r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hi();case 2:return n=e.sent,r=n.transaction(zi,"readonly"),i=r.objectStore(zi),a=i.get(t),e.abrupt("return",new Promise((function(e,t){a.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},r.onerror=function(e){var n;t(Ri.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})));case 7:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function ea(e){return"".concat(e.options.appId,"-").concat(e.name)}var ta=new Me("@firebase/app-check");function na(){return(na=a(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K()){e.next=12;break}return n=void 0,e.prev=2,e.next=5,Gi(t);case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),ta.warn("Failed to read token from IndexedDB. Error: ".concat(e.t0));case 11:return e.abrupt("return",n);case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function ra(e,t){return K()?function(e,t){return Yi(ea(e),t)}(e,t).catch((function(e){ta.warn("Failed to write token to IndexedDB. Error: ".concat(e))})):Promise.resolve()}function ia(){return(ia=a(s.mark((function e(){var t,n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,Qi();case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(t){e.next=15;break}return Zi(n=Mi()).catch((function(e){return ta.warn("Failed to persist debug token to IndexedDB. Error: ".concat(e))})),e.abrupt("return",n);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function aa(){return Ti().enabled}function oa(){return sa.apply(this,arguments)}function sa(){return(sa=a(s.mark((function e(){var t;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Ti()).enabled||!t.token){e.next=5;break}return e.abrupt("return",t.token.promise);case 5:throw Error("\n            Can't get debug token in production mode.\n        ");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(){var e=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}(),t=Ti();if(t.initialized=!0,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){t.enabled=!0;var r=new L;t.token=r,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(function(){return ia.apply(this,arguments)}())}}var ca={error:"UNKNOWN_ERROR"};function la(e){return fa.apply(this,arguments)}function fa(){return fa=a(s.mark((function e(t){var n,r,i,a,o,u,c,l,f,h=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]&&h[1],Oi(r=t.app),i=xi(r),a=i.token,o=void 0,a){e.next=11;break}return e.next=9,i.cachedTokenPromise;case 9:(u=e.sent)&&ga(u)&&(a=u);case 11:if(n||!a||!ga(a)){e.next=13;break}return e.abrupt("return",{token:a.token});case 13:if(c=!1,!aa()){e.next=33;break}if(i.exchangeTokenPromise){e.next=26;break}return e.t0=Ui,e.t1=Bi,e.t2=r,e.next=21,oa();case 21:e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5=t.heartbeatServiceProvider,i.exchangeTokenPromise=(0,e.t0)(e.t4,e.t5).then((function(e){return i.exchangeTokenPromise=void 0,e})),c=!0;case 26:return e.next=28,i.exchangeTokenPromise;case 28:return l=e.sent,e.next=31,ra(r,l);case 31:return Ii(r,Object.assign(Object.assign({},i),{token:l})),e.abrupt("return",{token:l.token});case 33:return e.prev=33,i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then((function(e){return i.exchangeTokenPromise=void 0,e})),c=!0),e.next=37,i.exchangeTokenPromise;case 37:a=e.sent,e.next=44;break;case 40:e.prev=40,e.t6=e.catch(33),e.t6.code==="appCheck/".concat("throttled")?ta.warn(e.t6.message):ta.error(e.t6),o=e.t6;case 44:if(a){e.next=48;break}f=ma(o),e.next=52;break;case 48:return f={token:a.token},Ii(r,Object.assign(Object.assign({},i),{token:a})),e.next=52,ra(r,a);case 52:return c&&va(r,f),e.abrupt("return",f);case 54:case"end":return e.stop()}}),e,null,[[33,40]])}))),fa.apply(this,arguments)}function ha(e,t,n,r){var i=e.app,a=xi(i),o={next:n,error:r,type:t};if(Ii(i,Object.assign(Object.assign({},a),{tokenObservers:[].concat((0,xe.Z)(a.tokenObservers),[o])})),a.token&&ga(a.token)){var s=a.token;Promise.resolve().then((function(){n({token:s.token}),pa(e)})).catch((function(){}))}a.cachedTokenPromise.then((function(){return pa(e)}))}function da(e,t){var n=xi(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Ii(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function pa(e){var t=e.app,n=xi(t),r=n.tokenRefresher;r||(r=function(e){var t=e.app;return new Ni(a(s.mark((function n(){var r;return s.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(xi(t).token){n.next=7;break}return n.next=4,la(e);case 4:r=n.sent,n.next=10;break;case 7:return n.next=9,la(e,!0);case 9:r=n.sent;case 10:if(!r.error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}}),n)}))),(function(){return!0}),(function(){var e=xi(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),Ei,Ci)}(e),Ii(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function va(e,t){var n,r=p(xi(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(o){r.e(o)}finally{r.f()}}function ga(e){return e.expireTimeMillis-Date.now()>0}function ma(e){return{token:(t=ca,P.encodeString(JSON.stringify(t),!1)),error:e};var t}var ya=function(){function e(t,n){c(this,e),this.app=t,this.heartbeatServiceProvider=n}return f(e,[{key:"_delete",value:function(){var e,t=p(xi(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;da(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}();var ka="https://www.google.com/recaptcha/api.js",ba="https://www.google.com/recaptcha/enterprise.js";function wa(e,t){var n=xi(e),r=new L;Ii(e,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));var i=Ia(e),a=Di(!1);return a?xa(e,t,a,i,r):function(e){var t=document.createElement("script");t.src=ka,t.onload=e,document.head.appendChild(t)}((function(){var n=Di(!1);if(!n)throw new Error("no recaptcha");xa(e,t,n,i,r)})),r.promise}function _a(e,t){var n=xi(e),r=new L;Ii(e,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));var i=Ia(e),a=Di(!0);return a?xa(e,t,a,i,r):function(e){var t=document.createElement("script");t.src=ba,t.onload=e,document.head.appendChild(t)}((function(){var n=Di(!0);if(!n)throw new Error("no recaptcha");xa(e,t,n,i,r)})),r.promise}function xa(e,t,n,r,i){n.ready((function(){!function(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=xi(e);Ii(e,Object.assign(Object.assign({},a),{reCAPTCHAState:Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:i})}))}(e,t,n,r),i.resolve(n)}))}function Ia(e){var t="fire_app_check_".concat(e.name),n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}function Ta(e){return Sa.apply(this,arguments)}function Sa(){return(Sa=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oi(t),n=xi(t).reCAPTCHAState,e.next=4,n.initialized.promise;case 4:return r=e.sent,e.abrupt("return",new Promise((function(e,n){var i=xi(t).reCAPTCHAState;r.ready((function(){e(r.execute(i.widgetId,{action:"fire_app_check"}))}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ea=function(){function e(t){c(this,e),this._siteKey=t,this._throttleData=null}return f(e,[{key:"getToken",value:function(){var e=a(s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa(this._throttleData),e.next=3,Ta(this._app).catch((function(e){throw Ri.create("recaptcha-error")}));case 3:return n=e.sent,e.prev=4,e.next=7,Ui(Vi(this._app,n),this._heartbeatServiceProvider);case 7:r=e.sent,e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(4),"fetch-status-error"!==e.t0.code){e.next=17;break}throw this._throttleData=Aa(Number(null===(t=e.t0.customData)||void 0===t?void 0:t.httpStatus),this._throttleData),Ri.create("throttled",{time:Li(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus});case 17:throw e.t0;case 18:return this._throttleData=null,e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"initialize",value:function(e){this._app=e,this._heartbeatServiceProvider=vt(e,"heartbeat"),wa(e,this._siteKey).catch((function(){}))}},{key:"isEqual",value:function(t){return t instanceof e&&this._siteKey===t._siteKey}}]),e}(),Ca=function(){function e(t){c(this,e),this._siteKey=t,this._throttleData=null}return f(e,[{key:"getToken",value:function(){var e=a(s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa(this._throttleData),e.next=3,Ta(this._app).catch((function(e){throw Ri.create("recaptcha-error")}));case 3:return n=e.sent,e.prev=4,e.next=7,Ui(qi(this._app,n),this._heartbeatServiceProvider);case 7:r=e.sent,e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(4),"fetch-status-error"!==e.t0.code){e.next=17;break}throw this._throttleData=Aa(Number(null===(t=e.t0.customData)||void 0===t?void 0:t.httpStatus),this._throttleData),Ri.create("throttled",{time:Li(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus});case 17:throw e.t0;case 18:return this._throttleData=null,e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"initialize",value:function(e){this._app=e,this._heartbeatServiceProvider=vt(e,"heartbeat"),_a(e,this._siteKey).catch((function(){}))}},{key:"isEqual",value:function(t){return t instanceof e&&this._siteKey===t._siteKey}}]),e}(),Na=function(){function e(t){c(this,e),this._customProviderOptions=t}return f(e,[{key:"getToken",value:function(){var e=a(s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._customProviderOptions.getToken();case 2:return t=e.sent,n=te(t.token),r=null!==n&&n<Date.now()&&n>0?1e3*n:Date.now(),e.abrupt("return",Object.assign(Object.assign({},t),{issuedAtTimeMillis:r}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initialize",value:function(e){this._app=e}},{key:"isEqual",value:function(t){return t instanceof e&&this._customProviderOptions.getToken.toString()===t._customProviderOptions.getToken.toString()}}]),e}();function Aa(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};var n=t?t.backoffCount:0,r=we(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}function Pa(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ri.create("throttled",{time:Li(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function Ra(e,t,n){var r=xi(e),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=t,i.cachedTokenPromise=function(e){return na.apply(this,arguments)}(e).then((function(t){return t&&ga(t)&&(Ii(e,Object.assign(Object.assign({},xi(e)),{token:t})),va(e,{token:t.token})),t})),i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,Ii(e,i),i.provider.initialize(e)}function Da(){return(Da=a(s.mark((function e(t,n){var r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(t,n);case 2:if(!(r=e.sent).error){e.next=5;break}throw r.error;case 5:return e.abrupt("return",{token:r.token});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oa="app-check-internal";pt(new Ie("app-check",(function(e){return function(e,t){return new ya(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider(Oa).initialize()}))),pt(new Ie(Oa,(function(e){return function(e){return{getToken:function(t){return la(e,t)},addTokenListener:function(t){return ha(e,"INTERNAL",t)},removeTokenListener:function(t){return da(e.app,t)}}}(e.getProvider("app-check").getImmediate())}),"PUBLIC").setInstantiationMode("EXPLICIT")),Et("@firebase/app-check","0.5.8");var Ma=(0,h.Z)({},"use-before-activation","App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."),La=new Q("appCheck","AppCheck",Ma),Fa=function(){function e(t){c(this,e),this.app=t}return f(e,[{key:"activate",value:function(e,t){var n;n="string"===typeof e?new Ea(e):e instanceof Ca||e instanceof Ea||e instanceof Na?e:new Na({getToken:e.getToken}),this._delegate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt(),t=arguments.length>1?arguments[1]:void 0,n=vt(e=_e(e),"app-check");if(Ti().initialized||ua(),aa()&&oa().then((function(e){return console.log("App Check debug token: ".concat(e,". You will need to add it to your app's App Check settings in the Firebase console for it to work."))})),n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw Ri.create("already-initialized",{appName:e.name})}var a=n.initialize({options:t});return Ra(e,t.provider,t.isTokenAutoRefreshEnabled),xi(e).isTokenAutoRefreshEnabled&&ha(a,"INTERNAL",(function(){})),a}(this.app,{provider:n,isTokenAutoRefreshEnabled:t})}},{key:"setTokenAutoRefreshEnabled",value:function(e){if(!this._delegate)throw La.create("use-before-activation",{appName:this.app.name});!function(e,t){var n=e.app,r=xi(n);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),Ii(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:t}))}(this._delegate,e)}},{key:"getToken",value:function(e){if(!this._delegate)throw La.create("use-before-activation",{appName:this.app.name});return function(e,t){return Da.apply(this,arguments)}(this._delegate,e)}},{key:"onTokenChanged",value:function(e,t,n){if(!this._delegate)throw La.create("use-before-activation",{appName:this.app.name});return function(e,t,n,r){var i=function(){},a=function(){};return i=null!=t.next?t.next.bind(t):t,null!=t.error?a=t.error.bind(t):n&&(a=n),ha(e,"EXTERNAL",i,a),function(){return da(e.app,i)}}(this._delegate,e,t)}}]),e}(),Ua=function(e){var t=e.getProvider("app-compat").getImmediate();return new Fa(t)};Xt.INTERNAL.registerComponent(new Ie("appCheck-compat",Ua,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:Ca,ReCaptchaV3Provider:Ea,CustomProvider:Na})),Xt.registerVersion("@firebase/app-check-compat","0.2.8");var ja=n(878),Va=n(199),qa=n(267);function Ba(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function za(){return za="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ba(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},za.apply(this,arguments)}function Wa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ka;Object.create;var Ha="facebook.com",Ga="github.com",Za="google.com",Qa="password",Ya="twitter.com",$a="EMAIL_SIGNIN",Xa="PASSWORD_RESET",Ja="RECOVER_EMAIL",eo="REVERT_SECOND_FACTOR_ADDITION",to="VERIFY_AND_CHANGE_EMAIL",no="VERIFY_EMAIL";function ro(){return(0,h.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var io=function(){var e;return e={},(0,h.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,h.Z)(e,"argument-error",""),(0,h.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,h.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,h.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,h.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,h.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,h.Z)(e,"cors-unsupported","This browser is not supported."),(0,h.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,h.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,h.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,h.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,h.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,h.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,h.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,h.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,h.Z)(e,"expired-action-code","The action code has expired."),(0,h.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,h.Z)(e,"internal-error","An internal AuthError has occurred."),(0,h.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,h.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,h.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,h.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,h.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,h.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,h.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,h.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,h.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,h.Z)(e,"invalid-email","The email address is badly formatted."),(0,h.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,h.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,h.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,h.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,h.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,h.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,h.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,h.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,h.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,h.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,h.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,h.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,h.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,h.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,h.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,h.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,h.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,h.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,h.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,h.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,h.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,h.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,h.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,h.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,h.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,h.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,h.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,h.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,h.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,h.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,h.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,h.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,h.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,h.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,h.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,h.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,h.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,h.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,h.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,h.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,h.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,h.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,h.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,h.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,h.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,h.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,h.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,h.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,h.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,h.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,h.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,h.Z)(e,"timeout","The operation has timed out."),(0,h.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,h.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,h.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,h.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,h.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,h.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,h.Z)(e,"unverified-email","The operation requires a verified email."),(0,h.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,h.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,h.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,h.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,h.Z)(e,"user-signed-out",""),(0,h.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,h.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,h.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ao=ro,oo=new Q("auth","Firebase",ro()),so=new Me("@firebase/auth");function uo(e){if(so.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];so.error.apply(so,["Auth (".concat(wt,"): ").concat(e)].concat(n))}}function co(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw po.apply(void 0,[e].concat(n))}function lo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return po.apply(void 0,[e].concat(n))}function fo(e,t,n){var r=Object.assign(Object.assign({},ao()),(0,h.Z)({},t,n));return new Q("auth","Firebase",r).create(t,{appName:e.name})}function ho(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&co(e,"argument-error"),fo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function po(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,xe.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,xe.Z)(o)))}return oo.create.apply(oo,[e].concat(n))}function vo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw po.apply(void 0,[t].concat(r))}}function go(e){var t="INTERNAL ASSERTION FAILED: "+e;throw uo(t),new Error(t)}function mo(e,t){e||go(t)}var yo=new Map;function ko(e){mo(e instanceof Function,"Expected a class definition");var t=yo.get(e);return t?(mo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yo.set(e,t),t)}function bo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wo(){return"http:"===_o()||"https:"===_o()}function _o(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var xo=function(){function e(t,n){c(this,e),this.shortDelay=t,this.longDelay=n,mo(n>t,"Short delay should be less than long delay!"),this.isMobile=j()||B()}return f(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wo()||q()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Io(e,t){mo(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var To=function(){function e(){c(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),So=(Ka={},(0,h.Z)(Ka,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,h.Z)(Ka,"MISSING_CUSTOM_TOKEN","internal-error"),(0,h.Z)(Ka,"INVALID_IDENTIFIER","invalid-email"),(0,h.Z)(Ka,"MISSING_CONTINUE_URI","internal-error"),(0,h.Z)(Ka,"INVALID_PASSWORD","wrong-password"),(0,h.Z)(Ka,"MISSING_PASSWORD","internal-error"),(0,h.Z)(Ka,"EMAIL_EXISTS","email-already-in-use"),(0,h.Z)(Ka,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,h.Z)(Ka,"INVALID_IDP_RESPONSE","invalid-credential"),(0,h.Z)(Ka,"INVALID_PENDING_TOKEN","invalid-credential"),(0,h.Z)(Ka,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,h.Z)(Ka,"MISSING_REQ_TYPE","internal-error"),(0,h.Z)(Ka,"EMAIL_NOT_FOUND","user-not-found"),(0,h.Z)(Ka,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,h.Z)(Ka,"EXPIRED_OOB_CODE","expired-action-code"),(0,h.Z)(Ka,"INVALID_OOB_CODE","invalid-action-code"),(0,h.Z)(Ka,"MISSING_OOB_CODE","internal-error"),(0,h.Z)(Ka,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,h.Z)(Ka,"INVALID_ID_TOKEN","invalid-user-token"),(0,h.Z)(Ka,"TOKEN_EXPIRED","user-token-expired"),(0,h.Z)(Ka,"USER_NOT_FOUND","user-token-expired"),(0,h.Z)(Ka,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,h.Z)(Ka,"INVALID_CODE","invalid-verification-code"),(0,h.Z)(Ka,"INVALID_SESSION_INFO","invalid-verification-id"),(0,h.Z)(Ka,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,h.Z)(Ka,"MISSING_SESSION_INFO","missing-verification-id"),(0,h.Z)(Ka,"SESSION_EXPIRED","code-expired"),(0,h.Z)(Ka,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,h.Z)(Ka,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,h.Z)(Ka,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,h.Z)(Ka,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,h.Z)(Ka,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,h.Z)(Ka,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,h.Z)(Ka,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,h.Z)(Ka,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,h.Z)(Ka,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,h.Z)(Ka,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,h.Z)(Ka,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ka),Eo=new xo(3e4,6e4);function Co(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function No(e,t,n,r){return Ao.apply(this,arguments)}function Ao(){return Ao=a(u().mark((function e(t,n,r,i){var o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",Po(t,o,a(u().mark((function e(){var a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ue(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",To.fetch()(Mo(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Po(e,t,n){return Ro.apply(this,arguments)}function Ro(){return(Ro=a(u().mark((function e(t,n,r){var i,a,s,c,l,f,h,d,p,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},So),n),e.prev=2,a=new Lo(t),e.next=6,Promise.race([r(),a.promise]);case 6:return s=e.sent,a.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(c=e.sent))){e.next=13;break}throw Fo(t,"account-exists-with-different-credential",c);case 13:if(!s.ok||"errorMessage"in c){e.next=17;break}return e.abrupt("return",c);case 17:if(l=s.ok?c.errorMessage:c.error.message,f=l.split(" : "),h=(0,o.Z)(f,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Fo(t,"credential-already-in-use",c);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw Fo(t,"email-already-in-use",c);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw fo(t,v,p);case 30:co(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Z)){e.next=37;break}throw e.t0;case 37:co(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Do(e,t,n,r){return Oo.apply(this,arguments)}function Oo(){return Oo=a(u().mark((function e(t,n,r,i){var a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,No(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&co(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Mo(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Io(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Lo=function(){function e(t){var n=this;c(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(lo(n.auth,"network-request-failed"))}),Eo.get())}))}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Fo(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=lo(e,t,r);return i.customData._tokenResponse=n,i}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ko(){return Ko=a(u().mark((function e(t){var n,r,i,a,o,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=_e(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,vo((a=Go(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Wo(Ho(a.auth_time)),issuedAtTime:Wo(Ho(a.iat)),expirationTime:Wo(Ho(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Ho(e){return 1e3*Number(e)}function Go(e){var t=e.split("."),n=(0,o.Z)(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return uo("JWT malformed, contained fewer than 3 sections"),null;try{var s=O(i);return s?JSON.parse(s):(uo("Failed to decode base64 JWT payload"),null)}catch(u){return uo("Caught error parsing JWT payload as JSON",u),null}}function Zo(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=a(u().mark((function e(t,n){var r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Z&&Yo(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Qo.apply(this,arguments)}function Yo(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var $o=function(){function e(t){c(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xo=function(){function e(t,n){c(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Jo(e){return es.apply(this,arguments)}function es(){return es=a(u().mark((function e(t){var n,r,i,a,o,s,c,l,f,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Zo(t,Bo(r,{idToken:i}));case 6:vo(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?rs(o.providerUserInfo):[],c=ns(t.providerData,s),l=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Xo(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return(ts=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e(t),e.next=3,Jo(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,xe.Z)(n),(0,xe.Z)(t))}function rs(e){return e.map((function(e){var t=e.providerId,n=Wa(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function is(e,t){return as.apply(this,arguments)}function as(){return(as=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Po(t,{},a(u().mark((function e(){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ue({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Mo(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",To.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var os=function(){function e(){c(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){vo(e.idToken,"internal-error"),vo("undefined"!==typeof e.idToken,"internal-error"),vo("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Go(e);return vo(t,"internal-error"),vo("undefined"!==typeof t.exp,"internal-error"),vo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],vo(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return go("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(vo("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(vo("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(vo("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ss(e,t){vo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var us=function(){function e(t){c(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Wa(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $o(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?(0,xe.Z)(a.providerData):[],this.metadata=new Xo(a.createdAt||void 0,a.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(vo(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ko.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ts.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(vo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){vo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(u().mark((function e(t){var n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Jo(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Zo(this,Uo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;vo(k&&x,t,"internal-error");var I=os.fromJSON(this.name,x);vo("string"===typeof k,t,"internal-error"),ss(f,t.name),ss(h,t.name),vo("boolean"===typeof b,t,"internal-error"),vo("boolean"===typeof w,t,"internal-error"),ss(d,t.name),ss(p,t.name),ss(v,t.name),ss(g,t.name),ss(m,t.name),ss(y,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((function(e){return Object.assign({},e)}))),g&&(T._redirectEventId=g),T}},{key:"_fromIdTokenResponse",value:function(){var t=a(u().mark((function t(n,r){var i,a,o,s=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new os).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Jo(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),cs=function(){function e(){c(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();cs.type="NONE";var ls=cs;function fs(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var hs=function(){function e(t,n,r){c(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=fs(this.userKey,a.apiKey,o),this.fullPersistenceKey=fs("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?us._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(u().mark((function t(n,r){var i,o,s,c,l,f,h,d,v,g,m,y=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ko(ls),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||ko(ls),c=fs(i,n.config.apiKey,n.name),l=null,f=p(r),t.prev=10,f.s();case 12:if((h=f.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(v=t.sent)){t.next=23;break}return g=us._fromJSON(n,v),d!==s&&(l=g),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(m=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=m[0],!l){t.next=44;break}return t.next=44,s._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ds(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ms(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ps(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ks(t))return"Blackberry";if(bs(t))return"Webos";if(vs(t))return"Safari";if((t.includes("chrome/")||gs(t))&&!t.includes("edge/"))return"Chrome";if(ys(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/firefox\//i.test(e)}function vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/crios\//i.test(e)}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iemobile/i.test(e)}function ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/android/i.test(e)}function ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/blackberry/i.test(e)}function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/webos/i.test(e)}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iphone|ipad|ipod/i.test(e)}function _s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return ws(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function xs(){return z()&&10===document.documentMode}function Is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return ws(e)||ys(e)||bs(e)||ks(e)||/windows phone/i.test(e)||ms(e)}function Ts(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ds(U());break;case"Worker":t="".concat(ds(U()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(wt,"/").concat(r)}var Ss=function(){function e(t){c(this,e),this.auth=t,this.queue=[]}return f(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=a(u().mark((function e(t){var n,r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=p(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=p(n);try{for(o.s();!(s=o.n()).done;){c=s.value;try{c()}catch(u){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Es=function(){function e(t,n,r){c(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new Ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oo,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ko(t)),this._initializationPromise=this.queue(a(u().mark((function r(){var i,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,hs.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(u().mark((function e(t){var n,r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,o&&o!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return vo(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jo(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?_e(t):null)&&vo(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(u().mark((function e(t){var n,r=this,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&vo(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ko(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return vo(n=t&&ko(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,hs.create(this,[ko(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return vo(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return vo(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ts(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,h.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cs(e){return _e(e)}var Ns=function(){function e(t){var n=this;c(this,e),this.auth=t,this.observer=null,this.addObserver=he((function(e){return n.observer=e}))}return f(e,[{key:"next",get:function(){return vo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function As(e,t,n){var r=Cs(e);vo(r._canInitEmulator,r,"emulator-config-failed"),vo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ps(t),s=function(e){var t=Ps(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Rs(r.substr(a.length+1))}}var s=r.split(":"),u=(0,o.Z)(s,2);return{host:u[0],port:Rs(u[1])}}(t),u=s.host,c=s.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ps(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rs(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ds=function(){function e(t,n){c(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return go("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return go("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return go("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return go("not implemented")}}]),e}();function Os(e,t){return Ms.apply(this,arguments)}function Ms(){return(Ms=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:resetPassword",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ls(e,t){return Fs.apply(this,arguments)}function Fs(){return(Fs=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t){return js.apply(this,arguments)}function js(){return(js=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:update",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vs(e,t){return qs.apply(this,arguments)}function qs(){return(qs=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithPassword",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(e,t){return zs.apply(this,arguments)}function zs(){return(zs=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:sendOobCode",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e,t){return Ks.apply(this,arguments)}function Ks(){return(Ks=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(e,t){return Gs.apply(this,arguments)}function Gs(){return(Gs=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(e,t){return $s.apply(this,arguments)}function $s(){return($s=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xs(e,t){return Js.apply(this,arguments)}function Js(){return(Js=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithEmailLink",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return(tu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithEmailLink",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nu=function(e){m(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return c(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Vs(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Xs(t,{email:this._email,oobCode:this._password}));case 5:co(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ls(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",eu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:co(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ds);function ru(e,t){return iu.apply(this,arguments)}function iu(){return(iu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithIdp",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var au=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ru(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ru(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ru(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ue(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):co("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Wa(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ds);function ou(e,t){return su.apply(this,arguments)}function su(){return(su=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:sendVerificationCode",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uu(){return(uu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithPhoneNumber",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(){return(cu=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(t,"POST","/v1/accounts:signInWithPhoneNumber",Co(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Fo(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lu=(0,h.Z)({},"USER_NOT_FOUND","user-not-found");function fu(){return(fu=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithPhoneNumber",Co(t,r),lu));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hu=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return uu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return cu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return fu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ds);var du=function(){function e(t){var n,r,i,a,o,s;c(this,e);var u=ce(le(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,f=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);vo(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ce(le(e)).link,n=t?ce(le(t)).deep_link_id:null,r=ce(le(e)).deep_link_id;return(r?ce(le(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(mD){return null}}}]),e}();var pu=function(){function e(){c(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return nu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=du.parseLink(t);return vo(n,"argument-error"),nu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();pu.PROVIDER_ID="password",pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var vu=function(){function e(t){c(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),gu=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,xe.Z)(this.scopes)}}]),n}(vu),mu=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return vo(e.idToken||e.accessToken,"argument-error"),au._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return vo("providerId"in t&&"signInMethod"in t,"argument-error"),au._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(gu),yu=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return au._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mD){return null}}}]),n}(gu);yu.FACEBOOK_SIGN_IN_METHOD="facebook.com",yu.PROVIDER_ID="facebook.com";var ku=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return au._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(mD){return null}}}]),n}(gu);ku.GOOGLE_SIGN_IN_METHOD="google.com",ku.PROVIDER_ID="google.com";var bu=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return au._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mD){return null}}}]),n}(gu);bu.GITHUB_SIGN_IN_METHOD="github.com",bu.PROVIDER_ID="github.com";var wu=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ru(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ru(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ru(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ds),_u=function(e){m(n,e);var t=_(n);function n(e){return c(this,n),vo(e.startsWith("saml."),"argument-error"),t.call(this,e)}return f(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=wu.fromJSON(e);return vo(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return wu._create(r,n)}catch(i){return null}}}]),n}(vu),xu=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return au._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(mD){return null}}}]),n}(gu);function Iu(e,t){return Tu.apply(this,arguments)}function Tu(){return(Tu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signUp",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}xu.TWITTER_SIGN_IN_METHOD="twitter.com",xu.PROVIDER_ID="twitter.com";var Su=function(){function e(t){c(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(u().mark((function t(n,r,i){var a,o,s,c,l=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,us._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Eu(i),c=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(u().mark((function t(n,r,i){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Eu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Eu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Cu(){return Cu=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Su({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Iu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Su._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Cu.apply(this,arguments)}var Nu=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o,s;return c(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(v(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Z);function Au(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Nu._fromErrorAndOperation(e,n,t,r);throw n}))}function Pu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t),e.next=3,Lu(!0,r,n);case 3:return e.t0=Vo,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Pu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Ou(e,t){return Mu.apply(this,arguments)}function Mu(){return Mu=a(u().mark((function e(t,n){var r,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Zo,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Su._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Lu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return Fu=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(n);case 2:i=Pu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",vo(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Uu(e,t){return ju.apply(this,arguments)}function ju(){return ju=a(u().mark((function e(t,n){var r,i,a,o,s,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Zo(t,Au(i,a,n,t),r);case 6:return vo((o=e.sent).idToken,i,"internal-error"),vo(s=Go(o.idToken),i,"internal-error"),c=s.sub,vo(t.uid===c,i,"user-mismatch"),e.abrupt("return",Su._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&co(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ju.apply(this,arguments)}function Vu(e,t){return qu.apply(this,arguments)}function qu(){return qu=a(u().mark((function e(t,n){var r,i,a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Au(t,i,n);case 4:return a=e.sent,e.next=7,Su._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Bu(e,t){return zu.apply(this,arguments)}function zu(){return(zu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vu(Cs(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return Ku.apply(this,arguments)}function Ku(){return(Ku=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t),e.next=3,Lu(!1,r,n.providerId);case 3:return e.abrupt("return",Ou(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(_e(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:signInWithCustomToken",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(){return(Yu=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs(t),e.next=3,Zu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Su._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $u=function(){function e(t,n){c(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return f(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Xu._fromServerResponse(e,t):co(e,"internal-error")}}]),e}(),Xu=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return f(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}($u);function Ju(e,t,n){var r;vo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ec(){return(ec=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ju(i,a,r),e.next=5,Hs(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(){return(tc=a(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Os(_e(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nc(){return(nc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(_e(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return(ic=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t),e.next=3,Os(r,{oobCode:n});case 3:i=e.sent,vo(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return vo(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:vo(i.mfaInfo,r,"internal-error");case 13:vo(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=$u._fromServerResponse(Cs(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(){return(ac=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rc(_e(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(e,t,n){return sc.apply(this,arguments)}function sc(){return(sc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cs(t),e.next=3,Iu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Su._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(){return(uc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),a={requestType:"EMAIL_SIGNIN",email:n},vo(r.handleCodeInApp,i,"argument-error"),r&&Ju(i,a,r),e.next=6,Zs(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cc(){return(cc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),vo((a=pu.credentialWithLink(n,r||bo()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Bu(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lc(e,t){return fc.apply(this,arguments)}function fc(){return(fc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:createAuthUri",Co(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hc(){return(hc=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo()?bo():"http://localhost",i={identifier:n,continueUri:r},e.next=4,lc(_e(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dc(){return(dc=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ju(r.auth,a,n),e.next=8,Ws(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(){return(pc=a(u().mark((function e(t,n,r){var i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ju(i.auth,o,r),e.next=8,Ys(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vc(e,t){return gc.apply(this,arguments)}function gc(){return(gc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mc(){return(mc=a(u().mark((function e(t,n){var r,i,a,o,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=_e(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Zo(a,vc(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e,t,n){return kc.apply(this,arguments)}function kc(){return(kc=a(u().mark((function e(t,n,r){var i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Zo(t,Ls(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bc=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),wc=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this,e,r,i)).username=a,o}return f(n)}(bc),_c=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"facebook.com",r)}return f(n)}(bc),xc=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return f(n)}(wc),Ic=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"google.com",r)}return f(n)}(bc),Tc=function(e){m(n,e);var t=_(n);function n(e,r,i){return c(this,n),t.call(this,e,"twitter.com",r,i)}return f(n)}(wc);function Sc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Go(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new bc(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new _c(a,i);case"github.com":return new xc(a,i);case"google.com":return new Ic(a,i);case"twitter.com":return new Tc(a,i,e.screenName||null);case"custom":case"anonymous":return new bc(a,null);default:return new bc(a,r,i)}}(n)}var Ec=function(){function e(t,n){c(this,e),this.type=t,this.credential=n}return f(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,h.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Cc=function(){function e(t,n,r){c(this,e),this.session=t,this.hints=n,this.signInResolver=r}return f(e,[{key:"resolveSignIn",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Cs(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return $u._fromServerResponse(r,e)}));vo(i.mfaPendingCredential,r,"internal-error");var s=Ec._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=a(u().mark((function e(t){var a,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Su._fromIdTokenResponse(r,n.operationType,o);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return vo(n.user,r,"internal-error"),e.abrupt("return",Su._forOperation(n.user,n.operationType,o));case 17:co(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Nc(e,t){return No(e,"POST","/v2/accounts/mfaEnrollment:start",Co(e,t))}function Ac(e,t){return No(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Co(e,t))}var Pc=function(){function e(t){var n=this;c(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return $u._fromServerResponse(t.auth,e)})))}))}return f(e,[{key:"getSession",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ec,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Zo(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Zo(this.user,Ac(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Rc=new WeakMap;var Dc="__sak",Oc=function(){function e(t,n){c(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch(mD){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Mc=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=U();return vs(e)||ws(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Is(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);xs()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(u().mark((function e(t,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Oc);Mc.type="LOCAL";var Lc=Mc,Fc=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Oc);Fc.type="SESSION";var Uc=Fc;function jc(e){return Promise.all(e.map(function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Vc=function(){function e(t){c(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(u().mark((function e(t){var n,r,i,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(c=this.handlersMap[o])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),l=Array.from(c).map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,jc(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function qc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vc.receivers=[];var Bc=function(){function e(t){c(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s=this,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=qc("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function zc(){return window}function Wc(){return"undefined"!==typeof zc().WorkerGlobalScope&&"function"===typeof zc().importScripts}function Kc(){return Hc.apply(this,arguments)}function Hc(){return(Hc=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Gc(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Zc="firebaseLocalStorageDb",Qc="firebaseLocalStorage",Yc="fbase_key",$c=function(){function e(t){c(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Xc(e,t){return e.transaction([Qc],t?"readwrite":"readonly").objectStore(Qc)}function Jc(){var e=indexedDB.deleteDatabase(Zc);return new $c(e).toPromise()}function el(){var e=indexedDB.open(Zc,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Qc,{keyPath:Yc})}catch(r){n(r)}})),e.addEventListener("success",a(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Qc)){n.next=12;break}return r.close(),n.next=5,Jc();case 5:return n.t0=t,n.next=8,el();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function tl(e,t,n){return nl.apply(this,arguments)}function nl(){return nl=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xc(t,!0).put((i={},(0,h.Z)(i,Yc,n),(0,h.Z)(i,"value",r),i)),e.abrupt("return",new $c(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),nl.apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return il=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xc(t,!1).get(n),e.next=3,new $c(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}function al(e,t){var n=Xc(e,!0).delete(t);return new $c(n).toPromise()}var ol=function(){function e(){c(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return f(e,[{key:"_openDb",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,el();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Vc._getInstance(Wc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(u().mark((function e(n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kc();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Bc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Gc()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,el();case 5:return t=e.sent,e.next=8,tl(t,Dc,"1");case 8:return e.next=10,al(t,Dc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return tl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return rl(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return al(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a,o,s,c,l,f,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Xc(e,!1).getAll();return new $c(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=p(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,c=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(u){i.e(u)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ol.type="LOCAL";var sl=ol;function ul(e,t){return No(e,"POST","/v2/accounts/mfaSignIn:start",Co(e,t))}function cl(e){return ll.apply(this,arguments)}function ll(){return(ll=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=lo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function hl(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var dl=1e12,pl=function(){function e(t){c(this,e),this.auth=t,this.counter=dl,this._widgets=new Map}return f(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new vl(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||dl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||dl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||dl,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vl=function(){function e(t,n,r){var i=this;c(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;vo(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return f(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var gl=hl("rcb"),ml=new xo(3e4,6e4),yl="https://www.google.com/recaptcha/api.js?",kl=function(){function e(){c(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zc().grecaptcha}return f(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vo(bl(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(zc().grecaptcha):new Promise((function(r,i){var a=zc().setTimeout((function(){i(lo(e,"network-request-failed"))}),ml.get());zc()[gl]=function(){zc().clearTimeout(a),delete zc()[gl];var o=zc().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(lo(e,"internal-error"))},fl("".concat(yl,"?").concat(ue({onload:gl,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(lo(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!zc().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function bl(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var wl=function(){function e(){c(this,e)}return f(e,[{key:"load",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new pl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),_l="recaptcha",xl={theme:"light",type:"image"},Il=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},xl),r=arguments.length>2?arguments[2]:void 0;c(this,e),this.parameters=n,this.type=_l,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cs(r),this.isInvisible="invisible"===this.parameters.size,vo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;vo(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wl:new kl,this.validateStartingState()}return f(e,[{key:"verify",value:function(){var e=a(u().mark((function e(){var t,n,r,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){vo(!this.parameters.sitekey,this.auth,"argument-error"),vo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=zc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){vo(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vo(wo()&&!Wc(),this.auth,"internal-error"),e.next=3,Tl();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,cl(this.auth);case 8:vo(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return vo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Tl(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Sl=function(){function e(t,n){c(this,e),this.verificationId=t,this.onConfirmation=n}return f(e,[{key:"confirm",value:function(e){var t=hu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function El(){return(El=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cs(t),e.next=3,Pl(i,n,_e(r));case 3:return a=e.sent,e.abrupt("return",new Sl(a,(function(e){return Bu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(e,t,n){return Nl.apply(this,arguments)}function Nl(){return(Nl=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),e.next=3,Lu(!1,i,"phone");case 3:return e.next=5,Pl(i.auth,n,_e(r));case 5:return a=e.sent,e.abrupt("return",new Sl(a,(function(e){return Wu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Al(){return(Al=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(t),e.next=3,Pl(i.auth,n,_e(r));case 3:return a=e.sent,e.abrupt("return",new Sl(a,(function(e){return Hu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pl(e,t,n){return Rl.apply(this,arguments)}function Rl(){return Rl=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,vo("string"===typeof a,t,"argument-error"),vo(r.type===_l,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return vo("enroll"===s.type,t,"internal-error"),e.next=13,Nc(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return vo("signin"===s.type,t,"internal-error"),vo(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ul(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ou(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Rl.apply(this,arguments)}function Dl(){return(Dl=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(_e(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ol=function(){function e(t){c(this,e),this.providerId=e.PROVIDER_ID,this.auth=Cs(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return Pl(this.auth,e,_e(t))}}],[{key:"credential",value:function(e,t){return hu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?hu._fromTokenResponse(n,r):null}}]),e}();function Ml(e,t){return t?ko(t):(vo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ol.PROVIDER_ID="phone",Ol.PHONE_SIGN_IN_METHOD="phone";var Ll=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ru(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ru(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ru(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ds);function Fl(e){return Vu(e.auth,new Ll(e),e.bypassAuthState)}function Ul(e){var t=e.auth,n=e.user;return vo(n,t,"internal-error"),Uu(n,new Ll(e),e.bypassAuthState)}function jl(e){return Vl.apply(this,arguments)}function Vl(){return(Vl=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,vo(r=t.user,n,"internal-error"),e.abrupt("return",Ou(r,new Ll(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ql=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];c(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(u().mark((function t(n,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(u().mark((function e(t){var n,r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fl;case"linkViaPopup":case"linkViaRedirect":return jl;case"reauthViaPopup":case"reauthViaRedirect":return Ul;default:co(this.auth,"internal-error")}}},{key:"resolve",value:function(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Bl=new xo(2e3,1e4);function zl(e,t,n){return Wl.apply(this,arguments)}function Wl(){return Wl=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cs(t),ho(t,n,vu),a=Ml(i,r),o=new Zl(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Wl.apply(this,arguments)}function Kl(){return Kl=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho((i=_e(t)).auth,n,vu),a=Ml(i.auth,r),o=new Zl(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Hl(e,t,n){return Gl.apply(this,arguments)}function Gl(){return Gl=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho((i=_e(t)).auth,n,vu),a=Ml(i.auth,r),o=new Zl(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Gl.apply(this,arguments)}var Zl=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o){var s;return c(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=v(s),s}return f(n,[{key:"executeNotNull",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return vo(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo(1===this.filter.length,"Popup operations only handle one event"),t=qc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(lo(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(lo(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(lo(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Bl.get())}()}}]),n}(ql);Zl.currentPopupAction=null;var Ql=new Map,Yl=function(e){m(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=a(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ql.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,$l(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,za(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ql.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ql.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",za(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",za(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ql);function $l(e,t){return Xl.apply(this,arguments)}function Xl(){return(Xl=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rf(n),i=nf(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jl(e,t){return ef.apply(this,arguments)}function ef(){return(ef=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nf(t)._set(rf(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tf(e,t){Ql.set(e._key(),t)}function nf(e){return ko(e._redirectPersistence)}function rf(e){return fs("pendingRedirect",e.config.apiKey,e.name)}function af(e,t,n){return function(e,t,n){return of.apply(this,arguments)}(e,t,n)}function of(){return of=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cs(t),ho(t,n,vu),a=Ml(i,r),e.next=5,Jl(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),of.apply(this,arguments)}function sf(e,t,n){return function(e,t,n){return uf.apply(this,arguments)}(e,t,n)}function uf(){return uf=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho((i=_e(t)).auth,n,vu),a=Ml(i.auth,r),e.next=5,Jl(a,i.auth);case 5:return e.next=7,vf(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),uf.apply(this,arguments)}function cf(e,t,n){return function(e,t,n){return lf.apply(this,arguments)}(e,t,n)}function lf(){return lf=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho((i=_e(t)).auth,n,vu),a=Ml(i.auth,r),e.next=5,Lu(!1,i,n.providerId);case 5:return e.next=7,Jl(a,i.auth);case 7:return e.next=9,vf(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),lf.apply(this,arguments)}function ff(e,t){return hf.apply(this,arguments)}function hf(){return(hf=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cs(t)._initializationPromise;case 2:return e.abrupt("return",df(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function df(e,t){return pf.apply(this,arguments)}function pf(){return pf=a(u().mark((function e(t,n){var r,i,a,o,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=Cs(t),a=Ml(i,n),o=new Yl(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(e){return gf.apply(this,arguments)}function gf(){return(gf=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mf=function(){function e(t){c(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!kf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(lo(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(yf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function yf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function kf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function bf(e){return wf.apply(this,arguments)}function wf(){return wf=a(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",No(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}var _f=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xf=/^https?/;function If(){return(If=a(u().mark((function e(t){var n,r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bf(t);case 4:n=e.sent,r=n.authorizedDomains,i=p(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Tf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:co(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Tf(e){var t=bo(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!xf.test(r))return!1;if(_f.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Sf=new xo(3e4,6e4);function Ef(){var e=zc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,xe.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Cf=null;function Nf(e){return Cf=Cf||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ef(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ef(),n(lo(e,"network-request-failed"))},timeout:Sf.get()})}if(null===(i=null===(r=zc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=zc().gapi)||void 0===a?void 0:a.load)){var s=hl("iframefcb");return zc()[s]=function(){gapi.load?o():n(lo(e,"network-request-failed"))},fl("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Cf=null,e}))}(e),Cf}var Af=new xo(5e3,15e3),Pf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Df(e){var t=e.config;vo(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Io(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:wt},i=Rf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ue(r).slice(1))}function Of(e){return Mf.apply(this,arguments)}function Mf(){return Mf=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nf(t);case 2:return n=e.sent,vo(r=zc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Df(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pf,dontclear:!0},(function(e){return new Promise(function(){var n=a(u().mark((function n(r,i){var a,o,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){zc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=lo(t,"network-request-failed"),o=zc().setTimeout((function(){i(a)}),Af.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}var Lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ff="_blank",Uf="http://localhost",jf=function(){function e(t){c(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Vf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Lf),{width:r.toString(),height:i.toString(),top:a,left:s}),l=U().toLowerCase();n&&(u=gs(l)?Ff:n),ps(l)&&(t=t||Uf,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(_s(l)&&"_self"!==u)return qf(t||"",u),new jf(null);var h=window.open(t||"",u,f);vo(h,e,"popup-blocked");try{h.focus()}catch(d){}return new jf(h)}function qf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Bf="__/auth/handler",zf="emulator/auth/handler";function Wf(e,t,n,r,i,a){vo(e.config.authDomain,e,"auth-domain-config-required"),vo(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:wt,eventId:i};if(t instanceof vu){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ie(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=(0,o.Z)(c[u],2),f=l[0],h=l[1];s[f]=h}}if(t instanceof gu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var p=s,v=0,g=Object.keys(p);v<g.length;v++){var m=g[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Bf);return Io(t,zf)}(e),"?").concat(ue(p).slice(1))}var Kf="webStorageSupport",Hf=function(){function e(){c(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uc,this._completeRedirectFn=df,this._overrideRedirectResult=tf}return f(e,[{key:"_openPopup",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Wf(t,n,r,bo(),i),e.abrupt("return",Vf(t,o,qc()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Wf(t,n,r,bo(),i),zc().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(mo(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Of(t);case 2:return n=e.sent,r=new mf(t),n.register("authEvent",(function(e){return vo(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Kf,{type:Kf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),co(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return If.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Is()||vs()||ws()}}]),e}(),Gf=Hf,Zf=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return No(e,"POST","/v2/accounts/mfaEnrollment:finalize",Co(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return No(e,"POST","/v2/accounts/mfaSignIn:finalize",Co(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){c(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return go("unexpected MultiFactorSessionType")}}}]),e}()),Qf=function(){function e(){c(this,e)}return f(e,null,[{key:"assertion",value:function(e){return Zf._fromCredential(e)}}]),e}();Qf.FACTOR_ID="phone";var Yf,$f="@firebase/auth",Xf="0.20.1",Jf=function(){function e(t){c(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){vo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function eh(){return window}Yf="Browser",pt(new Ie("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){vo(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),vo(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Yf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ts(Yf)},i=new Es(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ko);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),pt(new Ie("auth-internal",(function(e){return function(e){return new Jf(e)}(Cs(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Et($f,Xf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Yf)),Et($f,Xf,"esm2017");function th(e,t,n){return nh.apply(this,arguments)}function nh(){return nh=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eh(),o=a.BuildInfo,mo(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,uh(n.sessionId);case 4:return s=e.sent,c={},ws()?c.ibi=o.packageName:ys()?c.apn=o.packageName:co(t,"operation-not-supported-in-this-environment"),o.displayName&&(c.appDisplayName=o.displayName),c.sessionId=s,e.abrupt("return",Wf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(){return(rh=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eh(),r=n.BuildInfo,i={},ws()?i.iosBundleId=r.packageName:ys()?i.androidPackageName=r.packageName:co(t,"operation-not-supported-in-this-environment"),e.next=5,bf(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ih(e){var t=eh().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ah(e,t,n){return oh.apply(this,arguments)}function oh(){return oh=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eh(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(lo(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),ys()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),oh.apply(this,arguments)}function sh(e){var t,n,r,i,a,o,s,u,c,l,f=eh();vo("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vo("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vo("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vo("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vo("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function uh(e){return ch.apply(this,arguments)}function ch(){return(ch=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lh(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lh(e){if(mo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var fh=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return f(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),za(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(mf);function hh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:mh(),postBody:null,tenantId:e.tenantId,error:lo(e,"no-auth-event")}}function dh(e,t){return yh()._set(kh(e),t)}function ph(e){return vh.apply(this,arguments)}function vh(){return(vh=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yh()._get(kh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,yh()._remove(kh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gh(e,t){var n,r,i=function(e){var t=bh(e),n=t.link?decodeURIComponent(t.link):void 0,r=bh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return bh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=bh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?lo(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function mh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function yh(){return ko(Lc)}function kh(e){return fs("authEvent",e.config.apiKey,e.name)}function bh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=(t=n,(0,ja.Z)(t)||(0,Va.Z)(t)||(0,d.Z)(t)||(0,qa.Z)());r[0];return ce(r.slice(1).join("?"))}var wh=function(){function e(){c(this,e),this._redirectPersistence=Uc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=df,this._overrideRedirectResult=tf}return f(e,[{key:"_initialize",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new fh(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){co(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sh(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ql.clear(),e.next=10,this._originValidation(t);case 10:return o=hh(t,r,i),e.next=13,dh(t,o);case 13:return e.next=15,th(t,o,n);case 15:return s=e.sent,e.next=18,ih(s);case 18:return c=e.sent,e.abrupt("return",ah(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return rh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=eh(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ph(e);case 2:t.onEvent(xh());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=a(u().mark((function n(r){var i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,ph(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=gh(i,r.url)),t.onEvent(a||xh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(o.packageName.toLowerCase(),"://");eh().handleOpenURL=function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),_h=wh;function xh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lo("no-auth-event")}}function Ih(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Th(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return!("file:"!==Ih()&&"ionic:"!==Ih()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sh(){return z()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/Edge\/\d+/.test(e)}function Ch(){try{var e=self.localStorage,t=qc();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return Sh()||Eh(e)}()||K()}catch(n){return Nh()&&K()}return!1}function Nh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ah(){return("http:"===Ih()||"https:"===Ih()||q()||Th())&&!(B()||V())&&Ch()&&!Nh()}function Ph(){return Th()&&"undefined"!==typeof document}function Rh(){return Dh.apply(this,arguments)}function Dh(){return(Dh=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ph()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oh={LOCAL:"local",NONE:"none",SESSION:"session"},Mh=vo,Lh="persistence";function Fh(e,t){Mh(Object.values(Oh).includes(t),e,"invalid-persistence-type"),B()?Mh(t!==Oh.SESSION,e,"unsupported-persistence-type"):V()?Mh(t===Oh.NONE,e,"unsupported-persistence-type"):Nh()?Mh(t===Oh.NONE||t===Oh.LOCAL&&K(),e,"unsupported-persistence-type"):Mh(t===Oh.NONE||Ch(),e,"unsupported-persistence-type")}function Uh(e){return jh.apply(this,arguments)}function jh(){return(jh=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Vh(),r=fs(Lh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var qh=vo,Bh=function(){function e(){c(this,e),this.browserResolver=ko(Gf),this.cordovaResolver=ko(_h),this.underlyingResolver=null,this._redirectPersistence=Uc,this._completeRedirectFn=df,this._overrideRedirectResult=tf}return f(e,[{key:"_initialize",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ph()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return qh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Rh();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function zh(e){return e.unwrap()}function Wh(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Qh(e,function(e,t){var n,r=_e(e),i=t;return vo(t.customData.operationType,r,"argument-error"),vo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Cc._fromError(r,i)}(e,t));else if(r){var i=Kh(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Kh(e){var t=(e instanceof Z?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Z)&&"temporaryProof"in t&&"phoneNumber"in t)return Ol.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Qa)return null;switch(r){case Za:n=ku;break;case Ha:n=yu;break;case Ga:n=bu;break;case Ya:n=xu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?wu._create(r,s):au._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new mu(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Z?n.credentialFromError(e):n.credentialFromResult(e)}function Hh(e,t){return t.catch((function(t){throw t instanceof Z&&Wh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Kh(t)),additionalUserInfo:Sc(e),user:Yh.getOrCreate(r)}}))}function Gh(e,t){return Zh.apply(this,arguments)}function Zh(){return(Zh=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Hh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qh=function(){function e(t,n){c(this,e),this.resolver=n,this.auth=t.wrapped()}return f(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Hh(zh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Yh=function(){function e(t){c(this,e),this._delegate=t,this.multiFactor=function(e){var t=_e(e);return Rc.has(t)||Rc.set(t,Pc._fromUser(t)),Rc.get(t)}(t)}return f(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hh(this.auth,Wu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gh(this.auth,Cl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hh(this.auth,Hl(this._delegate,t,Bh)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uh(Cs(this.auth));case 2:return e.abrupt("return",cf(this._delegate,t,Bh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hh(this.auth,Hu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Gh(this.auth,function(e,t,n){return Al.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Hh(this.auth,function(e,t,n){return Kl.apply(this,arguments)}(this._delegate,e,Bh))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uh(Cs(this.auth));case 2:return e.abrupt("return",sf(this._delegate,t,Bh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return dc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return yc(_e(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return yc(_e(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Dl.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return mc.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return pc.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Yh.USER_MAP=new WeakMap;var $h=vo,Xh=function(){function e(t,n){if(c(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;$h(r,"invalid-api-key",{appName:t.name}),$h(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Bh:void 0;this._delegate=n.initialize({options:{persistence:ed(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(io),this.linkUnderlyingAuth()}return f(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Yh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){As(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return nc.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return rc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return tc.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hh(this._delegate,oc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return hc.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=du.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $h(Ah(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ff(this._delegate,Bh);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Hh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Cs(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Jh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Jh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return uc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ec.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fh(this._delegate,t),e.t0=t,e.next=e.t0===Oh.SESSION?4:e.t0===Oh.LOCAL?6:e.t0===Oh.NONE?11:13;break;case 4:return n=Uc,e.abrupt("break",14);case 6:return e.next=8,ko(sl)._isAvailable();case 8:return r=e.sent,n=r?sl:Lc,e.abrupt("break",14);case 11:return n=ls,e.abrupt("break",14);case 13:return e.abrupt("return",co("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Hh(this._delegate,function(e){return Cu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Hh(this._delegate,Bu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Hh(this._delegate,function(e,t){return Yu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Hh(this._delegate,function(e,t,n){return Bu(_e(e),pu.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Hh(this._delegate,function(e,t,n){return cc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Gh(this._delegate,function(e,t,n){return El.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $h(Ah(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Hh(this._delegate,zl(this._delegate,t,Bh)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $h(Ah(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Uh(this._delegate);case 3:return e.abrupt("return",af(this._delegate,t,Bh));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ac.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Jh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Yh.getOrCreate(e))},error:t,complete:n}}function ed(e,t){var n=function(e,t){var n=Vh();if(!n)return[];var r=fs(Lh,e,t);switch(n.getItem(r)){case Oh.NONE:return[ls];case Oh.LOCAL:return[sl,Uc];case Oh.SESSION:return[Uc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(sl)||n.push(sl),"undefined"!==typeof window)for(var r=0,i=[Lc,Uc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ls)||n.push(ls),n}Xh.Persistence=Oh;var td=function(){function e(){c(this,e),this.providerId="phone",this._delegate=new Ol(zh(Xt.auth()))}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ol.credential(e,t)}}]),e}();td.PHONE_SIGN_IN_METHOD=Ol.PHONE_SIGN_IN_METHOD,td.PROVIDER_ID=Ol.PROVIDER_ID;var nd,rd=vo,id=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xt.app();c(this,e),rd(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Il(t,n,i.auth()),this.type=this._delegate.type}return f(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(nd=Xt).INTERNAL.registerComponent(new Ie("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$a,PASSWORD_RESET:Xa,RECOVER_EMAIL:Ja,REVERT_SECOND_FACTOR_ADDITION:eo,VERIFY_AND_CHANGE_EMAIL:to,VERIFY_EMAIL:no}},EmailAuthProvider:pu,FacebookAuthProvider:yu,GithubAuthProvider:bu,GoogleAuthProvider:ku,OAuthProvider:mu,SAMLAuthProvider:_u,PhoneAuthProvider:td,PhoneMultiFactorGenerator:Qf,RecaptchaVerifier:id,TwitterAuthProvider:xu,Auth:Xh,AuthCredential:Ds,Error:Z}).setInstantiationMode("LAZY").setMultipleInstances(!1)),nd.registerVersion("@firebase/auth-compat","0.2.14");var ad="@firebase/database",od="0.13.0",sd="";function ud(e){sd=e}var cd=function(){function e(t){c(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),J(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:X(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),ld=function(){function e(){c(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ne(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),fd=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new cd(t)}}catch(n){}return new ld},hd=fd("localStorage"),dd=fd("sessionStorage"),pd=new Me("@firebase/database"),vd=function(){var e=1;return function(){return e++}}(),gd=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,C(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new fe;n.update(t);var r=n.digest();return P.encodeByteArray(r)},md=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?J(r):r,t+=" "}return t},yd=null,kd=!0,bd=function(e,t){C(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(pd.logLevel=Ce.VERBOSE,yd=pd.log.bind(pd),t&&dd.set("logging_enabled",!0)):"function"===typeof e?yd=e:(yd=null,dd.remove("logging_enabled"))},wd=function(){if(!0===kd&&(kd=!1,null===yd&&!0===dd.get("logging_enabled")&&bd(!0)),yd){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=md.apply(null,t);yd(r)}},_d=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];wd.apply(void 0,[e].concat(n))}},xd=function(){var e="FIREBASE INTERNAL ERROR: "+md.apply(void 0,arguments);pd.error(e)},Id=function(){var e="FIREBASE FATAL ERROR: ".concat(md.apply(void 0,arguments));throw pd.error(e),new Error(e)},Td=function(){var e="FIREBASE WARNING: "+md.apply(void 0,arguments);pd.warn(e)},Sd=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ed="[MIN_NAME]",Cd="[MAX_NAME]",Nd=function(e,t){if(e===t)return 0;if(e===Ed||t===Cd)return-1;if(t===Ed||e===Cd)return 1;var n=jd(e),r=jd(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ad=function(e,t){return e===t?0:e<t?-1:1},Pd=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+J(t))},Rd=function e(t){if("object"!==typeof t||null===t)return J(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=J(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Dd=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Od(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Md=function(e){C(!Sd(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ld=new RegExp("^-?(0*)\\d{1,10}$"),Fd=-2147483648,Ud=2147483647,jd=function(e){if(Ld.test(e)){var t=Number(e);if(t>=Fd&&t<=Ud)return t}return null},Vd=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Td("Exception was thrown by user callback.",e),t}),Math.floor(0))}},qd=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},Bd=function(){function e(t,n){var r=this;c(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Td('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),zd=function(){function e(t,n,r){var i=this;c(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(wd("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Td(e)}}]),e}(),Wd=function(){function e(t){c(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Wd.OWNER="owner";var Kd="5",Hd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gd="websocket",Zd="long_polling",Qd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];c(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hd.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hd.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Yd(e,t,n){var r;if(C("string"===typeof t,"typeof type must == string"),C("object"===typeof n,"typeof params must == object"),t===Gd)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Zd)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Od(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var $d=function(){function e(){c(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ne(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return M(void 0,this.counters_)}}]),e}(),Xd={},Jd={};function ep(e){var t=e.toString();return Xd[t]||(Xd[t]=new $d),Xd[t]}var tp=function(){function e(t){c(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Vd((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),np="start",rp="close",ip=function(){function e(t,n,r,i,a,o,s){var u=this;c(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(t),this.stats_=ep(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),Yd(n,Zd,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new tp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(W()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ap((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===np)n.id=a,n.password=o;else{if(i!==rp)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Kd,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Hd.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=J(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=R(t),r=Dd(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!W()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=J(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!W()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),ap=function(){function e(t,n,r,i){if(c(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,W())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=vd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){wd("frame writing exception"),s.stack&&wd(s.stack),wd(s)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;W()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){wd("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||wd("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),op=null;"undefined"!==typeof MozWebSocket?op=MozWebSocket:"undefined"!==typeof WebSocket&&(op=WebSocket);var sp=function(){function e(t,n,r,i,a,o,s){c(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=ep(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hd.set("previous_websocket_failure",!0);try{if(W()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(Kd,"/").concat(sd,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new op(this.connURL,[],undefined)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){hd.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=X(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(C(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=J(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Dd(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Kd,!W()&&"undefined"!==typeof location&&location.hostname&&Hd.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Yd(e,Gd,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==op&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return hd.isInMemoryStorage||!0===hd.get("previous_websocket_failure")}}]),e}();sp.responsesRequiredToBeHealthy=2,sp.healthyTimeout=3e4;var up=function(){function e(t){c(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=sp&&sp.isAvailable(),r=n&&!sp.previouslyFailed();if(t.webSocketOnly&&(n||Td("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sp];else{var i,a=this.transports_=[],o=p(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ip,sp]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();up.globalTransportInitialized_=!1;var cp=function(){function e(t,n,r,i,a,o,s,u,l,f){c(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new up(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=qd((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Pd("t",e),n=Pd("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Pd("t",e),n=Pd("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Pd("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?xd("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xd("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Kd!==n&&Td("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qd((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qd((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),lp=function(){function e(){c(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),fp=function(){function e(t){c(this,e),this.allowedEvents_=t,this.listeners_={},C(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,xe.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){C(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),hp=function(e){m(n,e);var t=_(n);function n(){var e;return c(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||j()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return C("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(fp),dp=function(){function e(t,n){if(c(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function pp(){return new dp("")}function vp(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function gp(e){return e.pieces_.length-e.pieceNum_}function mp(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new dp(e.pieces_,t)}function yp(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function kp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function bp(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new dp(t,0)}function wp(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof dp)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new dp(n,0)}function _p(e){return e.pieceNum_>=e.pieces_.length}function xp(e,t){var n=vp(e),r=vp(t);if(null===n)return t;if(n===r)return xp(mp(e),mp(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ip(e,t){for(var n=kp(e,0),r=kp(t,0),i=0;i<n.length&&i<r.length;i++){var a=Nd(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Tp(e,t){if(gp(e)!==gp(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Sp(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(gp(e)>gp(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ep=f((function e(t,n){c(this,e),this.errorPrefix_=n,this.parts_=kp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ke(this.parts_[r]);Cp(this)}));function Cp(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Np(e))}function Np(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ap=function(e){m(n,e);var t=_(n);function n(){var e,r,i;return c(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return C("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(fp),Pp=1e3,Rp=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,s,u,l){var f;if(c(this,n),(f=t.call(this)).repoInfo_=e,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=a,f.onServerInfoUpdate_=o,f.authTokenProvider_=s,f.appCheckTokenProvider_=u,f.authOverride_=l,f.id=n.nextPersistentConnectionId_++,f.log_=_d("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=Pp,f.maxReconnectDelay_=3e5,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,l&&!W())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ap.getInstance().on("visible",f.onVisible_,v(f)),-1===e.host.indexOf("fblocal")&&hp.getInstance().on("online",f.onOnline_,v(f)),f}return f(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(J(i)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new L,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ee(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ee(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),C(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+J(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):xd("Unrecognized action received from server: "+J(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pp),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=a(u().mark((function e(){var t,r,i,a,s,c,l,f,h,d,p,v,g,m,y=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,c=!1,l=null,f=function(){l?l.close():(c=!0,i())},h=function(e){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:f,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=(0,o.Z)(p,2),g=v[0],m=v[1],c?wd("getToken() completed but was canceled"):(wd("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=m&&m.token,l=new cp(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Td(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),c||(this.repoInfo_.nodeAdmin&&Td(e.t0),f());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){wd("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){wd("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ie(this.interruptReasons_)&&(this.reconnectDelay_=Pp,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Rd(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new dp(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){wd("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){wd("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=p(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=p(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";W()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+sd.replace(/\./g,"-")]=1,j()?e["framework.cordova"]=1:B()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=hp.getInstance().currentlyOnline();return ie(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ne(e,"w")){var n=re(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Td("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(lp);Rp.nextPersistentConnectionId_=0,Rp.nextConnectionId_=0;var Dp,Op=function(){function e(t,n){c(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Mp=function(){function e(){c(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Op(Ed,e),r=new Op(Ed,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Op.MIN}}]),e}(),Lp=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return Nd(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw N("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Op.MIN}},{key:"maxPost",value:function(){return new Op(Cd,Dp)}},{key:"makePost",value:function(e,t){return C("string"===typeof e,"KeyIndex indexValue must always be a string."),new Op(e,Dp)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Dp},set:function(e){Dp=e}}]),n}(Mp),Fp=new Lp,Up=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;c(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),jp=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Bp.EMPTY_NODE,this.right=null!=a?a:Bp.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Bp.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Bp.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();jp.RED=!0,jp.BLACK=!1;var Vp,qp=function(){function e(){c(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jp(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Bp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;c(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jp.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Up(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Up(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Up(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Up(this.root_,null,this.comparator_,!0,e)}}]),e}();function zp(e,t){return Nd(e.name,t.name)}function Wp(e,t){return Nd(e,t)}Bp.EMPTY_NODE=new qp;var Kp,Hp,Gp,Zp=function(e){return"number"===typeof e?"number:"+Md(e):"string:"+e},Qp=function(e){if(e.isLeafNode()){var t=e.val();C("string"===typeof t||"number"===typeof t||"object"===typeof t&&ne(t,".sv"),"Priority must be a string or number.")}else C(e===Vp||e.isEmpty(),"priority of unexpected type.");C(e===Vp||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;c(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,C(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Qp(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return _p(t)?this:".priority"===vp(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=vp(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(C(".priority"!==r||1===gp(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(mp(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Zp(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Md(this.value_):this.value_,this.lazyHash_=gd(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(C(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return C(i>=0,"Unknown leaf type: "+n),C(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Kp},set:function(e){Kp=e}}]),e}();Yp.VALUE_TYPE_ORDER=["object","boolean","number","string"];var $p,Xp,Jp=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Nd(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Op.MIN}},{key:"maxPost",value:function(){return new Op(Cd,new Yp("[PRIORITY-POST]",Gp))}},{key:"makePost",value:function(e,t){var n=Hp(e);return new Op(t,new Yp("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Mp),ev=new Jp,tv=Math.log(2),nv=function(){function e(t){c(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/tv,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),rv=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new jp(o,a.node,jp.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new jp(o,a.node,jp.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new jp(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,jp.BLACK):(s(f,jp.BLACK),s(f,jp.RED))}return a}(new nv(e.length));return new Bp(r||t,a)},iv={},av=function(){function e(t,n){c(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=re(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Bp?t:null}},{key:"hasIndex",value:function(e){return ne(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){C(t!==Fp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Op.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?rv(i,t.getCompare()):iv;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ae(this.indexes_,(function(e,i){var a=re(r.indexSet_,i);if(C(a,"Missing index implementation for "+i),e===iv){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Op.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),rv(o,a.getCompare())}return iv}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Op(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ae(this.indexes_,(function(e){if(e===iv)return e;var r=n.get(t.name);return r?e.remove(new Op(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return C(iv&&ev,"ChildrenNode.ts has not been loaded"),$p=$p||new e({".priority":iv},{".priority":ev})}}]),e}(),ov=function(){function e(t,n,r){c(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Qp(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Xp}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Xp:t}},{key:"getChild",value:function(e){var t=vp(e);return null===t?this:this.getImmediateChild(t).getChild(mp(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(C(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Op(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Xp:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=vp(e);if(null===n)return t;C(".priority"!==vp(e)||1===gp(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mp(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ev,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Zp(this.getPriority().val())+":"),this.forEachChild(ev,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":gd(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Op(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Op(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Op(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Op.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Op.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sv?-1:0}},{key:"withIndex",value:function(t){if(t===Fp||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Fp||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ev),r=t.getIterator(ev),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Fp?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Xp||(Xp=new e(new Bp(Wp),null,av.Default))}}]),e}();ov.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var sv=new(function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.call(this,new Bp(Wp),ov.EMPTY_NODE,av.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return ov.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(ov));Object.defineProperties(Op,{MIN:{value:new Op(Ed,ov.EMPTY_NODE)},MAX:{value:new Op(Cd,sv)}}),Lp.__EMPTY_NODE=ov.EMPTY_NODE,Yp.__childrenNodeConstructor=ov,Vp=sv,function(e){Gp=e}(sv);function uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ov.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),C(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Yp(n,uv(t))}if(e instanceof Array){var r=ov.EMPTY_NODE;return Od(e,(function(t,n){if(ne(e,t)&&"."!==t.substring(0,1)){var i=uv(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(uv(t))}var i=[],a=!1,o=e;if(Od(o,(function(e,t){if("."!==e.substring(0,1)){var n=uv(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Op(e,n)))}})),0===i.length)return ov.EMPTY_NODE;var s=rv(i,zp,(function(e){return e.name}),Wp);if(a){var u=rv(i,ev.getCompare());return new ov(s,uv(t),new av({".priority":u},{".priority":ev}))}return new ov(s,uv(t),av.Default)}!function(e){Hp=e}(uv);var cv=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).indexPath_=e,C(!_p(e)&&".priority"!==vp(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Nd(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=uv(e),r=ov.EMPTY_NODE.updateChild(this.indexPath_,n);return new Op(t,r)}},{key:"maxPost",value:function(){var e=ov.EMPTY_NODE.updateChild(this.indexPath_,sv);return new Op(Cd,e)}},{key:"toString",value:function(){return kp(this.indexPath_,0).join("/")}}]),n}(Mp),lv=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Nd(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Op.MIN}},{key:"maxPost",value:function(){return Op.MAX}},{key:"makePost",value:function(e,t){var n=uv(e);return new Op(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Mp),fv=new lv,hv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dv=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=hv.charAt(n%64),n=Math.floor(n/64);C(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=hv.charAt(t[r]);return C(20===o.length,"nextPushId: Length should be 20."),o}}(),pv=function(e){if("2147483647"===e)return"-";var t=jd(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Cd;var a=n[i],o=hv.charAt(hv.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},vv=function(e){if("-2147483648"===e)return Ed;var t=jd(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=hv.charAt(hv.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function gv(e){return{type:"value",snapshotNode:e}}function mv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function yv(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function kv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var bv=function(){function e(t){c(this,e),this.index_=t}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(yv(t,o)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(mv(t,n)):a.trackChildChange(kv(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ev,(function(e,r){t.hasChild(e)||n.trackChildChange(yv(e,r))})),t.isLeafNode()||t.forEachChild(ev,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(kv(t,r,i))}else n.trackChildChange(mv(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?ov.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),wv=function(){function e(t){c(this,e),this.indexedFilter_=new bv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return f(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Op(t,n))||(n=ov.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=ov.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ov.EMPTY_NODE);var i=this;return t.forEachChild(ev,(function(e,t){i.matches(new Op(e,t))||(r=r.updateImmediateChild(e,ov.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),_v=function(){function e(t){c(this,e),this.rangedFilter_=new wv(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Op(t,n))||(n=ov.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ov.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=ov.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(ov.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,u)<=0?h++:r=r.updateImmediateChild(p.name,ov.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;C(s.numChildren()===this.limit_,"");var u=new Op(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(kv(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(yv(t,f));var p=s.updateImmediateChild(t,ov.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(mv(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(yv(c.name,c.node)),i.trackChildChange(mv(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,ov.EMPTY_NODE)):e}}]),e}(),xv=function(){function e(){c(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ev}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ed}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cd}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ev}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Iv(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Tv(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Sv(e,t){var n=e.copy();return n.index_=t,n}function Ev(e){var t,n={};return e.isDefault()||(e.index_===ev?t="$priority":e.index_===fv?t="$value":e.index_===Fp?t="$key":(C(e.index_ instanceof cv,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=J(t),e.startSet_&&(n.startAt=J(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+J(e.indexStartName_))),e.endSet_&&(n.endAt=J(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+J(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Cv(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ev&&(t.i=e.index_.toString()),t}var Nv=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=_d("p:rest:"),o.listens_={},o}return f(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Ev(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),re(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Ev(e._queryParams),r=e._path.toString(),i=new L;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=(0,o.Z)(i,2),s=a[0],u=a[1];s&&s.accessToken&&(n.auth=s.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ue(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=X(l.responseText)}catch(n){Td("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Td("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(lp),Av=function(){function e(){c(this,e),this.rootNode_=ov.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Pv(){return{value:null,children:new Map}}function Rv(e,t,n){if(_p(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=vp(t);e.children.has(r)||e.children.set(r,Pv()),Rv(e.children.get(r),t=mp(t),n)}}function Dv(e,t){if(_p(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ev,(function(t,n){Rv(e,new dp(t),n)})),Dv(e,t)}if(e.children.size>0){var r=vp(t);if(t=mp(t),e.children.has(r))Dv(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Ov(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ov(r,new dp(t.toString()+"/"+e),n)}))}var Mv,Lv=function(){function e(t){c(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Od(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Fv=function(){function e(t,n){c(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Lv(t);var r=1e4+2e4*Math.random();qd(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Od(t,(function(t,i){i>0&&ne(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),qd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Uv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mv||(Mv={}));var jv,Vv=function(){function e(t,n,r){c(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Mv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(_p(this.path)){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dp(t));return new e(pp(),n,this.revert)}return C(vp(this.path)===t,"operationForChild called for unrelated child."),new e(mp(this.path),this.affectedTree,this.revert)}}]),e}(),qv=function(){function e(t,n){c(this,e),this.source=t,this.path=n,this.type=Mv.LISTEN_COMPLETE}return f(e,[{key:"operationForChild",value:function(t){return _p(this.path)?new e(this.source,pp()):new e(this.source,mp(this.path))}}]),e}(),Bv=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.snap=r,this.type=Mv.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return _p(this.path)?new e(this.source,pp(),this.snap.getImmediateChild(t)):new e(this.source,mp(this.path),this.snap)}}]),e}(),zv=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.children=r,this.type=Mv.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(_p(this.path)){var n=this.children.subtree(new dp(t));return n.isEmpty()?null:n.value?new Bv(this.source,pp(),n.value):new e(this.source,pp(),n)}return C(vp(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,mp(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Wv=function(){function e(t,n,r){c(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(_p(e))return this.isFullyInitialized()&&!this.filtered_;var t=vp(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Kv=f((function e(t){c(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Hv(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw N("Should only compare child_ events.");var r=new Op(t.childName,t.snapshotNode),i=new Op(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Gv(e,t){return{eventCache:e,serverCache:t}}function Zv(e,t,n,r){return Gv(new Wv(t,n,r),e.serverCache)}function Qv(e,t,n,r){return Gv(e.eventCache,new Wv(t,n,r))}function Yv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function $v(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Xv=function(){return jv||(jv=new Bp(Ad)),jv},Jv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xv();c(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:pp(),value:this.value};if(_p(e))return null;var n=vp(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mp(e),t);return null!=i?{path:wp(new dp(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(_p(t))return this;var n=vp(t),r=this.children.get(n);return null!==r?r.subtree(mp(t)):new e(null)}},{key:"set",value:function(t,n){if(_p(t))return new e(n,this.children);var r=vp(t),i=(this.children.get(r)||new e(null)).set(mp(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(_p(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=vp(t),r=this.children.get(n);if(r){var i,a=r.remove(mp(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(_p(e))return this.value;var t=vp(e),n=this.children.get(t);return n?n.get(mp(e)):null}},{key:"setTree",value:function(t,n){if(_p(t))return n;var r,i=vp(t),a=(this.children.get(i)||new e(null)).setTree(mp(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(pp(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(wp(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,pp(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(_p(e))return null;var i=vp(e),a=this.children.get(i);return a?a.findOnPath_(mp(e),wp(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,pp(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(_p(t))return this;this.value&&r(n,this.value);var i=vp(t),a=this.children.get(i);return a?a.foreachOnPath_(mp(t),wp(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(pp(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(wp(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Od(t,(function(e,t){n=n.set(new dp(e),t)})),n}}]),e}(),eg=function(){function e(t){c(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new Jv(null))}}]),e}();function tg(e,t,n){if(_p(t))return new eg(new Jv(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=xp(i,t);return a=a.updateChild(o,n),new eg(e.writeTree_.set(i,a))}var s=new Jv(n),u=e.writeTree_.setTree(t,s);return new eg(u)}function ng(e,t,n){var r=e;return Od(n,(function(e,n){r=tg(r,wp(t,e),n)})),r}function rg(e,t){if(_p(t))return eg.empty();var n=e.writeTree_.setTree(t,new Jv(null));return new eg(n)}function ig(e,t){return null!=ag(e,t)}function ag(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xp(n.path,t)):null}function og(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ev,(function(e,n){t.push(new Op(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Op(e,n.value))})),t}function sg(e,t){if(_p(t))return e;var n=ag(e,t);return new eg(null!=n?new Jv(n):e.writeTree_.subtree(t))}function ug(e){return e.writeTree_.isEmpty()}function cg(e,t){return lg(pp(),e.writeTree_,t)}function lg(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(C(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=lg(wp(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(wp(e,".priority"),r)),n}function fg(e,t){return Tg(t,e)}function hg(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function dg(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));C(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&pg(s,r.path)?i=!1:Sp(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=gg(e.allWrites,vg,pp()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=rg(e.visibleWrites,r.path):Od(r.children,(function(t){e.visibleWrites=rg(e.visibleWrites,wp(r.path,t))}));return!0}return!1}function pg(e,t){if(e.snap)return Sp(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Sp(wp(e.path,n),t))return!0;return!1}function vg(e){return e.visible}function gg(e,t,n){for(var r=eg.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Sp(n,o)?r=tg(r,s=xp(n,o),a.snap):Sp(o,n)&&(s=xp(o,n),r=tg(r,pp(),a.snap.getChild(s)));else{if(!a.children)throw N("WriteRecord should have .snap or .children");if(Sp(n,o))r=ng(r,s=xp(n,o),a.children);else if(Sp(o,n))if(_p(s=xp(o,n)))r=ng(r,pp(),a.children);else{var u=re(a.children,vp(s));if(u){var c=u.getChild(mp(s));r=tg(r,pp(),c)}}}}}return r}function mg(e,t,n,r,i){if(r||i){var a=sg(e.visibleWrites,t);if(!i&&ug(a))return n;if(i||null!=n||ig(a,pp())){var o=gg(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Sp(e.path,t)||Sp(t,e.path))}),t);return cg(o,n||ov.EMPTY_NODE)}return null}var s=ag(e.visibleWrites,t);if(null!=s)return s;var u=sg(e.visibleWrites,t);return ug(u)?n:null!=n||ig(u,pp())?cg(u,n||ov.EMPTY_NODE):null}function yg(e,t,n,r){return mg(e.writeTree,e.treePath,t,n,r)}function kg(e,t){return function(e,t,n){var r=ov.EMPTY_NODE,i=ag(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ev,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=sg(e.visibleWrites,t);return n.forEachChild(ev,(function(e,t){var n=cg(sg(a,new dp(e)),t);r=r.updateImmediateChild(e,n)})),og(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return og(sg(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function bg(e,t,n,r){return function(e,t,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=wp(t,n);if(ig(e.visibleWrites,a))return null;var o=sg(e.visibleWrites,a);return ug(o)?i.getChild(n):cg(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function wg(e,t){return function(e,t){return ag(e.visibleWrites,t)}(e.writeTree,wp(e.treePath,t))}function _g(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=sg(e.visibleWrites,t),c=ag(u,pp());if(null!=c)s=c;else{if(null==n)return[];s=cg(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function xg(e,t,n){return function(e,t,n,r){var i=wp(t,n),a=ag(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?cg(sg(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ig(e,t){return Tg(wp(e.treePath,t),e.writeTree)}function Tg(e,t){return{treePath:e,writeTree:t}}var Sg=function(){function e(){c(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;C("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),C(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,kv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,yv(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw N("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,kv(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Eg=new(function(){function e(){c(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Cg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Wv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xg(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$v(this.viewCache_),i=_g(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Ng(e,t,n,r,i){var a,o,s=new Sg;if(n.type===Mv.OVERWRITE){var u=n;u.source.fromUser?a=Rg(e,t,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!_p(u.path),a=Pg(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Mv.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=wp(n,r);Dg(t,vp(c))&&(s=Rg(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=wp(n,r);Dg(t,vp(c))||(s=Rg(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(C(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Mg(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Mv.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=wg(r,n))return t;var s,u=new Cg(r,t,i),c=t.eventCache.getNode();if(_p(n)||".priority"===vp(n)){var l;if(t.serverCache.isFullyInitialized())l=yg(r,$v(t));else{var f=t.serverCache.getNode();C(f instanceof ov,"serverChildren would be complete if leaf node"),l=kg(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=vp(n),d=xg(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,mp(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,ov.EMPTY_NODE,mp(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=yg(r,$v(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=wg(r,pp()),Zv(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=wg(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(_p(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Pg(e,t,n,u.getNode().getChild(n),i,a,s,o);if(_p(n)){var c=new Jv(null);return u.getNode().forEachChild(Fp,(function(e,t){c=c.set(new dp(e),t)})),Mg(e,t,n,c,i,a,s,o)}return t}var l=new Jv(null);return r.foreach((function(e,t){var r=wp(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Mg(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Mv.LISTEN_COMPLETE)throw N("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Qv(t,a.getNode(),a.isFullyInitialized()||_p(n),a.isFiltered());return Ag(e,o,n,r,Eg,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Yv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(gv(Yv(t)))}}(t,a,f),{viewCache:a,changes:f}}function Ag(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=wg(r,n))return t;if(_p(n))if(C(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=$v(t),l=kg(r,c instanceof ov?c:ov.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=yg(r,$v(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=vp(n);if(".priority"===h){C(1===gp(n),"Can't have a priority with additional path components");var d=u.getNode(),p=bg(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,g=mp(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var m=bg(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(h).updateChild(g,m):u.getNode().getImmediateChild(h)}else v=xg(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,g,i,a):u.getNode()}}return Zv(t,o,u.isFullyInitialized()||_p(n),e.filter.filtersNodes())}function Pg(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(_p(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=vp(n);if(!c.isCompleteForPath(n)&&gp(n)>1)return t;var d=mp(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Eg,null)}var v=Qv(t,u,c.isFullyInitialized()||_p(n),l.filtersNodes());return Ag(e,v,n,i,new Cg(i,v,a),s)}function Rg(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new Cg(i,t,a);if(_p(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Zv(t,u,!0,e.filter.filtersNodes());else{var f=vp(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Zv(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=mp(n),p=c.getNode().getImmediateChild(f);if(_p(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===yp(d)&&v.getChild(bp(d)).isEmpty()?v:v.updateChild(d,r):ov.EMPTY_NODE}if(p.equals(h))s=t;else s=Zv(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Dg(e,t){return e.eventCache.isCompleteForChild(t)}function Og(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Mg(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=_p(n)?r:new Jv(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Og(0,t.serverCache.getNode().getImmediateChild(n),r);c=Pg(e,c,new dp(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var f=Og(0,t.serverCache.getNode().getImmediateChild(n),r);c=Pg(e,c,new dp(n),f,i,a,o,s)}})),c}var Lg,Fg=function(){function e(t,n){c(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new bv(i.getIndex()),o=(r=i).loadsAllData()?new bv(r.getIndex()):r.hasLimit()?new _v(r):new wv(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(ov.EMPTY_NODE,s.getNode(),null),f=o.updateFullNode(ov.EMPTY_NODE,u.getNode(),null),h=new Wv(l,s.isFullyInitialized(),a.filtersNodes()),d=new Wv(f,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Gv(d,h),this.eventGenerator_=new Kv(this.query_)}return f(e,[{key:"query",get:function(){return this.query_}}]),e}();function Ug(e,t){var n=$v(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!_p(t)&&!n.getImmediateChild(vp(t)).isEmpty())?n.getChild(t):null}function jg(e){return 0===e.eventRegistrations_.length}function Vg(e,t,n){var r=[];if(n){C(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function qg(e,t,n,r){t.type===Mv.MERGE&&null!==t.source.queryId&&(C($v(e.viewCache_),"We should always have a full cache before handling merges"),C(Yv(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Ng(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,C(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),C(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),C(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Bg(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Bg(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Hv(e,i,"child_removed",t,r,n),Hv(e,i,"child_added",t,r,n),Hv(e,i,"child_moved",a,r,n),Hv(e,i,"child_changed",t,r,n),Hv(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var zg,Wg=f((function e(){c(this,e),this.views=new Map}));function Kg(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return C(null!=a,"SyncTree gave us an op for an invalid query."),qg(a,t,n,r)}var o,s=[],u=p(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(qg(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Hg(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=yg(n,i?r:null),u=!1;s?u=!0:r instanceof ov?(s=kg(n,r),u=!1):(s=ov.EMPTY_NODE,u=!1);var c=Gv(new Wv(s,u,!1),new Wv(r,i,!1));return new Fg(t,c)}return o}function Gg(e,t,n,r,i,a){var o=Hg(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ev,(function(e,t){r.push(mv(e,t))})),n.isFullyInitialized()&&r.push(gv(n.getNode())),Bg(e,r,n.getNode(),t)}(o,n)}function Zg(e,t,n,r){var i=t._queryIdentifier,a=[],s=[],u=Jg(e);if("default"===i){var c,l=p(e.views.entries());try{for(l.s();!(c=l.n()).done;){var f=(0,o.Z)(c.value,2),h=f[0],d=f[1];s=s.concat(Vg(d,n,r)),jg(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(g){l.e(g)}finally{l.f()}}else{var v=e.views.get(i);v&&(s=s.concat(Vg(v,n,r)),jg(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!Jg(e)&&a.push(new(C(Lg,"Reference.ts has not been loaded"),Lg)(t._repo,t._path)),{removed:a,events:s}}function Qg(e){var t,n=[],r=p(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Yg(e,t){var n,r=null,i=p(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ug(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function $g(e,t){if(t._queryParams.loadsAllData())return em(e);var n=t._queryIdentifier;return e.views.get(n)}function Xg(e,t){return null!=$g(e,t)}function Jg(e){return null!=em(e)}function em(e){var t,n=p(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var tm=1,nm=f((function e(t){c(this,e),this.listenProvider_=t,this.syncPointTree_=new Jv(null),this.pendingWriteTree_={visibleWrites:eg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function rm(e,t,n,r,i){return function(e,t,n,r,i){C(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=tg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?fm(e,new Bv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function im(e,t,n,r){!function(e,t,n,r){C(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ng(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Jv.fromObject(n);return fm(e,new zv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function am(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=hg(e.pendingWriteTree_,t),i=dg(e.pendingWriteTree_,t);if(i){var a=new Jv(null);return null!=r.snap?a=a.set(pp(),!0):Od(r.children,(function(e){a=a.set(new dp(e),!0)})),fm(e,new Vv(r.path,a,n))}return[]}function om(e,t,n){return fm(e,new Bv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function sm(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||Xg(a,t))){var s=Zg(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Jg(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&Jg(t))return[em(t)];var r=[];return t&&(r=Qg(t)),Od(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,g=pm(e,p);e.listenProvider_.startListening(bm(v),vm(e,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(bm(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(gm(t));e.listenProvider_.stopListening(bm(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=gm(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function um(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=xp(e,r);i=i||Yg(t,n),a=a||Jg(t)}));var o,s=e.syncPointTree_.get(r);(s?(a=a||Jg(s),i=i||Yg(s,pp())):(s=new Wg,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?o=!0:(o=!1,i=ov.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Yg(t,pp());n&&(i=i.updateImmediateChild(e,n))})));var u=Xg(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=gm(t);C(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=tm++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var f=Gg(s,t,n,fg(e.pendingWriteTree_,r),i,o);if(!u&&!a){var h=$g(s,t);f=f.concat(function(e,t,n){var r=t._path,i=vm(e,t),a=pm(e,n),o=e.listenProvider_.startListening(bm(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)C(!Jg(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!_p(e)&&t&&Jg(t))return[em(t).query];var r=[];return t&&(r=r.concat(Qg(t).map((function(e){return e.query})))),Od(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(bm(l),vm(e,l))}return o}(e,t,h))}return f}function cm(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Yg(n,xp(e,t));if(r)return r}));return mg(r,t,i,n,!0)}function lm(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=xp(e,n);r=r||Yg(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Yg(i,pp()):(i=new Wg,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Wv(r,!0,!1):null;return function(e){return Yv(e.viewCache_)}(Hg(i,t,fg(e.pendingWriteTree_,t._path),a?o.getNode():ov.EMPTY_NODE,a))}function fm(e,t){return hm(t,e.syncPointTree_,null,fg(e.pendingWriteTree_,pp()))}function hm(e,t,n,r){if(_p(e.path))return dm(e,t,n,r);var i=t.get(pp());null==n&&null!=i&&(n=Yg(i,pp()));var a=[],o=vp(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Ig(r,o);a=a.concat(hm(s,u,c,l))}return i&&(a=a.concat(Kg(i,e,r,n))),a}function dm(e,t,n,r){var i=t.get(pp());null==n&&null!=i&&(n=Yg(i,pp()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Ig(r,t),u=e.operationForChild(t);u&&(a=a.concat(dm(u,i,o,s)))})),i&&(a=a.concat(Kg(i,e,r,n))),a}function pm(e,t){var n=t.query,r=vm(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ov.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=mm(e,n);if(r){var i=ym(r),a=i.path,o=i.queryId,s=xp(a,t);return km(e,a,new qv(Uv(o),s))}return[]}(e,n._path,r):function(e,t){return fm(e,new qv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return sm(e,n,null,i)}}}function vm(e,t){var n=gm(t);return e.queryToTagMap.get(n)}function gm(e){return e._path.toString()+"$"+e._queryIdentifier}function mm(e,t){return e.tagToQueryMap.get(t)}function ym(e){var t=e.indexOf("$");return C(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new dp(e.substr(0,t))}}function km(e,t,n){var r=e.syncPointTree_.get(t);return C(r,"Missing sync point for query tag that we're tracking"),Kg(r,n,fg(e.pendingWriteTree_,t),null)}function bm(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(C(zg,"Reference.ts has not been loaded"),zg)(e._repo,e._path):e}var wm=function(){function e(t){c(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),_m=function(){function e(t,n){c(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=wp(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return cm(this.syncTree_,this.path_)}}]),e}(),xm=function(e,t,n){return e&&"object"===typeof e?(C(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Im(e[".sv"],t,n):"object"===typeof e[".sv"]?Tm(e[".sv"],t):void C(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Im=function(e,t,n){if("timestamp"===e)return n.timestamp;C(!1,"Unexpected server value: "+e)},Tm=function(e,t,n){e.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&C(!1,"Unexpected increment value: "+r);var i=t.node();if(C(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Sm=function(e,t,n,r){return Cm(t,new _m(n,e),r)},Em=function(e,t,n){return Cm(e,new wm(t),n)};function Cm(e,t,n){var r,i=e.getPriority().val(),a=xm(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=xm(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Yp(s,uv(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Yp(a))),u.forEachChild(ev,(function(e,i){var a=Cm(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Nm=f((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};c(this,e),this.name=t,this.parent=n,this.node=r}));function Am(e,t){for(var n=t instanceof dp?t:new dp(t),r=e,i=vp(n);null!==i;){var a=re(r.node.children,i)||{children:{},childCount:0};r=new Nm(i,r,a),i=vp(n=mp(n))}return r}function Pm(e){return e.node.value}function Rm(e,t){e.node.value=t,Fm(e)}function Dm(e){return e.node.childCount>0}function Om(e,t){Od(e.node.children,(function(n,r){t(new Nm(n,e,r))}))}function Mm(e,t,n,r){n&&!r&&t(e),Om(e,(function(e){Mm(e,t,!0,r)})),n&&r&&t(e)}function Lm(e){return new dp(null===e.parent?e.name:Lm(e.parent)+"/"+e.name)}function Fm(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Pm(e)&&!Dm(e)}(n),i=ne(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Fm(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Fm(e))}(e.parent,e.name,e)}var Um=/[\[\].#$\/\u0000-\u001F\u007F]/,jm=/[\[\].#$\u0000-\u001F\u007F]/,Vm=10485760,qm=function(e){return"string"===typeof e&&0!==e.length&&!Um.test(e)},Bm=function(e){return"string"===typeof e&&0!==e.length&&!jm.test(e)},zm=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Sd(e)||e&&"object"===typeof e&&ne(e,".sv")},Wm=function(e,t,n,r){r&&void 0===t||Km(ge(e,"value"),t,n)},Km=function e(t,n,r){var i=r instanceof dp?new Ep(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Np(i));if("function"===typeof n)throw new Error(t+"contains a function "+Np(i)+" with contents = "+n.toString());if(Sd(n))throw new Error(t+"contains "+n.toString()+" "+Np(i));if("string"===typeof n&&n.length>Vm/3&&ke(n)>Vm)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Np(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Od(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!qm(n)))throw new Error(t+" contains an invalid key ("+n+") "+Np(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ke(t),Cp(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ke(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Np(i)+" in addition to actual children.")}},Hm=function(e,t,n,r){if(!r||void 0!==t){var i=ge(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Od(t,(function(e,t){var r=new dp(e);if(Km(i,t,wp(n,r)),".priority"===yp(r)&&!zm(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=kp(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!qm(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Ip);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Sp(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Gm=function(e,t,n){if(!n||void 0!==t){if(Sd(t))throw new Error(ge(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zm(t))throw new Error(ge(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zm=function(e,t,n,r){if((!r||void 0!==n)&&!qm(n))throw new Error(ge(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qm=function(e,t,n,r){if((!r||void 0!==n)&&!Bm(n))throw new Error(ge(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ym=function(e,t){if(".info"===vp(t))throw new Error(e+" failed = Can't modify data under /.info/")},$m=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!qm(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Bm(e)}(n))throw new Error(ge(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Xm=f((function e(){c(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Jm(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Tp(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ey(e,t,n){Jm(e,n),ny(e,(function(e){return Tp(e,t)}))}function ty(e,t,n){Jm(e,n),ny(e,(function(e){return Sp(e,t)||Sp(t,e)}))}function ny(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(ry(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function ry(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();yd&&wd("event: "+n.toString()),Vd(r)}}}var iy="repo_interrupt",ay=function(){function e(t,n,r,i){c(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pv(),this.transactionQueueTree_=new Nm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function oy(e,t,n){if(e.stats_=ep(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Nv(e.repoInfo_,(function(t,n,r,i){cy(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return ly(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{J(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Rp(e.repoInfo_,t,(function(t,n,r,i){cy(e,t,n,r,i)}),(function(t){ly(e,t)}),(function(t){!function(e,t){Od(t,(function(t,n){fy(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Jd[n]||(Jd[n]=t()),Jd[n]}(e.repoInfo_,(function(){return new Fv(e.stats_,e.server_)})),e.infoData_=new Av,e.infoSyncTree_=new nm({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=om(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),fy(e,"connected",!1),e.serverSyncTree_=new nm({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ty(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function sy(e){var t=e.infoData_.getNode(new dp(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function uy(e){return(t=(t={timestamp:sy(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function cy(e,t,n,r,i){e.dataUpdateCount++;var a=new dp(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=ae(n,(function(e){return uv(e)}));o=function(e,t,n,r){var i=mm(e,r);if(i){var a=ym(i),o=a.path,s=a.queryId,u=xp(o,t),c=Jv.fromObject(n);return km(e,o,new zv(Uv(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=uv(n);o=function(e,t,n,r){var i=mm(e,r);if(null!=i){var a=ym(i),o=a.path,s=a.queryId,u=xp(o,t);return km(e,o,new Bv(Uv(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=ae(n,(function(e){return uv(e)}));o=function(e,t,n){var r=Jv.fromObject(n);return fm(e,new zv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=uv(n);o=om(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=xy(e,a)),ty(e.eventQueue_,f,o)}function ly(e,t){fy(e,"connected",t),!1===t&&function(e){yy(e,"onDisconnectEvents");var t=uy(e),n=Pv();Ov(e.onDisconnect_,pp(),(function(r,i){var a=Sm(r,i,e.serverSyncTree_,t);Rv(n,r,a)}));var r=[];Ov(n,pp(),(function(t,n){r=r.concat(om(e.serverSyncTree_,t,n));var i=Cy(e,t);xy(e,i)})),e.onDisconnect_=Pv(),ty(e.eventQueue_,pp(),r)}(e)}function fy(e,t,n){var r=new dp("/.info/"+t),i=uv(n);e.infoData_.updateSnapshot(r,i);var a=om(e.infoSyncTree_,r,i);ty(e.eventQueue_,r,a)}function hy(e){return e.nextWriteId_++}function dy(e,t,n,r,i){yy(e,"set",{path:t.toString(),value:n,priority:r});var a=uy(e),o=uv(n,r),s=cm(e.serverSyncTree_,t),u=Em(o,s,a),c=hy(e),l=rm(e.serverSyncTree_,t,u,c,!0);Jm(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Td("set at "+t+" failed: "+n);var o=am(e.serverSyncTree_,c,!a);ty(e.eventQueue_,t,o),ky(e,i,n,r)}));var f=Cy(e,t);xy(e,f),ty(e.eventQueue_,f,[])}function py(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Dv(e.onDisconnect_,t),ky(e,n,r,i)}))}function vy(e,t,n,r){var i=uv(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Rv(e.onDisconnect_,t,i),ky(e,r,n,a)}))}function gy(e,t,n){var r;r=".info"===vp(t._path)?sm(e.infoSyncTree_,t,n):sm(e.serverSyncTree_,t,n),ey(e.eventQueue_,t._path,r)}function my(e){e.persistentConnection_&&e.persistentConnection_.interrupt(iy)}function yy(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wd.apply(void 0,[t].concat(r))}function ky(e,t,n,r){t&&Vd((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function by(e,t,n){return cm(e.serverSyncTree_,t,n)||ov.EMPTY_NODE}function wy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ey(e,t),Pm(t)){var n=Ty(e,t);C(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&_y(e,Lm(t),n)}else Dm(t)&&Om(t,(function(t){wy(e,t)}))}function _y(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=by(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];C(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=xp(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){yy(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(am(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Ey(e,Am(e.transactionQueueTree_,t)),wy(e,e.transactionQueueTree_),ty(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Vd(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Td("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}xy(e,t)}}),o)}function xy(e,t){var n=Iy(e,t),r=Lm(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=xp(n,u.path),l=!1,f=void 0;if(C(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,f=u.abortReason,i=i.concat(am(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,f="maxretry",i=i.concat(am(e.serverSyncTree_,u.currentWriteId,!0));else{var h=by(e,u.path,o);u.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Km("transaction failed: Data returned ",d,u.path);var p=uv(d);"object"===typeof d&&null!=d&&ne(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=u.currentWriteId,g=uy(e),m=Em(p,h,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=hy(e),o.splice(o.indexOf(v),1),i=(i=i.concat(rm(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(am(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(am(e.serverSyncTree_,u.currentWriteId,!0))}ty(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},u=0;u<t.length;u++)s(u);Ey(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Vd(r[c]);wy(e,e.transactionQueueTree_)}(e,Ty(e,n),r),r}function Iy(e,t){var n,r=e.transactionQueueTree_;for(n=vp(t);null!==n&&void 0===Pm(r);)r=Am(r,n),n=vp(t=mp(t));return r}function Ty(e,t){var n=[];return Sy(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Sy(e,t,n){var r=Pm(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Om(t,(function(t){Sy(e,t,n)}))}function Ey(e,t){var n=Pm(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Rm(t,n.length>0?n:void 0)}Om(t,(function(t){Ey(e,t)}))}function Cy(e,t){var n=Lm(Iy(e,t)),r=Am(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Ny(e,t)})),Ny(e,r),Mm(r,(function(t){Ny(e,t)})),n}function Ny(e,t){var n=Pm(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(C(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(C(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(am(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Rm(t,void 0):n.length=a+1,ty(e.eventQueue_,Lm(t),i);for(var s=0;s<r.length;s++)Vd(r[s])}}var Ay=function(e,t){var n=Py(e),r=n.namespace;"firebase.com"===n.domain&&Id(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Id("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Td("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Qd(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new dp(n.pathString)}},Py=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=p(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Td("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Ry=function(){function e(t,n,r,i){c(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return f(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+J(this.snapshot.exportVal())}}]),e}(),Dy=function(){function e(t,n,r){c(this,e),this.eventRegistration=t,this.error=n,this.path=r}return f(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Oy=function(){function e(t,n){c(this,e),this.snapshotCallback=t,this.cancelCallback=n}return f(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),My=function(){function e(t,n){c(this,e),this._repo=t,this._path=n}return f(e,[{key:"cancel",value:function(){var e=new L;return py(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Ym("OnDisconnect.remove",this._path);var e=new L;return vy(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Ym("OnDisconnect.set",this._path),Wm("OnDisconnect.set",e,this._path,!1);var t=new L;return vy(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Ym("OnDisconnect.setWithPriority",this._path),Wm("OnDisconnect.setWithPriority",e,this._path,!1),Gm("OnDisconnect.setWithPriority",t,!1);var n=new L;return function(e,t,n,r,i){var a=uv(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Rv(e.onDisconnect_,t,a),ky(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Ym("OnDisconnect.update",this._path),Hm("OnDisconnect.update",e,this._path,!1);var t=new L;return function(e,t,n,r){if(ie(n))return wd("onDisconnect().update() called with empty data.  Don't do anything."),void ky(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Od(n,(function(n,r){var i=uv(r);Rv(e.onDisconnect_,wp(t,n),i)})),ky(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Ly=function(){function e(t,n,r,i){c(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return _p(this._path)?null:yp(this._path)}},{key:"ref",get:function(){return new Vy(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Cv(this._queryParams),t=Rd(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Cv(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=_e(t))instanceof e))return!1;var n=this._repo===t._repo,r=Tp(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Fy(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Uy(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Fp){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ed)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Cd)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ev){if(null!=t&&!zm(t)||null!=n&&!zm(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(C(e.getIndex()instanceof cv||e.getIndex()===fv,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jy(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Vy=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,r,new xv,!1)}return f(n,[{key:"parent",get:function(){var e=bp(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Ly),qy=function(){function e(t,n,r){c(this,e),this._node=t,this.ref=n,this._index=r}return f(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new dp(t),r=Wy(this.ref,t);return new e(this._node.getChild(n),r,ev)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Wy(n.ref,r),ev))}))}},{key:"hasChild",value:function(e){var t=new dp(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function By(e,t){return(e=_e(e))._checkNotDeleted("ref"),void 0!==t?Wy(e._root,t):e._root}function zy(e,t){(e=_e(e))._checkNotDeleted("refFromURL");var n=Ay(t,e._repo.repoInfo_.nodeAdmin);$m("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Id("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),By(e,n.path.toString())}function Wy(e,t){var n,r,i,a;return null===vp((e=_e(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Qm(n,r,i,a)):Qm("child","path",t,!1),new Vy(e._repo,wp(e._path,t))}function Ky(e,t){e=_e(e),Ym("push",e._path),Wm("push",t,e._path,!0);var n,r=sy(e._repo),i=dv(r),a=Wy(e,i),o=Wy(e,i);return n=null!=t?Gy(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Hy(e){return Ym("remove",e._path),Gy(e,null)}function Gy(e,t){e=_e(e),Ym("set",e._path),Wm("set",t,e._path,!1);var n=new L;return dy(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Zy(e,t){e=_e(e),Ym("setPriority",e._path),Gm("setPriority",t,!1);var n=new L;return dy(e._repo,wp(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Qy(e,t,n){if(Ym("setWithPriority",e._path),Wm("setWithPriority",t,e._path,!1),Gm("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new L;return dy(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Yy(e,t){Hm("update",t,e._path,!1);var n=new L;return function(e,t,n,r){yy(e,"update",{path:t.toString(),value:n});var i=!0,a=uy(e),o={};if(Od(n,(function(n,r){i=!1,o[n]=Sm(wp(t,n),uv(r),e.serverSyncTree_,a)})),i)wd("update() called with empty data.  Don't do anything."),ky(0,r,"ok",void 0);else{var s=hy(e),u=im(e.serverSyncTree_,t,o,s);Jm(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Td("update at "+t+" failed: "+n);var o=am(e.serverSyncTree_,s,!a),u=o.length>0?xy(e,t):t;ty(e.eventQueue_,u,o),ky(0,r,n,i)})),Od(n,(function(n){var r=Cy(e,wp(t,n));xy(e,r)})),ty(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function $y(e){return function(e,t){var n=lm(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=uv(n).withIndex(t._queryParams.getIndex()),i=om(e.serverSyncTree_,t._path,r);return ey(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return yy(e,"get for query "+J(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=_e(e))._repo,e).then((function(t){return new qy(t,new Vy(e._repo,e._path),e._queryParams.getIndex())}))}var Xy=function(){function e(t){c(this,e),this.callbackContext=t}return f(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Ry("value",this,new qy(e.snapshotNode,new Vy(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Dy(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Jy=function(){function e(t,n){c(this,e),this.eventType=t,this.callbackContext=n}return f(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Dy(this,e,t):null}},{key:"createEvent",value:function(e,t){C(null!=e.childName,"Child events should have a childName.");var n=Wy(new Vy(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Ry(e.type,this,new qy(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function ek(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){gy(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Oy(n,a||void 0),c="value"===t?new Xy(u):new Jy(t,u);return function(e,t,n){var r;r=".info"===vp(t._path)?um(e.infoSyncTree_,t,n):um(e.serverSyncTree_,t,n),ey(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return gy(e._repo,e,c)}}function tk(e,t,n,r){return ek(e,"value",t,n,r)}function nk(e,t,n,r){return ek(e,"child_added",t,n,r)}function rk(e,t,n,r){return ek(e,"child_changed",t,n,r)}function ik(e,t,n,r){return ek(e,"child_moved",t,n,r)}function ak(e,t,n,r){return ek(e,"child_removed",t,n,r)}function ok(e,t,n){var r=null,i=n?new Oy(n):null;"value"===t?r=new Xy(i):t&&(r=new Jy(t,i)),gy(e._repo,e,r)}var sk=f((function e(){c(this,e)})),uk=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){Wm("endAt",this._value,e._path,!0);var t=Tv(e._queryParams,this._value,this._key);if(jy(t),Uy(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ly(e._repo,e._path,t,e._orderByCalled)}}]),n}(sk);function ck(e,t){return Zm("endAt","key",t,!0),new uk(e,t)}var lk=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){Wm("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Fp?("string"===typeof t&&(t=vv(t)),r=Tv(e,t,n)):r=Tv(e,t,null==n?Ed:vv(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jy(t),Uy(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ly(e._repo,e._path,t,e._orderByCalled)}}]),n}(sk);function fk(e,t){return Zm("endBefore","key",t,!0),new lk(e,t)}var hk=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){Wm("startAt",this._value,e._path,!0);var t=Iv(e._queryParams,this._value,this._key);if(jy(t),Uy(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ly(e._repo,e._path,t,e._orderByCalled)}}]),n}(sk);function dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Zm("startAt","key",t,!0),new hk(e,t)}var pk=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){Wm("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Fp?("string"===typeof t&&(t=pv(t)),r=Iv(e,t,n)):r=Iv(e,t,null==n?Cd:pv(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jy(t),Uy(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ly(e._repo,e._path,t,e._orderByCalled)}}]),n}(sk);function vk(e,t){return Zm("startAfter","key",t,!0),new pk(e,t)}var gk=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ly(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(sk);function mk(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new gk(e)}var yk=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ly(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(sk);function kk(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yk(e)}var bk=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this))._path=e,r}return f(n,[{key:"_apply",value:function(e){Fy(e,"orderByChild");var t=new dp(this._path);if(_p(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new cv(t),r=Sv(e._queryParams,n);return Uy(r),new Ly(e._repo,e._path,r,!0)}}]),n}(sk);function wk(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qm("orderByChild","path",e,!1),new bk(e)}var _k=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Fy(e,"orderByKey");var t=Sv(e._queryParams,Fp);return Uy(t),new Ly(e._repo,e._path,t,!0)}}]),n}(sk);function xk(){return new _k}var Ik=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Fy(e,"orderByPriority");var t=Sv(e._queryParams,ev);return Uy(t),new Ly(e._repo,e._path,t,!0)}}]),n}(sk);function Tk(){return new Ik}var Sk=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Fy(e,"orderByValue");var t=Sv(e._queryParams,fv);return Uy(t),new Ly(e._repo,e._path,t,!0)}}]),n}(sk);function Ek(){return new Sk}var Ck=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){if(Wm("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uk(this._value,this._key)._apply(new hk(this._value,this._key)._apply(e))}}]),n}(sk);function Nk(e,t){return Zm("equalTo","key",t,!0),new Ck(e,t)}function Ak(e){for(var t=_e(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){C(!Lg,"__referenceConstructor has already been defined"),Lg=e}(Vy),function(e){C(!zg,"__referenceConstructor has already been defined"),zg=e}(Vy);var Pk={},Rk=!1;function Dk(e,t,n,r){e.repoInfo_=new Qd("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function Ok(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Id("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wd("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Ay(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Ay(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Wd(Wd.OWNER):new zd(e.name,e.options,t);$m("Invalid Firebase Database URL",s),_p(s.path)||Id("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Pk[t.name];i||(i={},Pk[t.name]=i);var a=i[e.toURLString()];a&&Id("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ay(e,Rk,n,r),i[e.toURLString()]=a,a}(u,e,l,new Bd(e.name,n));return new Mk(f,e)}var Mk=function(){function e(t,n){c(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(oy(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Vy(this._repo,pp())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Pk[t];n&&n[e.key]===e||Id("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),my(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Id("Cannot call "+e+" on a deleted database.")}}]),e}();function Lk(){up.IS_TRANSPORT_INITIALIZED&&Td("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Fk(){Lk(),ip.forceDisallow()}function Uk(){Lk(),sp.forceDisallow(),ip.forceAllow()}function jk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=_e(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Id("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Id('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Wd(Wd.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:F(r.mockUserToken,e.app.options.projectId);a=new Wd(o)}Dk(i,t,n,a)}function Vk(e){(e=_e(e))._checkNotDeleted("goOffline"),my(e._repo)}function qk(e){var t;(e=_e(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(iy)}function Bk(e,t){bd(e,t)}var zk={".sv":"timestamp"};var Wk=function(){function e(t,n){c(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Kk(e,t,n){var r;if(e=_e(e),Ym("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new L,o=tk(e,(function(){}));return function(e,t,n,r,i,a){yy(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:vd(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=by(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Km("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Am(e.transactionQueueTree_,t),f=Pm(l)||[];f.push(o),Rm(l,f),"object"===typeof u&&null!==u&&ne(u,".priority")?(c=re(u,".priority"),C(zm(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(cm(e.serverSyncTree_,t)||ov.EMPTY_NODE).getPriority().val();var h=uy(e),d=uv(u,c),p=Em(d,s,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=hy(e);var v=rm(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);ty(e.eventQueue_,t,v),wy(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new qy(r,new Vy(e._repo,e._path),ev),a.resolve(new Wk(n,i)))}),o,i),a.promise}Rp.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Rp.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){ud(wt),pt(new Ie("database",(function(e,t){var n=t.instanceIdentifier;return Ok(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Et(ad,od,e),Et(ad,od,"esm2017")}();var Hk=new Me("@firebase/database-compat"),Gk=function(e){var t="FIREBASE WARNING: "+e;Hk.warn(t)},Zk=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ge(e,t)+"must be a boolean.")},Qk=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ge(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Yk=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"cancel",value:function(e){ve("OnDisconnect.cancel",0,1,arguments.length),me("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ve("OnDisconnect.remove",0,1,arguments.length),me("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ve("OnDisconnect.set",1,2,arguments.length),me("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ve("OnDisconnect.setWithPriority",2,3,arguments.length),me("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ve("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Gk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}me("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),$k=function(){function e(t,n){c(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return ve("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Xk=function(){function e(t,n){c(this,e),this._database=t,this._delegate=n}return f(e,[{key:"val",value:function(){return ve("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ve("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ve("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ve("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ve("DataSnapshot.child",0,1,arguments.length),t=String(t),Qm("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ve("DataSnapshot.hasChild",1,1,arguments.length),Qm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ve("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ve("DataSnapshot.forEach",1,1,arguments.length),me("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ve("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ve("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ve("DataSnapshot.ref",0,0,arguments.length),new eb(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Jk=function(){function e(t,n){c(this,e),this.database=t,this._delegate=n}return f(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ve("Query.on",2,4,arguments.length),me("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Xk(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return tk(this._delegate,u,c),n;case"child_added":return nk(this._delegate,u,c),n;case"child_removed":return ak(this._delegate,u,c),n;case"child_changed":return rk(this._delegate,u,c),n;case"child_moved":return ik(this._delegate,u,c),n;default:throw new Error(ge("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ve("Query.off",0,3,arguments.length),Qk("Query.off",e,!0),me("Query.off","callback",t,!0),ye("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,ok(this._delegate,e,r)}else ok(this._delegate,e)}},{key:"get",value:function(){var e=this;return $y(this._delegate).then((function(t){return new Xk(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ve("Query.once",1,4,arguments.length),me("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new L,u=function(e,t){var r=new Xk(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":tk(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":nk(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":ak(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":rk(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":ik(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ge("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return ve("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ak(this._delegate,mk(t)))}},{key:"limitToLast",value:function(t){return ve("Query.limitToLast",1,1,arguments.length),new e(this.database,Ak(this._delegate,kk(t)))}},{key:"orderByChild",value:function(t){return ve("Query.orderByChild",1,1,arguments.length),new e(this.database,Ak(this._delegate,wk(t)))}},{key:"orderByKey",value:function(){return ve("Query.orderByKey",0,0,arguments.length),new e(this.database,Ak(this._delegate,xk()))}},{key:"orderByPriority",value:function(){return ve("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ak(this._delegate,Tk()))}},{key:"orderByValue",value:function(){return ve("Query.orderByValue",0,0,arguments.length),new e(this.database,Ak(this._delegate,Ek()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.startAt",0,2,arguments.length),new e(this.database,Ak(this._delegate,dk(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.startAfter",0,2,arguments.length),new e(this.database,Ak(this._delegate,vk(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.endAt",0,2,arguments.length),new e(this.database,Ak(this._delegate,ck(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.endBefore",0,2,arguments.length),new e(this.database,Ak(this._delegate,fk(t,n)))}},{key:"equalTo",value:function(t,n){return ve("Query.equalTo",1,2,arguments.length),new e(this.database,Ak(this._delegate,Nk(t,n)))}},{key:"toString",value:function(){return ve("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ve("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ve("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new eb(this.database,new Vy(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,me(e,"cancel",r.cancel,!0),r.context=n,ye(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ge(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),eb=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,new Ly(r._repo,r._path,new xv,!1))).database=e,i._delegate=r,i}return f(n,[{key:"getKey",value:function(){return ve("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ve("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Wy(this._delegate,e))}},{key:"getParent",value:function(){ve("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ve("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ve("Reference.set",1,2,arguments.length),me("Reference.set","onComplete",t,!0);var n=Gy(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ve("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Gk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ym("Reference.update",this._delegate._path),me("Reference.update","onComplete",t,!0);var i=Yy(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ve("Reference.setWithPriority",2,3,arguments.length),me("Reference.setWithPriority","onComplete",n,!0);var r=Qy(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ve("Reference.remove",0,1,arguments.length),me("Reference.remove","onComplete",e,!0);var t=Hy(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;ve("Reference.transaction",1,3,arguments.length),me("Reference.transaction","transactionUpdate",e,!1),me("Reference.transaction","onComplete",t,!0),Zk("Reference.transaction","applyLocally",n,!0);var i=Kk(this._delegate,e,{applyLocally:n}).then((function(e){return new $k(e.committed,new Xk(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ve("Reference.setPriority",1,2,arguments.length),me("Reference.setPriority","onComplete",t,!0);var n=Zy(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ve("Reference.push",0,2,arguments.length),me("Reference.push","onComplete",t,!0);var i=Ky(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Ym("Reference.onDisconnect",this._delegate._path),new Yk(new My(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Jk),tb=function(){function e(t,n){var r=this;c(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Fk,forceLongPolling:Uk}}return f(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jk(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ve("database.ref",0,1,arguments.length),e instanceof eb){var t=zy(this._delegate,e.toString());return new eb(this,t)}var n=By(this._delegate,e);return new eb(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";ve(t,1,1,arguments.length);var n=zy(this._delegate,e);return new eb(this,n)}},{key:"goOffline",value:function(){return ve("database.goOffline",0,0,arguments.length),Vk(this._delegate)}},{key:"goOnline",value:function(){return ve("database.goOnline",0,0,arguments.length),qk(this._delegate)}}]),e}();tb.ServerValue={TIMESTAMP:zk,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var nb=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;ud(r);var u=new Se("auth-internal",new Ne("database-standalone"));return u.setComponent(new Ie("auth-internal",(function(){return i}),"PRIVATE")),{instance:new tb(Ok(t,u,void 0,n,s),t),namespace:a}}}),rb=tb.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ie("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new tb(i,r)}),"PUBLIC").setServiceProps({Reference:eb,Query:Jk,Database:tb,DataSnapshot:Xk,enableLogging:Bk,INTERNAL:nb,ServerValue:rb}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.0")}(Xt);var ib,ab="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ob={},sb=sb||{},ub=ab||self;function cb(){}function lb(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function fb(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hb="closure_uid_"+(1e9*Math.random()>>>0),db=0;function pb(e,t,n){return e.call.apply(e.bind,arguments)}function vb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function gb(e,t,n){return(gb=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pb:vb).apply(null,arguments)}function mb(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function yb(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function kb(){this.s=this.s,this.o=this.o}var bb={};kb.prototype.s=!1,kb.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,hb)&&e[hb]||(e[hb]=++db)}(this);delete bb[e]}},kb.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var wb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},_b=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function xb(e){return Array.prototype.concat.apply([],arguments)}function Ib(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tb(e){return/^[\s\xa0]*$/.test(e)}var Sb,Eb=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Cb(e,t){return-1!=e.indexOf(t)}function Nb(e,t){return e<t?-1:e>t?1:0}e:{var Ab=ub.navigator;if(Ab){var Pb=Ab.userAgent;if(Pb){Sb=Pb;break e}}Sb=""}function Rb(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Db(e){var t={};for(var n in e)t[n]=e[n];return t}var Ob="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mb(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ob.length;a++)n=Ob[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Lb(e){return Lb[" "](e),e}Lb[" "]=cb;var Fb,Ub=Cb(Sb,"Opera"),jb=Cb(Sb,"Trident")||Cb(Sb,"MSIE"),Vb=Cb(Sb,"Edge"),qb=Vb||jb,Bb=Cb(Sb,"Gecko")&&!(Cb(Sb.toLowerCase(),"webkit")&&!Cb(Sb,"Edge"))&&!(Cb(Sb,"Trident")||Cb(Sb,"MSIE"))&&!Cb(Sb,"Edge"),zb=Cb(Sb.toLowerCase(),"webkit")&&!Cb(Sb,"Edge");function Wb(){var e=ub.document;return e?e.documentMode:void 0}e:{var Kb="",Hb=function(){var e=Sb;return Bb?/rv:([^\);]+)(\)|;)/.exec(e):Vb?/Edge\/([\d\.]+)/.exec(e):jb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zb?/WebKit\/(\S+)/.exec(e):Ub?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Hb&&(Kb=Hb?Hb[1]:""),jb){var Gb=Wb();if(null!=Gb&&Gb>parseFloat(Kb)){Fb=String(Gb);break e}}Fb=Kb}var Zb,Qb={};function Yb(){return function(e){var t=Qb;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Eb(String(Fb)).split("."),n=Eb("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Nb(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Nb(0==a[2].length,0==o[2].length)||Nb(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(ub.document&&jb){var $b=Wb();Zb=$b||(parseInt(Fb,10)||void 0)}else Zb=void 0;var Xb=Zb,Jb=function(){if(!ub.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ub.addEventListener("test",cb,t),ub.removeEventListener("test",cb,t)}catch(n){}return e}();function ew(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function tw(e,t){if(ew.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bb){e:{try{Lb(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:nw[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&tw.Z.h.call(this)}}ew.prototype.h=function(){this.defaultPrevented=!0},yb(tw,ew);var nw={2:"touch",3:"pen",4:"mouse"};tw.prototype.h=function(){tw.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var rw="closure_listenable_"+(1e6*Math.random()|0),iw=0;function aw(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++iw,this.ca=this.fa=!1}function ow(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function sw(e){this.src=e,this.g={},this.h=0}function uw(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=wb(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ow(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function cw(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}sw.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=cw(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new aw(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var lw="closure_lm_"+(1e6*Math.random()|0),fw={};function hw(e,t,n,r,i){if(r&&r.once)return pw(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)hw(e,t[a],n,r,i);return null}return n=ww(n),e&&e[rw]?e.N(t,n,fb(r)?!!r.capture:!!r,i):dw(e,t,n,!1,r,i)}function dw(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=fb(i)?!!i.capture:!!i,s=kw(e);if(s||(e[lw]=s=new sw(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=yw;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jb||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mw(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function pw(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)pw(e,t[a],n,r,i);return null}return n=ww(n),e&&e[rw]?e.O(t,n,fb(r)?!!r.capture:!!r,i):dw(e,t,n,!0,r,i)}function vw(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)vw(e,t[a],n,r,i);else r=fb(r)?!!r.capture:!!r,n=ww(n),e&&e[rw]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=cw(a=e.g[t],n,r,i))&&(ow(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=kw(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cw(t,n,r,i)),(n=-1<e?t[e]:null)&&gw(n))}function gw(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[rw])uw(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mw(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=kw(t))?(uw(n,e),0==n.h&&(n.src=null,t[lw]=null)):ow(e)}}}function mw(e){return e in fw?fw[e]:fw[e]="on"+e}function yw(e,t){if(e.ca)e=!0;else{t=new tw(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&gw(e),e=n.call(r,t)}return e}function kw(e){return(e=e[lw])instanceof sw?e:null}var bw="__closure_events_fn_"+(1e9*Math.random()>>>0);function ww(e){return"function"===typeof e?e:(e[bw]||(e[bw]=function(t){return e.handleEvent(t)}),e[bw])}function _w(){kb.call(this),this.i=new sw(this),this.P=this,this.I=null}function xw(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ew(t,e);else if(t instanceof ew)t.target=t.target||e;else{var i=t;Mb(t=new ew(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Iw(o,r,!0,t)&&i}if(i=Iw(o=t.g=e,r,!0,t)&&i,i=Iw(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Iw(o=t.g=n[a],r,!1,t)&&i}function Iw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&uw(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}yb(_w,kb),_w.prototype[rw]=!0,_w.prototype.removeEventListener=function(e,t,n,r){vw(this,e,t,n,r)},_w.prototype.M=function(){if(_w.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ow(n[r]);delete t.g[e],t.h--}}this.I=null},_w.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_w.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Tw=ub.JSON.stringify;function Sw(){var e=Ow,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ew,Cw=function(){function e(){c(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=Nw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Nw=new(function(){function e(t,n){c(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Aw}),(function(e){return e.reset()})),Aw=function(){function e(){c(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Pw(e){ub.setTimeout((function(){throw e}),0)}function Rw(e,t){Ew||function(){var e=ub.Promise.resolve(void 0);Ew=function(){e.then(Mw)}}(),Dw||(Ew(),Dw=!0),Ow.add(e,t)}var Dw=!1,Ow=new Cw;function Mw(){for(var e;e=Sw();){try{e.h.call(e.g)}catch(n){Pw(n)}var t=Nw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Dw=!1}function Lw(e,t){_w.call(this),this.h=e||1,this.g=t||ub,this.j=gb(this.kb,this),this.l=Date.now()}function Fw(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Uw(e,t,n){if("function"===typeof e)n&&(e=gb(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gb(e.handleEvent,e)}return 2147483647<Number(t)?-1:ub.setTimeout(e,t||0)}function jw(e){e.g=Uw((function(){e.g=null,e.i&&(e.i=!1,jw(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}yb(Lw,_w),(ib=Lw.prototype).da=!1,ib.S=null,ib.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xw(this,"tick"),this.da&&(Fw(this),this.start()))}},ib.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ib.M=function(){Lw.Z.M.call(this),Fw(this),delete this.g};var Vw=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:jw(this)}},{key:"M",value:function(){za(y(n.prototype),"M",this).call(this),this.g&&(ub.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(kb);function qw(e){kb.call(this),this.h=e,this.g={}}yb(qw,kb);var Bw=[];function zw(e,t,n,r){Array.isArray(n)||(n&&(Bw[0]=n.toString()),n=Bw);for(var i=0;i<n.length;i++){var a=hw(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ww(e){Rb(e.g,(function(e,t){this.g.hasOwnProperty(t)&&gw(e)}),e),e.g={}}function Kw(){this.g=!0}function Hw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Tw(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}qw.prototype.M=function(){qw.Z.M.call(this),Ww(this)},qw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kw.prototype.Aa=function(){this.g=!1},Kw.prototype.info=function(){};var Gw={},Zw=null;function Qw(){return Zw=Zw||new _w}function Yw(e){ew.call(this,Gw.Ma,e)}function $w(e){var t=Qw();xw(t,new Yw(t,e))}function Xw(e,t){ew.call(this,Gw.STAT_EVENT,e),this.stat=t}function Jw(e){var t=Qw();xw(t,new Xw(t,e))}function e_(e,t){ew.call(this,Gw.Na,e),this.size=t}function t_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ub.setTimeout((function(){e()}),t)}Gw.Ma="serverreachability",yb(Yw,ew),Gw.STAT_EVENT="statevent",yb(Xw,ew),Gw.Na="timingevent",yb(e_,ew);var n_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},r_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function i_(){}function a_(e){return e.h||(e.h=e.i())}function o_(){}i_.prototype.h=null;var s_,u_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function c_(){ew.call(this,"d")}function l_(){ew.call(this,"c")}function f_(){}function h_(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new qw(this),this.P=p_,e=qb?125:void 0,this.W=new Lw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new d_}function d_(){this.i=null,this.g="",this.h=!1}yb(c_,ew),yb(l_,ew),yb(f_,i_),f_.prototype.g=function(){return new XMLHttpRequest},f_.prototype.i=function(){return{}},s_=new f_;var p_=45e3,v_={},g_={};function m_(e,t,n){e.K=1,e.v=V_(O_(t)),e.s=n,e.U=!0,y_(e,null)}function y_(e,t){e.F=Date.now(),__(e),e.A=O_(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),J_(n.h,"t",r),e.C=0,n=e.l.H,e.h=new d_,e.g=tI(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Vw(gb(e.Ia,e,e.g),e.O)),zw(e.V,e.g,"readystatechange",e.gb),t=e.H?Db(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),$w(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function k_(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function b_(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=w_(e,n))==g_){4==t&&(e.o=4,Jw(14),i=!1),Hw(e.j,e.m,null,"[Incomplete Response]");break}if(r==v_){e.o=4,Jw(15),Hw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Hw(e.j,e.m,r,null),E_(e,r)}k_(e)&&r!=g_&&r!=v_&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Jw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gx(t),t.L=!0,Jw(11))):(Hw(e.j,e.m,n,"[Invalid Chunked Response]"),S_(e),T_(e))}function w_(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?g_:(n=Number(t.substring(n,r)),isNaN(n)?v_:(r+=1)+n>t.length?g_:(t=t.substr(r,n),e.C=r+n,t))}function __(e){e.Y=Date.now()+e.P,x_(e,e.P)}function x_(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=t_(gb(e.eb,e),t)}function I_(e){e.B&&(ub.clearTimeout(e.B),e.B=null)}function T_(e){0==e.l.G||e.I||Yx(e.l,e)}function S_(e){I_(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Fw(e.W),Ww(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function E_(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||sx(n.i,e)))if(n.I=e.N,!e.J&&sx(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qx(n),Ux(n)}Hx(n),Jw(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=t_(gb(n.ab,n),6e3));if(1>=ox(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Xx(n,11)}else if((e.J||n.g==e)&&Qx(n),!Tb(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Cb(l,"spdy")||Cb(l,"quic")||Cb(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ux(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,j_(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=eI(r,r.H?r.la:null,r.W),d.J){cx(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(I_(p),__(p)),r.g=d}else Kx(r);0<n.l.length&&qx(n)}else"stop"!=a[0]&&"close"!=a[0]||Xx(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xx(n,7):Fx(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}$w(4)}catch(a){}}function C_(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(lb(e)||"string"===typeof e)_b(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(lb(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(lb(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function N_(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof N_)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function A_(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];P_(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)P_(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function P_(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ib=h_.prototype).setTimeout=function(e){this.P=e},ib.gb=function(e){e=e.target;var t=this.L;t&&3==Rx(e)?t.l():this.Ia(e)},ib.Ia=function(e){try{if(e==this.g)e:{var t=Rx(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||qb||this.g&&(this.h.h||this.g.ga()||Dx(this.g)))){this.I||4!=t||7==n||$w(8==n||0>=r?3:2),I_(this);var i=this.g.ba();this.N=i;t:if(k_(this)){var a=Dx(this.g);e="";var o=a.length,s=4==Rx(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){S_(this),T_(this);var u="";break t}this.h.i=new ub.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tb(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Jw(12),S_(this),T_(this);break e}Hw(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,E_(this,i)}this.U?(b_(this,t,u),qb&&this.i&&3==t&&(zw(this.V,this.W,"tick",this.fb),this.W.start())):(Hw(this.j,this.m,u,null),E_(this,u)),4==t&&S_(this),this.i&&!this.I&&(4==t?Yx(this.l,this):(this.i=!1,__(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Jw(12)):(this.o=0,Jw(13)),S_(this),T_(this)}}}catch(t){}},ib.fb=function(){if(this.g){var e=Rx(this.g),t=this.g.ga();this.C<t.length&&(I_(this),b_(this,e,t),this.i&&4!=e&&__(this))}},ib.cancel=function(){this.I=!0,S_(this)},ib.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&($w(3),Jw(17)),S_(this),this.o=2,T_(this)):x_(this,this.Y-e)},(ib=N_.prototype).R=function(){A_(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ib.T=function(){return A_(this),this.g.concat()},ib.get=function(e,t){return P_(this.h,e)?this.h[e]:t},ib.set=function(e,t){P_(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ib.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var R_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function D_(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof D_){this.g=void 0!==t?t:e.g,M_(this,e.j),this.s=e.s,L_(this,e.i),F_(this,e.m),this.l=e.l,t=e.h;var n=new Q_;n.i=t.i,t.g&&(n.g=new N_(t.g),n.h=t.h),U_(this,n),this.o=e.o}else e&&(n=String(e).match(R_))?(this.g=!!t,M_(this,n[1]||"",!0),this.s=q_(n[2]||""),L_(this,n[3]||"",!0),F_(this,n[4]),this.l=q_(n[5]||"",!0),U_(this,n[6]||"",!0),this.o=q_(n[7]||"")):(this.g=!!t,this.h=new Q_(null,this.g))}function O_(e){return new D_(e)}function M_(e,t,n){e.j=n?q_(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function L_(e,t,n){e.i=n?q_(t,!0):t}function F_(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function U_(e,t,n){t instanceof Q_?(e.h=t,function(e,t){t&&!e.j&&(Y_(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($_(this,t),J_(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=B_(t,G_)),e.h=new Q_(t,e.g))}function j_(e,t,n){e.h.set(t,n)}function V_(e){return j_(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function q_(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function B_(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,z_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function z_(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}D_.prototype.toString=function(){var e=[],t=this.j;t&&e.push(B_(t,W_,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(B_(t,W_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(B_(n,"/"==n.charAt(0)?H_:K_,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",B_(n,Z_)),e.join("")};var W_=/[#\/\?@]/g,K_=/[#\?:]/g,H_=/[#\?]/g,G_=/[#\?@]/g,Z_=/#/g;function Q_(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Y_(e){e.g||(e.g=new N_,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $_(e,t){Y_(e),t=ex(e,t),P_(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,P_((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&A_(e)))}function X_(e,t){return Y_(e),t=ex(e,t),P_(e.g.h,t)}function J_(e,t,n){$_(e,t),0<n.length&&(e.i=null,e.g.set(ex(e,t),Ib(n)),e.h+=n.length)}function ex(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ib=Q_.prototype).add=function(e,t){Y_(this),this.i=null,e=ex(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ib.forEach=function(e,t){Y_(this),this.g.forEach((function(n,r){_b(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ib.T=function(){Y_(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ib.R=function(e){Y_(this);var t=[];if("string"===typeof e)X_(this,e)&&(t=xb(t,this.g.get(ex(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xb(t,e[n])}return t},ib.set=function(e,t){return Y_(this),this.i=null,X_(this,e=ex(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ib.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ib.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var tx=f((function e(t,n){c(this,e),this.h=t,this.g=n}));function nx(e){this.l=e||ix,ub.PerformanceNavigationTiming?e=0<(e=ub.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ub.g&&ub.g.Ea&&ub.g.Ea()&&ub.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rx,ix=10;function ax(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ox(e){return e.h?1:e.g?e.g.size:0}function sx(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ux(e,t){e.g?e.g.add(t):e.h=t}function cx(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lx(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ib(e.i)}function fx(){}function hx(){this.g=new fx}function dx(e,t,n){var r=n||"";try{C_(e,(function(e,n){var i=e;fb(e)&&(i=Tw(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function px(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function vx(e){this.l=e.$b||null,this.j=e.ib||!1}function gx(e,t){_w.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=mx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nx.prototype.cancel=function(){if(this.i=lx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},fx.prototype.stringify=function(e){return ub.JSON.stringify(e,void 0)},fx.prototype.parse=function(e){return ub.JSON.parse(e,void 0)},yb(vx,i_),vx.prototype.g=function(){return new gx(this.l,this.j)},vx.prototype.i=(rx={},function(){return rx}),yb(gx,_w);var mx=0;function yx(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function kx(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bx(e)}function bx(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ib=gx.prototype).open=function(e,t){if(this.readyState!=mx)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bx(this)},ib.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ub).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ib.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kx(this)),this.readyState=mx},ib.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bx(this)),this.g&&(this.readyState=3,bx(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ub.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yx(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ib.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kx(this):bx(this),3==this.readyState&&yx(this)}},ib.Ua=function(e){this.g&&(this.response=this.responseText=e,kx(this))},ib.Ta=function(e){this.g&&(this.response=e,kx(this))},ib.ha=function(){this.g&&kx(this)},ib.setRequestHeader=function(e,t){this.v.append(e,t)},ib.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ib.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(gx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var wx=ub.JSON.parse;function _x(e){_w.call(this),this.headers=new N_,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xx,this.K=this.L=!1}yb(_x,_w);var xx="",Ix=/^https?$/i,Tx=["POST","PUT"];function Sx(e){return"content-type"==e.toLowerCase()}function Ex(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Cx(e),Ax(e)}function Cx(e){e.D||(e.D=!0,xw(e,"complete"),xw(e,"error"))}function Nx(e){if(e.h&&"undefined"!=typeof sb&&(!e.C[1]||4!=Rx(e)||2!=e.ba()))if(e.v&&4==Rx(e))Uw(e.Fa,0,e);else if(xw(e,"readystatechange"),4==Rx(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(R_)[1]||null;if(!a&&ub.self&&ub.self.location){var o=ub.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ix.test(a?a.toLowerCase():"")}t=i}if(t)xw(e,"complete"),xw(e,"success");else{e.m=6;try{var s=2<Rx(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Cx(e)}}finally{Ax(e)}}}function Ax(e,t){if(e.g){Px(e);var n=e.g,r=e.C[0]?cb:null;e.g=null,e.C=null,t||xw(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Px(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ub.clearTimeout(e.A),e.A=null)}function Rx(e){return e.g?e.g.readyState:0}function Dx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xx:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ox(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Rb(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):j_(e,t,n))}function Mx(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Lx(e){this.za=0,this.l=[],this.h=new Kw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mx("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mx("baseRetryDelayMs",5e3,e),this.$a=Mx("retryDelaySeedMs",1e4,e),this.Ya=Mx("forwardChannelMaxRetries",2,e),this.ra=Mx("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new nx(e&&e.concurrentRequestLimit),this.Ca=new hx,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Fx(e){if(jx(e),3==e.G){var t=e.V++,n=O_(e.F);j_(n,"SID",e.J),j_(n,"RID",t),j_(n,"TYPE","terminate"),zx(e,n),(t=new h_(e,e.h,t,void 0)).K=2,t.v=V_(O_(n)),n=!1,ub.navigator&&ub.navigator.sendBeacon&&(n=ub.navigator.sendBeacon(t.v.toString(),"")),!n&&ub.Image&&((new Image).src=t.v,n=!0),n||(t.g=tI(t.l,null),t.g.ea(t.v)),t.F=Date.now(),__(t)}Jx(e)}function Ux(e){e.g&&(Gx(e),e.g.cancel(),e.g=null)}function jx(e){Ux(e),e.u&&(ub.clearTimeout(e.u),e.u=null),Qx(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ub.clearTimeout(e.m),e.m=null)}function Vx(e,t){e.l.push(new tx(e.Za++,t)),3==e.G&&qx(e)}function qx(e){ax(e.i)||e.m||(e.m=!0,Rw(e.Ha,e),e.C=0)}function Bx(e,t){var n;n=t?t.m:e.V++;var r=O_(e.F);j_(r,"SID",e.J),j_(r,"RID",n),j_(r,"AID",e.U),zx(e,r),e.o&&e.s&&Ox(r,e.o,e.s),n=new h_(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Wx(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ux(e.i,n),m_(n,r,t)}function zx(e,t){e.j&&C_({},(function(e,n){j_(t,n,e)}))}function Wx(e,t,n){n=Math.min(e.l.length,n);var r=e.j?gb(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{dx(l,o,"req"+c+"_")}catch(NI){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Kx(e){e.g||e.u||(e.Y=1,Rw(e.Ga,e),e.A=0)}function Hx(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=t_(gb(e.Ga,e),$x(e,e.A)),e.A++,!0)}function Gx(e){null!=e.B&&(ub.clearTimeout(e.B),e.B=null)}function Zx(e){e.g=new h_(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=O_(e.oa);j_(t,"RID","rpc"),j_(t,"SID",e.J),j_(t,"CI",e.N?"0":"1"),j_(t,"AID",e.U),zx(e,t),j_(t,"TYPE","xmlhttp"),e.o&&e.s&&Ox(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=V_(O_(t)),n.s=null,n.U=!0,y_(n,e)}function Qx(e){null!=e.v&&(ub.clearTimeout(e.v),e.v=null)}function Yx(e,t){var n=null;if(e.g==t){Qx(e),Gx(e),e.g=null;var r=2}else{if(!sx(e.i,t))return;n=t.D,cx(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;xw(r=Qw(),new e_(r,n,t,i)),qx(e)}else Kx(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ox(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=t_(gb(e.Ha,e,t),$x(e,e.C)),e.C++,!0))}(e,t)||2==r&&Hx(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xx(e,5);break;case 4:Xx(e,10);break;case 3:Xx(e,6);break;default:Xx(e,2)}}function $x(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Xx(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=gb(e.jb,e);n||(n=new D_("//www.google.com/images/cleardot.gif"),ub.location&&"http"==ub.location.protocol||M_(n,"https"),V_(n)),function(e,t){var n=new Kw;if(ub.Image){var r=new Image;r.onload=mb(px,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mb(px,n,r,"TestLoadImage: error",!1,t),r.onabort=mb(px,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mb(px,n,r,"TestLoadImage: timeout",!1,t),ub.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Jw(2);e.G=0,e.j&&e.j.va(t),Jx(e),jx(e)}function Jx(e){e.G=0,e.I=-1,e.j&&(0==lx(e.i).length&&0==e.l.length||(e.i.i.length=0,Ib(e.l),e.l.length=0),e.j.ua())}function eI(e,t,n){var r=function(e){return e instanceof D_?O_(e):new D_(e,void 0)}(n);if(""!=r.i)t&&L_(r,t+"."+r.i),F_(r,r.m);else{var i=ub.location;r=function(e,t,n,r){var i=new D_(null,void 0);return e&&M_(i,e),t&&L_(i,t),n&&F_(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Rb(e.aa,(function(e,t){j_(r,t,e)})),t=e.D,n=e.sa,t&&n&&j_(r,t,n),j_(r,"VER",e.ma),zx(e,r),r}function tI(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new _x(new vx({ib:!0})):new _x(e.qa)).L=e.H,t}function nI(){}function rI(){if(jb&&!(10<=Number(Xb)))throw Error("Environmental error: no available transport.")}function iI(e,t){_w.call(this),this.g=new Lx(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Tb(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tb(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new sI(this)}function aI(e){c_.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function oI(){l_.call(this),this.status=1}function sI(e){this.g=e}(ib=_x.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():s_.g(),this.C=this.u?a_(this.u):a_(s_),this.g.onreadystatechange=gb(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ex(this,a)}e=n||"";var i=new N_(this.headers);r&&C_(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Sx,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=ub.FormData&&e instanceof ub.FormData,!(0<=wb(Tx,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Px(this),0<this.B&&((this.K=function(e){return jb&&Yb()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gb(this.pa,this)):this.A=Uw(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ex(this,a)}},ib.pa=function(){"undefined"!=typeof sb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xw(this,"timeout"),this.abort(8))},ib.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xw(this,"complete"),xw(this,"abort"),Ax(this))},ib.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ax(this,!0)),_x.Z.M.call(this)},ib.Fa=function(){this.s||(this.F||this.v||this.l?Nx(this):this.cb())},ib.cb=function(){Nx(this)},ib.ba=function(){try{return 2<Rx(this)?this.g.status:-1}catch(rx){return-1}},ib.ga=function(){try{return this.g?this.g.responseText:""}catch(rx){return""}},ib.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wx(t)}},ib.Da=function(){return this.m},ib.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(ib=Lx.prototype).ma=8,ib.G=1,ib.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ib.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new h_(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Mb(n=Db(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Wx(this,t,r),j_(i=O_(this.F),"RID",e),j_(i,"CVER",22),this.D&&j_(i,"X-HTTP-Session-Id",this.D),zx(this,i),this.o&&n&&Ox(i,this.o,n),ux(this.i,t),this.Ra&&j_(i,"TYPE","init"),this.ja?(j_(i,"$req",r),j_(i,"SID","null"),t.$=!0,m_(t,i,null)):m_(t,i,r),this.G=2}}else 3==this.G&&(e?Bx(this,e):0==this.l.length||ax(this.i)||Bx(this))},ib.Ga=function(){if(this.u=null,Zx(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=t_(gb(this.bb,this),e)}},ib.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jw(10),Ux(this),Zx(this))},ib.ab=function(){null!=this.v&&(this.v=null,Ux(this),Hx(this),Jw(19))},ib.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Jw(2)):(this.h.info("Failed to ping google.com"),Jw(1))},(ib=nI.prototype).xa=function(){},ib.wa=function(){},ib.va=function(){},ib.ua=function(){},ib.Oa=function(){},rI.prototype.g=function(e,t){return new iI(e,t)},yb(iI,_w),iI.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Rw(gb(e.hb,e,t))),Jw(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=eI(e,null,e.W),qx(e)},iI.prototype.close=function(){Fx(this.g)},iI.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Vx(this.g,t)}else this.v?((t={}).__data__=Tw(e),Vx(this.g,t)):Vx(this.g,e)},iI.prototype.M=function(){this.g.j=null,delete this.j,Fx(this.g),delete this.g,iI.Z.M.call(this)},yb(aI,c_),yb(oI,l_),yb(sI,nI),sI.prototype.xa=function(){xw(this.g,"a")},sI.prototype.wa=function(e){xw(this.g,new aI(e))},sI.prototype.va=function(e){xw(this.g,new oI(e))},sI.prototype.ua=function(){xw(this.g,"b")},rI.prototype.createWebChannel=rI.prototype.g,iI.prototype.send=iI.prototype.u,iI.prototype.open=iI.prototype.m,iI.prototype.close=iI.prototype.close,n_.NO_ERROR=0,n_.TIMEOUT=8,n_.HTTP_ERROR=6,r_.COMPLETE="complete",o_.EventType=u_,u_.OPEN="a",u_.CLOSE="b",u_.ERROR="c",u_.MESSAGE="d",_w.prototype.listen=_w.prototype.N,_x.prototype.listenOnce=_x.prototype.O,_x.prototype.getLastError=_x.prototype.La,_x.prototype.getLastErrorCode=_x.prototype.Da,_x.prototype.getStatus=_x.prototype.ba,_x.prototype.getResponseJson=_x.prototype.Qa,_x.prototype.getResponseText=_x.prototype.ga,_x.prototype.send=_x.prototype.ea;var uI=ob.createWebChannelTransport=function(){return new rI},cI=ob.getStatEventTarget=function(){return Qw()},lI=ob.ErrorCode=n_,fI=ob.EventType=r_,hI=ob.Event=Gw,dI=ob.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pI=ob.FetchXmlHttpFactory=vx,vI=ob.WebChannel=o_,gI=ob.XhrIo=_x,mI="@firebase/firestore",yI=function(){function e(t){c(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yI.UNAUTHENTICATED=new yI(null),yI.GOOGLE_CREDENTIALS=new yI("google-credentials-uid"),yI.FIRST_PARTY=new yI("first-party-uid"),yI.MOCK_USER=new yI("mock-user");var kI="9.8.0",bI=new Me("@firebase/firestore");function wI(){return bI.logLevel}function _I(e){if(bI.logLevel<=Ce.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(TI);bI.debug.apply(bI,["Firestore (".concat(kI,"): ").concat(e)].concat((0,xe.Z)(i)))}}function xI(e){if(bI.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(TI);bI.error.apply(bI,["Firestore (".concat(kI,"): ").concat(e)].concat((0,xe.Z)(i)))}}function II(e){if(bI.logLevel<=Ce.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(TI);bI.warn.apply(bI,["Firestore (".concat(kI,"): ").concat(e)].concat((0,xe.Z)(i)))}}function TI(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function SI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(kI,") INTERNAL ASSERTION FAILED: ")+e;throw xI(t),new Error(t)}function EI(e,t){e||SI()}function CI(e,t){return e}var NI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},AI=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return f(n)}(Z),PI=f((function e(){var t=this;c(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),RI=f((function e(t,n){c(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),DI=function(){function e(){c(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yI.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),OI=function(){function e(t){c(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),MI=function(){function e(t){c(this,e),this.t=t,this.currentUser=yI.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new PI;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new PI,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){_I("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(_I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new PI)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(_I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(EI("string"==typeof n.accessToken),new RI(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return EI(null===e||"string"==typeof e),new yI(e)}}]),e}(),LI=f((function e(t,n,r){c(this,e),this.type="FirstParty",this.user=yI.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),FI=function(){function e(t,n,r){c(this,e),this.h=t,this.l=n,this.m=r}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new LI(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yI.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),UI=f((function e(t){c(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),jI=function(){function e(t){c(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&_I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,_I("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){_I("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):_I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(EI("string"==typeof t.token),e.p=t.token,new UI(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),VI=function(){function e(t,n){var r=this;c(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function qI(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}VI.A=-1;var BI=function(){function e(){c(this,e)}return f(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=qI(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function zI(e,t){return e<t?-1:e>t?1:0}function WI(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function KI(e){return e+"\0"}var HI=function(){function e(t,n){if(c(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new AI(NI.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new AI(NI.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new AI(NI.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new AI(NI.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?zI(this.nanoseconds,e.nanoseconds):zI(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),GI=function(){function e(t){c(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new HI(0,0))}},{key:"max",value:function(){return new e(new HI(253402300799,999999999))}}]),e}();function ZI(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function QI(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function YI(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var $I=function(){function e(t,n,r){c(this,e),void 0===n?n=0:n>t.length&&SI(),void 0===r?r=t.length-n:r>t.length-n&&SI(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),XI=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new AI(NI.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,xe.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}($I),JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eT=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return JI.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new AI(NI.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new AI(NI.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new AI(NI.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new AI(NI.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}($I),tT=function(){function e(t){c(this,e),this.fields=t,t.sort(eT.comparator)}return f(e,[{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return WI(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var nT=function(e){function t(e){c(this,t),this.binaryString=e}return f(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return zI(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();nT.EMPTY_BYTE_STRING=new nT("");var rT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iT(e){if(EI(!!e),"string"==typeof e){var t=0,n=rT.exec(e);if(EI(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:aT(e.seconds),nanos:aT(e.nanos)}}function aT(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function oT(e){return"string"==typeof e?nT.fromBase64String(e):nT.fromUint8Array(e)}function sT(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uT(e){var t=e.mapValue.fields.__previous_value__;return sT(t)?uT(t):t}function cT(e){var t=iT(e.mapValue.fields.__local_write_time__.timestampValue);return new HI(t.seconds,t.nanos)}var lT=f((function e(t,n,r,i,a,o,s,u){c(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),fT=function(){function e(t,n){c(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function hT(e){return null==e}function dT(e){return 0===e&&1/e==-1/0}function pT(e){return"number"==typeof e&&Number.isInteger(e)&&!dT(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var vT=function(){function e(t){c(this,e),this.path=t}return f(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===XI.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(XI.fromString(t))}},{key:"fromName",value:function(t){return new e(XI.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(XI.emptyPath())}},{key:"comparator",value:function(e,t){return XI.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new XI(t.slice()))}}]),e}(),gT={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mT={nullValue:"NULL_VALUE"};function yT(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sT(e)?4:RT(e)?9007199254740991:10:SI()}function kT(e,t){if(e===t)return!0;var n=yT(e);if(n!==yT(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cT(e).isEqual(cT(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=iT(e.timestampValue),r=iT(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return oT(e.bytesValue).isEqual(oT(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return aT(e.geoPointValue.latitude)===aT(t.geoPointValue.latitude)&&aT(e.geoPointValue.longitude)===aT(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return aT(e.integerValue)===aT(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=aT(e.doubleValue),r=aT(t.doubleValue);return n===r?dT(n)===dT(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return WI(e.arrayValue.values||[],t.arrayValue.values||[],kT);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ZI(n)!==ZI(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kT(n[i],r[i])))return!1;return!0}(e,t);default:return SI()}}function bT(e,t){return void 0!==(e.values||[]).find((function(e){return kT(e,t)}))}function wT(e,t){if(e===t)return 0;var n=yT(e),r=yT(t);if(n!==r)return zI(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zI(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=aT(e.integerValue||e.doubleValue),r=aT(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _T(e.timestampValue,t.timestampValue);case 4:return _T(cT(e),cT(t));case 5:return zI(e.stringValue,t.stringValue);case 6:return function(e,t){var n=oT(e),r=oT(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=zI(n[i],r[i]);if(0!==a)return a}return zI(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=zI(aT(e.latitude),aT(t.latitude));return 0!==n?n:zI(aT(e.longitude),aT(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wT(n[i],r[i]);if(a)return a}return zI(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===gT.mapValue&&t===gT.mapValue)return 0;if(e===gT.mapValue)return 1;if(t===gT.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=zI(r[o],a[o]);if(0!==s)return s;var u=wT(n[r[o]],i[a[o]]);if(0!==u)return u}return zI(r.length,a.length)}(e.mapValue,t.mapValue);default:throw SI()}}function _T(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zI(e,t);var n=iT(e),r=iT(t),i=zI(n.seconds,r.seconds);return 0!==i?i:zI(n.nanos,r.nanos)}function xT(e){return IT(e)}function IT(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=iT(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?oT(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vT.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=IT(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=p(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(IT(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):SI();var t,n}function TT(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ST(e){return!!e&&"integerValue"in e}function ET(e){return!!e&&"arrayValue"in e}function CT(e){return!!e&&"nullValue"in e}function NT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function AT(e){return!!e&&"mapValue"in e}function PT(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return QI(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=PT(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=PT(e.arrayValue.values[r]);return n}return Object.assign({},e)}function RT(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function DT(e){return"nullValue"in e?mT:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?TT(fT.empty(),vT.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:SI()}function OT(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?TT(fT.empty(),vT.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?gT:SI()}function MT(e,t){var n=wT(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function LT(e,t){var n=wT(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var FT=function(){function e(t){c(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!AT(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=PT(t)}},{key:"setAll",value:function(e){var t=this,n=eT.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=PT(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());AT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return kT(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];AT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){QI(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(PT(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function UT(e){var t=[];return QI(e.fields,(function(e,n){var r=new eT([e]);if(AT(n)){var i=UT(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new tT(t)}var jT=function(){function e(t,n,r,i,a,o){c(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=FT.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=FT.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,GI.min(),GI.min(),FT.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,GI.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,GI.min(),FT.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,GI.min(),FT.empty(),2)}}]),e}(),VT=f((function e(t,n,r,i){c(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function qT(e){return e.fields.find((function(e){return 2===e.kind}))}function BT(e){return e.fields.filter((function(e){return 2!==e.kind}))}VT.UNKNOWN_ID=-1;var zT=f((function e(t,n){c(this,e),this.fieldPath=t,this.kind=n})),WT=function(){function e(t,n){c(this,e),this.sequenceNumber=t,this.offset=n}return f(e,null,[{key:"empty",value:function(){return new e(0,GT.min())}}]),e}();function KT(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=GI.fromTimestamp(1e9===r?new HI(n+1,0):new HI(n,r));return new GT(i,vT.empty(),t)}function HT(e){return new GT(e.readTime,e.key,-1)}var GT=function(){function e(t,n,r){c(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return f(e,null,[{key:"min",value:function(){return new e(GI.min(),vT.empty(),-1)}},{key:"max",value:function(){return new e(GI.max(),vT.empty(),-1)}}]),e}();function ZT(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=vT.comparator(e.documentKey,t.documentKey))?n:zI(e.largestBatchId,t.largestBatchId)}var QT=function(){function e(t,n){c(this,e),this.comparator=t,this.root=n||$T.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$T.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$T.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new YT(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new YT(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new YT(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new YT(this.root,e,this.comparator,!0)}}]),e}(),YT=function(){function e(t,n,r,i){c(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),$T=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw SI();if(this.right.isRed())throw SI();var e=this.left.check();if(e!==this.right.check())throw SI();return e+(this.isRed()?0:1)}}]),e}();$T.EMPTY=null,$T.RED=!0,$T.BLACK=!1,$T.EMPTY=new(function(){function e(){c(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw SI()}},{key:"value",get:function(){throw SI()}},{key:"color",get:function(){throw SI()}},{key:"left",get:function(){throw SI()}},{key:"right",get:function(){throw SI()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new $T(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var XT=function(){function e(t){c(this,e),this.comparator=t,this.data=new QT(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new JT(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new JT(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),JT=function(){function e(t){c(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function eS(e){return e.hasNext()?e.getNext():void 0}var tS=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;c(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function nS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new tS(e,t,n,r,i,a,o)}function rS(e){var t=CI(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+xT(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),hT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xT(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xT(e)})).join(",")),t.P=n}return t.P}function iS(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!bS(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!kT(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_S(e.startAt,t.startAt)&&_S(e.endAt,t.endAt)}function aS(e){return vT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function oS(e,t){return e.filters.filter((function(e){return e instanceof cS&&e.field.isEqual(t)}))}function sS(e,t,n){var r,i=mT,a=!0,o=p(oS(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=mT,c=!0;switch(s.op){case"<":case"<=":u=DT(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=mT}MT({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];MT({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function uS(e,t,n){var r,i=gT,a=!0,o=p(oS(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=gT,c=!0;switch(s.op){case">=":case">":u=OT(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=gT}LT({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];LT({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var cS=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(wT(t,this.value)):null!==t&&yT(this.value)===yT(t)&&this.v(wT(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return SI()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new lS(e,t,r):"array-contains"===t?new pS(e,r):"in"===t?new vS(e,r):"not-in"===t?new gS(e,r):"array-contains-any"===t?new mS(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new fS(e,n):new hS(e,n)}}]),n}(function(){return f((function e(){c(this,e)}))}()),lS=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,i)).key=vT.fromName(i.referenceValue),a}return f(n,[{key:"matches",value:function(e){var t=vT.comparator(e.key,this.key);return this.v(t)}}]),n}(cS),fS=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"in",r)).keys=dS("in",r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cS),hS=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"not-in",r)).keys=dS("not-in",r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cS);function dS(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vT.fromName(e.referenceValue)}))}var pS=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ET(t)&&bT(t.arrayValue,this.value)}}]),n}(cS),vS=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&bT(this.value.arrayValue,t)}}]),n}(cS),gS=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(bT(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!bT(this.value.arrayValue,t)}}]),n}(cS),mS=function(e){m(n,e);var t=_(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ET(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return bT(t.value.arrayValue,e)}))}}]),n}(cS),yS=f((function e(t,n){c(this,e),this.position=t,this.inclusive=n})),kS=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";c(this,e),this.field=t,this.dir=n}));function bS(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function wS(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?vT.comparator(vT.fromName(o.referenceValue),n.key):wT(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _S(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!kT(e.position[n],t.position[n]))return!1;return!0}var xS=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;c(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function IS(e,t,n,r,i,a,o,s){return new xS(e,t,n,r,i,a,o,s)}function TS(e){return new xS(e)}function SS(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ES(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function CS(e){return null!==e.collectionGroup}function NS(e){var t=CI(e);if(null===t.D){t.D=[];var n=ES(t),r=SS(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new kS(n)),t.D.push(new kS(eT.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new kS(eT.keyField(),u))}}}return t.D}function AS(e){var t=CI(e);if(!t.C)if("F"===t.limitType)t.C=nS(t.path,t.collectionGroup,NS(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(NS(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new kS(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new yS(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new yS(t.startAt.position,t.startAt.inclusive):null;t.C=nS(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function PS(e,t,n){return new xS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function RS(e,t){return iS(AS(e),AS(t))&&e.limitType===t.limitType}function DS(e){return"".concat(rS(AS(e)),"|lt:").concat(e.limitType)}function OS(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(xT(t.value));var t})).join(", "),"]")),hT(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xT(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xT(e)})).join(",")),"Target(".concat(t,")")}(AS(e)),"; limitType=").concat(e.limitType,")")}function MS(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vT.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=wS(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,NS(e),t))&&!(e.endAt&&!function(e,t,n){var r=wS(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,NS(e),t))}(e,t)}function LS(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function FS(e){return function(t,n){var r,i=!1,a=p(NS(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=US(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function US(e,t,n){var r=e.field.isKeyField()?vT.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wT(r,i):SI()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return SI()}}function jS(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dT(t)?"-0":t}}function VS(e){return{integerValue:""+e}}function qS(e,t){return pT(t)?VS(t):jS(e,t)}var BS=f((function e(){c(this,e),this._=void 0}));function zS(e,t,n){return e instanceof HS?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof GS?ZS(e,t):e instanceof QS?YS(e,t):function(e,t){var n=KS(e,t),r=XS(n)+XS(e.k);return ST(n)&&ST(e.k)?VS(r):jS(e.M,r)}(e,t)}function WS(e,t,n){return e instanceof GS?ZS(e,t):e instanceof QS?YS(e,t):n}function KS(e,t){return e instanceof $S?ST(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var HS=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n)}(BS),GS=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return f(n)}(BS);function ZS(e,t){var n,r=JS(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return kT(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var QS=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return f(n)}(BS);function YS(e,t){var n,r=JS(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!kT(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $S=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).M=e,i.k=r,i}return f(n)}(BS);function XS(e){return aT(e.integerValue||e.doubleValue)}function JS(e){return ET(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var eE=f((function e(t,n){c(this,e),this.field=t,this.transform=n}));var tE=f((function e(t,n){c(this,e),this.version=t,this.transformResults=n})),nE=function(){function e(t,n){c(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function rE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var iE=f((function e(){c(this,e)}));function aE(e,t,n){e instanceof lE?function(e,t,n){var r=e.value.clone(),i=dE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fE?function(e,t,n){if(rE(e.precondition,t)){var r=dE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function oE(e,t,n){e instanceof lE?function(e,t,n){if(rE(e.precondition,t)){var r=e.value.clone(),i=pE(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(cE(t),r).setHasLocalMutations()}}(e,t,n):e instanceof fE?function(e,t,n){if(rE(e.precondition,t)){var r=pE(e.fieldTransforms,n,t),i=t.data;i.setAll(hE(e)),i.setAll(r),t.convertToFoundDocument(cE(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){rE(e.precondition,t)&&t.convertToNoDocument(GI.min())}(e,t)}function sE(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=KS(a.transform,o||null);null!=s&&(null==r&&(r=FT.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function uE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&WI(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof GS&&t instanceof GS||e instanceof QS&&t instanceof QS?WI(e.elements,t.elements,kT):e instanceof $S&&t instanceof $S?kT(e.k,t.k):e instanceof HS&&t instanceof HS}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function cE(e){return e.isFoundDocument()?e.version:GI.min()}var lE=function(e){m(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return c(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return f(n)}(iE),fE=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return c(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return f(n)}(iE);function hE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function dE(e,t,n){var r=new Map;EI(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,WS(o,s,n[i]))}return r}function pE(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,zS(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var vE,gE,mE=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return f(n)}(iE),yE=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return f(n)}(iE),kE=f((function e(t){c(this,e),this.count=t}));function bE(e){switch(e){default:return SI();case NI.CANCELLED:case NI.UNKNOWN:case NI.DEADLINE_EXCEEDED:case NI.RESOURCE_EXHAUSTED:case NI.INTERNAL:case NI.UNAVAILABLE:case NI.UNAUTHENTICATED:return!1;case NI.INVALID_ARGUMENT:case NI.NOT_FOUND:case NI.ALREADY_EXISTS:case NI.PERMISSION_DENIED:case NI.FAILED_PRECONDITION:case NI.ABORTED:case NI.OUT_OF_RANGE:case NI.UNIMPLEMENTED:case NI.DATA_LOSS:return!0}}function wE(e){if(void 0===e)return xI("GRPC error has no .code"),NI.UNKNOWN;switch(e){case vE.OK:return NI.OK;case vE.CANCELLED:return NI.CANCELLED;case vE.UNKNOWN:return NI.UNKNOWN;case vE.DEADLINE_EXCEEDED:return NI.DEADLINE_EXCEEDED;case vE.RESOURCE_EXHAUSTED:return NI.RESOURCE_EXHAUSTED;case vE.INTERNAL:return NI.INTERNAL;case vE.UNAVAILABLE:return NI.UNAVAILABLE;case vE.UNAUTHENTICATED:return NI.UNAUTHENTICATED;case vE.INVALID_ARGUMENT:return NI.INVALID_ARGUMENT;case vE.NOT_FOUND:return NI.NOT_FOUND;case vE.ALREADY_EXISTS:return NI.ALREADY_EXISTS;case vE.PERMISSION_DENIED:return NI.PERMISSION_DENIED;case vE.FAILED_PRECONDITION:return NI.FAILED_PRECONDITION;case vE.ABORTED:return NI.ABORTED;case vE.OUT_OF_RANGE:return NI.OUT_OF_RANGE;case vE.UNIMPLEMENTED:return NI.UNIMPLEMENTED;case vE.DATA_LOSS:return NI.DATA_LOSS;default:return SI()}}(gE=vE||(vE={}))[gE.OK=0]="OK",gE[gE.CANCELLED=1]="CANCELLED",gE[gE.UNKNOWN=2]="UNKNOWN",gE[gE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gE[gE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gE[gE.NOT_FOUND=5]="NOT_FOUND",gE[gE.ALREADY_EXISTS=6]="ALREADY_EXISTS",gE[gE.PERMISSION_DENIED=7]="PERMISSION_DENIED",gE[gE.UNAUTHENTICATED=16]="UNAUTHENTICATED",gE[gE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gE[gE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gE[gE.ABORTED=10]="ABORTED",gE[gE.OUT_OF_RANGE=11]="OUT_OF_RANGE",gE[gE.UNIMPLEMENTED=12]="UNIMPLEMENTED",gE[gE.INTERNAL=13]="INTERNAL",gE[gE.UNAVAILABLE=14]="UNAVAILABLE",gE[gE.DATA_LOSS=15]="DATA_LOSS";var _E=function(){function e(t,n){c(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return f(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=(0,o.Z)(r.value,2),s=a[0],u=a[1];if(this.equalsFn(s,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){QI(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=(0,o.Z)(r.value,2),s=a[0],u=a[1];e(s,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return YI(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),xE=new QT(vT.comparator);function IE(){return xE}var TE=new QT(vT.comparator);function SE(){for(var e=TE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function EE(){return new _E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var CE=new QT(vT.comparator),NE=new XT(vT.comparator);function AE(){for(var e=NE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var PE=new XT(zI);function RE(){return PE}var DE=function(){function e(t,n,r,i,a){c(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,OE.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(GI.min(),r,RE(),IE(),AE())}}]),e}(),OE=function(){function e(t,n,r,i,a){c(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(nT.EMPTY_BYTE_STRING,n,AE(),AE(),AE())}}]),e}(),ME=f((function e(t,n,r,i){c(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),LE=f((function e(t,n){c(this,e),this.targetId=t,this.$=n})),FE=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nT.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),UE=function(){function e(){c(this,e),this.B=0,this.L=qE(),this.U=nT.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return f(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=AE(),t=AE(),n=AE();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:SI()}})),new OE(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=qE()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),jE=function(){function e(t){c(this,e),this.nt=t,this.st=new Map,this.it=IE(),this.rt=VE(),this.ot=new XT(zI)}return f(e,[{key:"ut",value:function(e){var t,n=p(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:SI()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(aS(i))if(0===n){var a=new vT(i.path);this.ct(t,a,jT.newNoDocument(a,GI.min()))}else EI(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&aS(a.target)){var o=new vT(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,jT.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=AE();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new DE(e,n,this.ot,this.it,r);return this.it=IE(),this.rt=VE(),this.ot=new XT(zI),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new UE,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new XT(zI),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||_I("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new UE),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function VE(){return new QT(vT.comparator)}function qE(){return new QT(vT.comparator)}var BE={asc:"ASCENDING",desc:"DESCENDING"},zE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WE=f((function e(t,n){c(this,e),this.databaseId=t,this.N=n}));function KE(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function HE(e,t){return e.N?t.toBase64():t.toUint8Array()}function GE(e,t){return KE(e,t.toTimestamp())}function ZE(e){return EI(!!e),GI.fromTimestamp(function(e){var t=iT(e);return new HI(t.seconds,t.nanos)}(e))}function QE(e,t){return function(e){return new XI(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function YE(e){var t=XI.fromString(e);return EI(kC(t)),t}function $E(e,t){return QE(e.databaseId,t.path)}function XE(e,t){var n=YE(t);if(n.get(1)!==e.databaseId.projectId)throw new AI(NI.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new AI(NI.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vT(nC(n))}function JE(e,t){return QE(e.databaseId,t)}function eC(e){var t=YE(e);return 4===t.length?XI.emptyPath():nC(t)}function tC(e){return new XI(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nC(e){return EI(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rC(e,t,n){return{name:$E(e,t),fields:n.value.mapValue.fields}}function iC(e,t,n){var r=XE(e,t.name),i=ZE(t.updateTime),a=new FT({mapValue:{fields:t.fields}}),o=jT.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function aC(e,t){return"found"in t?function(e,t){EI(!!t.found),t.found.name,t.found.updateTime;var n=XE(e,t.found.name),r=ZE(t.found.updateTime),i=new FT({mapValue:{fields:t.found.fields}});return jT.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){EI(!!t.missing),EI(!!t.readTime);var n=XE(e,t.missing),r=ZE(t.readTime);return jT.newNoDocument(n,r)}(e,t):SI()}function oC(e,t){var n;if(t instanceof lE)n={update:rC(e,t.key,t.value)};else if(t instanceof mE)n={delete:$E(e,t.key)};else if(t instanceof fE)n={update:rC(e,t.key,t.data),updateMask:yC(t.fieldMask)};else{if(!(t instanceof yE))return SI();n={verify:$E(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof HS)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof GS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof QS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $S)return{fieldPath:t.field.canonicalString(),increment:n.k};throw SI()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:GE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:SI()}(e,t.precondition)),n}function sC(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?nE.updateTime(ZE(e.updateTime)):void 0!==e.exists?nE.exists(e.exists):nE.none()}(t.currentDocument):nE.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)EI("REQUEST_TIME"===t.setToServerValue),n=new HS;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new GS(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new QS(i)}else"increment"in t?n=new $S(e,t.increment):SI();var a=eT.fromServerFormat(t.fieldPath);return new eE(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=XE(e,t.update.name),a=new FT({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new tT(t.map((function(e){return eT.fromServerFormat(e)})))}(t.updateMask);return new fE(i,a,o,n,r)}return new lE(i,a,n,r)}if(t.delete){var s=XE(e,t.delete);return new mE(s,n)}if(t.verify){var u=XE(e,t.verify);return new yE(u,n)}return SI()}function uC(e,t){return{documents:[JE(e,t.path)]}}function cC(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=JE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=JE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(NT(e.value))return{unaryFilter:{field:pC(e.field),op:"IS_NAN"}};if(CT(e.value))return{unaryFilter:{field:pC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(NT(e.value))return{unaryFilter:{field:pC(e.field),op:"IS_NOT_NAN"}};if(CT(e.value))return{unaryFilter:{field:pC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pC(e.field),op:dC(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:pC(e.field),direction:hC(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||hT(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function lC(e){var t=eC(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){EI(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=fC(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new kS(vC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return hT(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new yS(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new yS(n,t)}(n.endAt)),IS(t,i,s,o,u,"F",c,l)}function fC(e){return e?void 0!==e.unaryFilter?[mC(e)]:void 0!==e.fieldFilter?[gC(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return fC(e)})).reduce((function(e,t){return e.concat(t)})):SI():[]}function hC(e){return BE[e]}function dC(e){return zE[e]}function pC(e){return{fieldPath:e.canonicalString()}}function vC(e){return eT.fromServerFormat(e.fieldPath)}function gC(e){return cS.create(vC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return SI()}}(e.fieldFilter.op),e.fieldFilter.value)}function mC(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vC(e.unaryFilter.field);return cS.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vC(e.unaryFilter.field);return cS.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vC(e.unaryFilter.field);return cS.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vC(e.unaryFilter.field);return cS.create(i,"!=",{nullValue:"NULL_VALUE"});default:return SI()}}function yC(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function kC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function bC(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_C(t)),t=wC(e.get(n),t);return _C(t)}function wC(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _C(e){return e+"\x01\x01"}function xC(e){var t=e.length;if(EI(t>=2),2===t)return EI("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),XI.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&SI(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:SI()}a=o+2}return new XI(r)}var IC=["userId","batchId"];function TC(e,t){return[e,bC(t)]}function SC(e,t,n){return[e,bC(t),n]}var EC={},CC=["prefixPath","collectionGroup","readTime","documentId"],NC=["prefixPath","collectionGroup","documentId"],AC=["collectionGroup","readTime","prefixPath","documentId"],PC=["canonicalId","targetId"],RC=["targetId","path"],DC=["path","targetId"],OC=["collectionId","parent"],MC=["indexId","uid"],LC=["uid","sequenceNumber"],FC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UC=["indexId","uid","orderedDocumentKey"],jC=["userId","collectionPath","documentId"],VC=["userId","collectionPath","largestBatchId"],qC=["userId","collectionGroup","largestBatchId"],BC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zC=[].concat((0,xe.Z)(BC),["documentOverlays"]),WC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KC=[].concat(WC,["indexConfiguration","indexState","indexEntries"]),HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",GC=function(){function e(){c(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),ZC=function(){function e(t){var n=this;c(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&SI(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),QC=function(){function e(t,n){var r=this;c(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new PI,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new XC(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=rN(e.target.error);r.At.reject(new XC(t,n))}}return f(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(_I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new eN(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new XC(n,t)}}}]),e}(),YC=function(){function e(t,n,r){c(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(U())&&xI("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f(e,[{key:"Nt",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return _I("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new XC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new AI(NI.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new AI(NI.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new XC(t,n))},i.onupgradeneeded=function(e){_I("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){_I("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s,c,l=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(u().mark((function e(){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Nt(t);case 2:return l.db=e.sent,n=QC.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),ZC.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c="FirebaseError"!==e.t1.name&&o<3,_I("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return _I("SimpleDb","Removing database:",e),tN(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!K())return!1;if(e.St())return!0;var t=U(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$C=function(){function e(t){c(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return f(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return tN(this.Ft.delete())}}]),e}(),XC=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,NI.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return f(n)}(AI);function JC(e){return"IndexedDbTransactionError"===e.name}var eN=function(){function e(t){c(this,e),this.store=t}return f(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(_I("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(_I("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),tN(n)}},{key:"add",value:function(e){return _I("SimpleDb","ADD",this.store.name,e,e),tN(this.store.add(e))}},{key:"get",value:function(e){var t=this;return tN(this.store.get(e)).next((function(n){return void 0===n&&(n=null),_I("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return _I("SimpleDb","DELETE",this.store.name,e),tN(this.store.delete(e))}},{key:"count",value:function(){return _I("SimpleDb","COUNT",this.store.name),tN(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ZC((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ZC((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){_I("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new ZC((function(n,r){t.onerror=function(e){var t=rN(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new ZC((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $C(i),o=t(i.primaryKey,i.value,a);if(o instanceof ZC){var s=o.catch((function(e){return a.done(),ZC.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return ZC.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function tN(e){return new ZC((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=rN(e.target.error);n(t)}}))}var nN=!1;function rN(e){var t=YC.Vt(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new AI("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return nN||(nN=!0,setTimeout((function(){throw r}),0)),r}}return e}var iN=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return f(n)}(GC);function aN(e,t){var n=CI(e);return YC.xt(n.Ht,t)}var oN=function(){function e(t,n,r,i){c(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&aE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=p(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&oE(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&oE(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(GI.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),AE())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&WI(this.mutations,e.mutations,(function(e,t){return uE(e,t)}))&&WI(this.baseMutations,e.baseMutations,(function(e,t){return uE(e,t)}))}}]),e}(),sN=function(){function e(t,n,r,i){c(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){EI(t.mutations.length===r.length);for(var i=CE,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),uN=function(){function e(t,n){c(this,e),this.largestBatchId=t,this.mutation=n}return f(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),cN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:GI.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:GI.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nT.EMPTY_BYTE_STRING;c(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),lN=f((function e(t){c(this,e),this.Jt=t}));function fN(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hN(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:$E(e,t.key),fields:t.data.value.mapValue.fields,updateTime:KE(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:dN(t.version)};else{if(!t.isUnknownDocument())return SI();r.unknownDocument={path:n.path.toArray(),version:dN(t.version)}}return r}function hN(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dN(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function pN(e){var t=new HI(e.seconds,e.nanoseconds);return GI.fromTimestamp(t)}function vN(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sC(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return sC(e.Jt,t)})),s=HI.fromMillis(t.localWriteTimeMs);return new oN(t.batchId,s,n,o)}function gN(e){var t,n,r=pN(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?pN(e.lastLimboFreeSnapshotVersion):GI.min();return void 0!==e.query.documents?(EI(1===(n=e.query).documents.length),t=AS(TS(eC(n.documents[0])))):t=function(e){return AS(lC(e))}(e.query),new cN(t,e.targetId,0,e.lastListenSequenceNumber,r,i,nT.fromBase64String(e.resumeToken))}function mN(e,t){var n,r=dN(t.snapshotVersion),i=dN(t.lastLimboFreeSnapshotVersion);n=aS(t.target)?uC(e.Jt,t.target):cC(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:rS(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function yN(e){var t=lC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?PS(t,t.limit,"L"):t}function kN(e,t){return new uN(t.largestBatchId,sC(e.Jt,t.overlayMutation))}function bN(e,t){var n=t.path.lastSegment();return[e,bC(t.path.popLast()),n]}var wN=function(){function e(){c(this,e)}return f(e,[{key:"getBundleMetadata",value:function(e,t){return _N(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:pN(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return _N(e).put({bundleId:(n=t).id,createTime:dN(ZE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return xN(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yN(t.bundledQuery),readTime:pN(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return xN(e).put(function(e){return{name:e.name,readTime:dN(ZE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function _N(e){return aN(e,"bundles")}function xN(e){return aN(e,"namedQueries")}var IN=function(){function e(t,n){c(this,e),this.M=t,this.userId=n}return f(e,[{key:"getOverlay",value:function(e,t){var n=this;return TN(e).get(bN(this.userId,t)).next((function(e){return e?kN(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new uN(t,a);i.push(r.Xt(e,o))})),ZC.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(bC(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(TN(e).Qt("collectionPathOverlayIndex",i))})),ZC.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=EE(),a=bC(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return TN(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=kN(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=EE(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return TN(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=kN(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return TN(e).put(function(e,t,n){var r=bN(t,n.mutation.key),i=(0,o.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:oC(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function TN(e){return aN(e,"documentOverlays")}var SN=function(){function e(){c(this,e)}return f(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(aT(e.integerValue));else if("doubleValue"in e){var n=aT(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),dT(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(oT(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?RT(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):SI()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),vT.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function EN(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function CN(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=EN(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}SN.fe=new SN;var NN=function(){function e(){c(this,e),this.buffer=new Uint8Array(1024),this.position=0}return f(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=CN(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=CN(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),AN=function(){function e(t){c(this,e),this.De=t}return f(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),PN=function(){function e(t){c(this,e),this.De=t}return f(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),RN=function(){function e(){c(this,e),this.De=new NN,this.Ce=new AN(this.De),this.xe=new PN(this.De)}return f(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),DN=function(){function e(t,n,r,i){c(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return f(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ON(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=MN(e.arrayValue,t.arrayValue))?n:0!==(n=MN(e.directionalValue,t.directionalValue))?n:vT.comparator(e.documentKey,t.documentKey)}function MN(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var LN=function(){function e(t){c(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=p(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return f(e,[{key:"$e",value:function(e){var t=qT(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=BT(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=p(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),FN=function(){function e(){c(this,e),this.qe=new UN}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),ZC.resolve()}},{key:"getCollectionParents",value:function(e,t){return ZC.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ZC.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ZC.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ZC.resolve(null)}},{key:"getIndexType",value:function(e,t){return ZC.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ZC.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ZC.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ZC.resolve(GT.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ZC.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ZC.resolve()}}]),e}(),UN=function(){function e(){c(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new XT(XI.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new XT(XI.comparator)).toArray()}}]),e}(),jN=new Uint8Array(0),VN=function(){function e(t,n){c(this,e),this.user=t,this.databaseId=n,this.Ke=new UN,this.Ge=new _E((function(e){return rS(e)}),(function(e,t){return iS(e,t)})),this.uid=t.uid||""}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:bC(i)};return qN(e).put(a)}return ZC.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[KI(t),""],!1,!0);return qN(e).qt(r).next((function(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xC(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=zN(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=zN(e),r=WN(e),i=BN(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=BN(e),i=!0,a=new Map;return ZC.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=AE(),o=[];return ZC.forEach(a,(function(i,a){var s;_I("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(rS(t)));var u=function(e,t){var n=qT(t);if(void 0===n)return null;var r,i=p(oS(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=p(BT(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=p(oS(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=p(BT(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?sS(e,o.fieldPath,e.startAt):uS(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new yS(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=p(BT(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?uS(e,o.fieldPath,e.endAt):sS(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new yS(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),v=n.ze(i,a,c),g=n.He(i.indexId,u,h,l.inclusive,d,f.inclusive,v);return ZC.forEach(g,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=vT.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ZC.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.Je(t[u/c]):jN,h=s.Ye(e,f,n[u%c],r),d=s.Xe(e,f,i[u%c],a),p=o.map((function(t){return s.Ye(e,f,t,!0)}));l.push.apply(l,(0,xe.Z)(s.createRange(h,d,p)))},h=0;h<u;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new DN(e,vT.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new DN(e,vT.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new LN(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return ZC.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new XT(eT.comparator),r=!1,i=p(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=p(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new RN,i=p(BT(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);SN.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new RN;return SN.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new RN;return SN.fe.Zt(TT(this.databaseId,t),n.Ne(function(e){var t=BT(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new RN);var i,a=0,o=p(BT(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=p(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&ET(c))r=this.nn(r,u,c);else{var h=f.Ne(u.kind);SN.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=(0,xe.Z)(e),a=[],o=p(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=p(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new RN;f.seed(l.Se()),SN.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof cS&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=zN(e),i=WN(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return ZC.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new WT(t.sequenceNumber,new GT(pN(t.readTime),new vT(xC(t.documentKey)),t.largestBatchId)):WT.empty(),r=e.fields.map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return new zT(eT.fromServerFormat(n),r)}));return new VT(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zI(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=zN(e),a=WN(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ZC.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:dN(r.readTime),documentKey:bC(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ZC.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ZC.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ZC.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?ZC.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return BN(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return BN(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=BN(e),i=new XT(ON);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new DN(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new XT(ON),r=this.Ze(t,e);if(null==r)return n;var i=qT(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ET(a)){var o,s=p(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new DN(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new DN(t.indexId,e.key,jN,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;_I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=eS(a),u=eS(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=eS(o)):l?(i(s),s=eS(a)):(s=eS(a),u=eS(o))}}(r,i,ON,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),ZC.waitFor(o)}},{key:"rn",value:function(e){var t=1;return WN(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ON(e,t)})).filter((function(e,t,n){return!t||0!==ON(e,n[t-1])}));var r=[];r.push(e);var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=ON(o,e),u=ON(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,jN,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,jN,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return ZC.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||ZT(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=GT.min()}))})).next((function(){return n}))}}]),e}();function qN(e){return aN(e,"collectionParents")}function BN(e){return aN(e,"indexEntries")}function zN(e){return aN(e,"indexConfiguration")}function WN(e){return aN(e,"indexState")}var KN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HN=function(){function e(t,n,r){c(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function GN(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){EI(1===s)})));var c,l=[],f=p(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=SC(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return ZC.waitFor(a).next((function(){return l}))}function ZN(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw SI();t=e.noDocument}return JSON.stringify(t).length}HN.DEFAULT_COLLECTION_PERCENTILE=10,HN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,HN.DEFAULT=new HN(41943040,HN.DEFAULT_COLLECTION_PERCENTILE,HN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),HN.DISABLED=new HN(-1,0,0);var QN=function(){function e(t,n,r,i){c(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return f(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $N(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=XN(e),o=$N(e);return o.add({}).next((function(s){EI("number"==typeof s);var u,c=new oN(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return oC(e.Jt,t)})),i=n.mutations.map((function(t){return oC(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new XT((function(e,t){return zI(e.canonicalString(),t.canonicalString())})),d=p(r);try{for(d.s();!(u=d.n()).done;){var v=u.value,g=SC(i.userId,v.key.path,s);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(g,EC))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),ZC.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return $N(e).get(t).next((function(e){return e?(EI(e.userId===n.userId),vN(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?ZC.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return $N(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(EI(t.batchId>=r),a=vN(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $N(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $N(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return vN(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=TC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return XN(e).Wt({range:i},(function(r,i,s){var u=(0,o.Z)(r,3),c=u[0],l=u[1],f=u[2],h=xC(l);if(c===n.userId&&t.path.isEqual(h))return $N(e).get(f).next((function(e){if(!e)throw SI();EI(e.userId===n.userId),a.push(vN(n.M,e))}));s.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XT(zI),i=[];return t.forEach((function(t){var a=TC(n.userId,t.path),s=IDBKeyRange.lowerBound(a),u=XN(e).Wt({range:s},(function(e,i,a){var s=(0,o.Z)(e,3),u=s[0],c=s[1],l=s[2],f=xC(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),ZC.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=TC(this.userId,r),s=IDBKeyRange.lowerBound(a),u=new XT(zI);return XN(e).Wt({range:s},(function(e,t,a){var s=(0,o.Z)(e,3),c=s[0],l=s[1],f=s[2],h=xC(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($N(e).get(t).next((function(e){if(null===e)throw SI();EI(e.userId===n.userId),r.push(vN(n.M,e))})))})),ZC.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return GN(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),ZC.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ZC.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return XN(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xC(e[1]);i.push(a)}else r.done()})).next((function(){EI(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return YN(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return JN(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return EI(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function YN(e,t,n){var r=TC(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),s=!1;return XN(e).Wt({range:a,jt:!0},(function(e,n,r){var a=(0,o.Z)(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(s=!0),r.done()})).next((function(){return s}))}function $N(e){return aN(e,"mutations")}function XN(e){return aN(e,"documentMutations")}function JN(e){return aN(e,"mutationQueues")}var eA=function(){function e(t){c(this,e),this.mn=t}return f(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),tA=function(){function e(t,n){c(this,e),this.referenceDelegate=t,this.M=n}return f(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new eA(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return GI.fromTimestamp(new HI(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return nA(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return EI(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return nA(e).Wt((function(o,s){var u=gN(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return ZC.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return nA(e).Wt((function(e,n){var r=gN(n);t(r)}))}},{key:"pn",value:function(e){return rA(e).get("targetGlobalKey").next((function(e){return EI(null!==e),e}))}},{key:"In",value:function(e,t){return rA(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return nA(e).put(mN(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=rS(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nA(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=gN(n);iS(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=iA(e);return t.forEach((function(t){var o=bC(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ZC.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=iA(e);return ZC.forEach(t,(function(t){var a=bC(t.path);return ZC.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=iA(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=iA(e),i=AE();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=xC(e[1]),a=new vT(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=bC(t.path),r=IDBKeyRange.bound([n],[KI(n)],!1,!0),i=0;return iA(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=(0,o.Z)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return nA(e).get(t).next((function(e){return e?gN(e):null}))}}]),e}();function nA(e){return aN(e,"targets")}function rA(e){return aN(e,"targetGlobal")}function iA(e){return aN(e,"targetDocuments")}function aA(e){return oA.apply(this,arguments)}function oA(){return oA=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===NI.FAILED_PRECONDITION&&t.message===HC){e.next=2;break}throw t;case 2:_I("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),oA.apply(this,arguments)}function sA(e,t){var n=(0,o.Z)(e,2),r=n[0],i=n[1],a=(0,o.Z)(t,2),s=a[0],u=a[1],c=zI(r,s);return 0===c?zI(i,u):c}var uA=function(){function e(t){c(this,e),this.An=t,this.buffer=new XT(sA),this.Rn=0}return f(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();sA(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),cA=function(){function e(t,n){c(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return f(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;_I("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!JC(n.t0)){n.next=12;break}_I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,aA(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),lA=function(){function e(t,n){c(this,e),this.Dn=t,this.params=n}return f(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ZC.resolve(VI.A);var r=new uA(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(_I("LruGarbageCollector","Garbage collection skipped; disabled"),ZC.resolve(KN)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(_I("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),KN):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(_I("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),wI()<=Ce.DEBUG&&_I("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),ZC.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),fA=function(){function e(t,n){c(this,e),this.db=t,this.garbageCollector=function(e,t){return new lA(e,t)}(this,n)}return f(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return hA(e,n)}},{key:"removeReference",value:function(e,t,n){return hA(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return hA(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return JN(e).zt((function(r){return YN(e,r,t).next((function(e){return e&&(n=!0),ZC.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,GI.min()),iA(e).delete([0,bC(o.path)])}))}));i.push(u)}})).next((function(){return ZC.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return hA(e,t)}},{key:"Mn",value:function(e,t){var n,r=iA(e),i=VI.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=(0,o.Z)(e,2),s=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===s?(i!==VI.A&&t(new vT(xC(n)),i),i=c,n=u):i=VI.A})).next((function(){i!==VI.A&&t(new vT(xC(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function hA(e,t){return iA(e).put(function(e,t){return{targetId:0,path:bC(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var dA=function(){function e(){c(this,e),this.changes=new _E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return f(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,jT.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ZC.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),pA=function(){function e(t){c(this,e),this.M=t}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return mA(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return mA(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],hN(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=jT.newInvalidDocument(t);return mA(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yA(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:jT.newInvalidDocument(t)};return mA(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yA(t))},(function(e,i){r={document:n.$n(t,i),size:ZN(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=IE();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=IE(),i=new QT(vT.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,ZN(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return ZC.resolve();var r=new XT(bA);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(yA(r.first()),yA(r.last())),a=r.getIterator(),o=a.getNext();return mA(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=vT.fromSegments([].concat((0,xe.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&bA(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(yA(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),hN(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mA(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=IE(),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(vT.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=IE(),o=kA(t,n),s=kA(t,GT.max());return mA(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(vT.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new vA(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return gA(e).get("remoteDocumentGlobalKey").next((function(e){return EI(!!e),e}))}},{key:"Fn",value:function(e,t){return gA(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=iC(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=vT.fromSegments(t.noDocument.path),i=pN(t.noDocument.readTime);n=jT.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return SI();var a=vT.fromSegments(t.unknownDocument.path),o=pN(t.unknownDocument.version);n=jT.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new HI(e[0],e[1]);return GI.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(GI.min()))return n}return jT.newInvalidDocument(e)}}]),e}(),vA=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new _E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new XT((function(e,t){return zI(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=fN(t.Kn.M,o);i=i.add(a.path.popLast());var c=ZN(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=fN(t.Kn.M,o.convertToNoDocument(GI.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),ZC.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(dA);function gA(e){return aN(e,"remoteDocumentGlobal")}function mA(e){return aN(e,"remoteDocumentsV14")}function yA(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function kA(e,t){var n=t.documentKey.path.toArray();return[e,hN(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bA(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=zI(n[a],r[a]))return i;return(i=zI(n.length,r.length))||((i=zI(n[n.length-2],r[r.length-2]))||zI(n[n.length-1],r[r.length-1]))}var wA=function(){function e(t){c(this,e),this.M=t}return f(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new QC("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IC,{unique:!0}),e.createObjectStore("documentMutations")}(e),_A(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ZC.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),_A(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:GI.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IC,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ZC.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:jC});t.createIndex("collectionPathOverlayIndex",VC,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",qC,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:CC});t.createIndex("documentKeyIndex",NC),t.createIndex("collectionGroupIndex",AC)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:MC}).createIndex("sequenceNumberIndex",LC,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:FC}).createIndex("documentKeyIndex",UC,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=ZN(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return ZC.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return ZC.forEach(r,(function(r){EI(r.userId===n.userId);var i=vN(t.M,r);return GN(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new XI(n),o=function(e){return[0,bC(e)]}(a);r.push(t.get(o).next((function(n){return n?ZC.resolve():function(n){return t.put({targetId:0,path:bC(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ZC.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:OC});var n=t.store("collectionParents"),r=new UN,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:bC(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new XI(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=(0,o.Z)(e,3),r=(n[0],n[1]),a=(n[2],xC(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=gN(r),a=mN(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new vT(XI.fromString(i.document.name).popFirst(5)):i.noDocument?vT.fromSegments(i.noDocument.path):i.unknownDocument?vT.fromSegments(i.unknownDocument.path):SI()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return ZC.waitFor(r)}))}}]),e}();function _A(e){e.createObjectStore("targetDocuments",{keyPath:RC}).createIndex("documentTargetsIndex",DC,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PC,{unique:!0}),e.createObjectStore("targetGlobal")}var xA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",IA=function(){function e(t,n,r,i,a,o,s,u,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(c(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=l,this.Zn=f,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new AI(NI.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fA(this,i),this.hs=n+"main",this.M=new lN(u),this.ls=new YC(this.hs,this.ts,new wA(this.M)),this.fs=new tA(this.referenceDelegate,this.M),this.ds=function(e){return new pA(e)}(this.M),this._s=new wN,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===f&&xI("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new AI(NI.FAILED_PRECONDITION,xA);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new VI(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=a(u().mark((function n(r){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return SA(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(JC(t))return _I("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return _I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return TA(e).get("owner").next((function(e){return ZC.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return SA(e).delete(this.clientId)}},{key:"vs",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=aN(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ZC.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=p(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?ZC.resolve(!0):TA(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new AI(NI.FAILED_PRECONDITION,xA);return!1}}return!(!t.networkEnabled||!t.inForeground)||SA(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&_I("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new iN(e,VI.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return SA(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return QN.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new VN(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return IN.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;_I("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?KC:13===i?WC:12===i?zC:11===i?BC:void SI();return this.ls.runTransaction(e,o,s,(function(i){return a=new iN(i,r.es?r.es.next():VI.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw xI("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new AI(NI.FAILED_PRECONDITION,HC);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return TA(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new AI(NI.FAILED_PRECONDITION,xA)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TA(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=TA(e);return n.get("owner").next((function(e){return t.Ps(e)?(_I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ZC.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xI("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return _I("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xI("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(yb){xI("Failed to set zombie client id.",yb)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(yb){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return YC.vt()}}]),e}();function TA(e){return aN(e,"owner")}function SA(e){return aN(e,"clientMetadata")}function EA(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var CA=function(){function e(t,n,r){c(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return f(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=p(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=p(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return vT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):CS(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new vT(t)).next((function(e){var t=SE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=SE();return this.indexManager.getCollectionParents(e,i).next((function(o){return ZC.forEach(o,(function(o){var s=function(e,t){return new xS(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=p(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=jT.newInvalidDocument(u),r=r.insert(u,c)),oE(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){MS(t,n)||(r=r.remove(e))})),r}))}}]),e}(),NA=function(){function e(t,n,r,i){c(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return f(e,null,[{key:"Ys",value:function(t,n){var r,i=AE(),a=AE(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),AA=function(){function e(){c(this,e),this.Xs=!1}return f(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return ZC.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(GI.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(wI()<=Ce.DEBUG&&_I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),OS(t)),i.ri(e,o,t,KT(r,-1)))}))}},{key:"si",value:function(e,t){var n=new XT(FS(e));return t.forEach((function(t,r){MS(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return wI()<=Ce.DEBUG&&_I("QueryEngine","Using full collection scan to execute query:",OS(t)),this.Zs.Qs(e,t,GT.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),PA=function(){function e(t,n,r,i){c(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new QT(zI),this.ai=new _E((function(e){return rS(e)}),iS),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return f(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new CA(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function RA(e,t,n,r){return new PA(e,t,n,r)}function DA(e,t){return OA.apply(this,arguments)}function OA(){return OA=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=AE(),u=p(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=p(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var g=d.value;o.push(g.batchId);var m,y=p(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){v.e(b)}finally{v.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),OA.apply(this,arguments)}function MA(e,t){var n=CI(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ZC.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);EI(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function LA(e){var t=CI(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function FA(e,t){var n=CI(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(nT.EMPTY_BYTE_STRING,GI.min()).withLastLimboFreeSnapshotVersion(GI.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=IE();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(UA(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(GI.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return ZC.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}function UA(e,t,n){var r=AE();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=IE();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(GI.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):_I("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function jA(e,t){var n=CI(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function VA(e,t){var n=CI(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,ZC.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new cN(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function qA(e,t,n){return BA.apply(this,arguments)}function BA(){return BA=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=CI(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),JC(e.t1)){e.next=12;break}throw e.t1;case 12:_I("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),BA.apply(this,arguments)}function zA(e,t,n){var r=CI(e),i=GI.min(),a=AE();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=CI(e),i=r.ai.get(n);return void 0!==i?ZC.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,AS(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:GI.min(),n?a:AE())})).next((function(e){return HA(r,LS(t),e),{documents:e,_i:a}}))}))}function WA(e,t){var n=CI(e),r=CI(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function KA(e,t){var n=CI(e),r=n.ci.get(t)||GI.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,KT(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return HA(n,t,e),e}))}function HA(e,t,n){var r=GI.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function GA(e,t,n,r){return ZA.apply(this,arguments)}function ZA(){return ZA=a(u().mark((function e(t,n,r,i){var a,o,s,c,l,f,h,d,v,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=CI(t),o=AE(),s=IE(),c=p(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.wi(f.metadata.name),f.document&&(o=o.add(h)),(d=n.mi(f)).setReadTime(n.gi(f.metadata.readTime)),s=s.insert(h,d)}catch(u){c.e(u)}finally{c.f()}return v=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,VA(a,function(e){return AS(TS(XI.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return g=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return UA(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,g.targetId).next((function(){return a.fs.addMatchingKeys(e,o,g.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),ZA.apply(this,arguments)}function QA(e,t){return YA.apply(this,arguments)}function YA(){return YA=a(u().mark((function e(t,n){var r,i,a,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:AE(),e.next=3,VA(t,AS(yN(n.bundledQuery)));case 3:return i=e.sent,a=CI(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ZE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(nT.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}var $A=function(){function e(t){c(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return ZC.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:ZE(n.createTime)}),ZC.resolve()}},{key:"getNamedQuery",value:function(e,t){return ZC.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:yN(e.bundledQuery),readTime:ZE(e.readTime)}}(t)),ZC.resolve()}}]),e}(),XA=function(){function e(){c(this,e),this.overlays=new QT(vT.comparator),this.Ii=new Map}return f(e,[{key:"getOverlay",value:function(e,t){return ZC.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),ZC.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),ZC.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=EE(),i=t.length+1,a=new vT(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return ZC.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new QT((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=EE(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=EE(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return ZC.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new uN(t,n));var a=this.Ii.get(t);void 0===a&&(a=AE(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),JA=function(){function e(){c(this,e),this.Ti=new XT(eP.Ei),this.Ai=new XT(eP.Ri)}return f(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new eP(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new eP(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new vT(new XI([])),r=new eP(n,e),i=new eP(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new vT(new XI([])),n=new eP(t,e),r=new eP(t,e+1),i=AE();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new eP(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),eP=function(){function e(t,n){c(this,e),this.key=t,this.Ci=n}return f(e,null,[{key:"Ei",value:function(e,t){return vT.comparator(e.key,t.key)||zI(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return zI(e.Ci,t.Ci)||vT.comparator(e.key,t.key)}}]),e}(),tP=function(){function e(t,n){c(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new XT(eP.Ei)}return f(e,[{key:"checkEmpty",value:function(e){return ZC.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new oN(i,t,n,r);this.Bs.push(a);var o,s=p(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new eP(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return ZC.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ZC.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return ZC.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ZC.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return ZC.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new eP(t,0),i=new eP(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),ZC.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XT(zI);return t.forEach((function(e){var t=new eP(e,0),i=new eP(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),ZC.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;vT.isDocumentKey(i)||(i=i.child(""));var a=new eP(new vT(i),0),o=new XT(zI);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),ZC.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;EI(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return ZC.forEach(t.mutations,(function(i){var a=new eP(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new eP(t,0),r=this.Ni.firstAfterOrEqual(n);return ZC.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,ZC.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),nP=function(){function e(t){c(this,e),this.$i=t,this.docs=new QT(vT.comparator),this.size=0}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ZC.resolve(n?n.document.mutableCopy():jT.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=IE();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():jT.newInvalidDocument(e))})),ZC.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=IE(),i=new vT(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||ZT(HT(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return ZC.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){SI()}},{key:"Bi",value:function(e,t){return ZC.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new rP(this)}},{key:"getSize",value:function(e){return ZC.resolve(this.size)}}]),e}(),rP=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).Kn=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),ZC.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(dA),iP=function(){function e(t){c(this,e),this.persistence=t,this.Li=new _E((function(e){return rS(e)}),iS),this.lastRemoteSnapshotVersion=GI.min(),this.highestTargetId=0,this.Ui=0,this.qi=new JA,this.targetCount=0,this.Ki=eA.gn()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),ZC.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ZC.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ZC.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),ZC.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),ZC.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new eA(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,ZC.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),ZC.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ZC.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),ZC.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ZC.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return ZC.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),ZC.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ZC.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),ZC.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return ZC.resolve(n)}},{key:"containsKey",value:function(e,t){return ZC.resolve(this.qi.containsKey(t))}}]),e}(),aP=function(){function e(t,n){var r=this;c(this,e),this.Gi={},this.overlays={},this.es=new VI(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new iP(this),this.indexManager=new FN,this.ds=new nP((function(e){return r.referenceDelegate.Qi(e)})),this.M=new lN(n),this._s=new $A(this.M)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new XA,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new tP(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;_I("MemoryPersistence","Starting transaction:",e);var i=new oP(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return ZC.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),oP=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return f(n)}(GC),sP=function(){function e(t){c(this,e),this.persistence=t,this.Hi=new JA,this.Ji=null}return f(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw SI()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),ZC.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),ZC.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),ZC.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ZC.forEach(this.Xi,(function(r){var i=vT.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,GI.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return ZC.or([function(){return ZC.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function uP(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cP(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lP(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var fP=function(){function e(t,n,r,i){c(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return f(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new AI(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xI("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),hP=function(){function e(t,n,r){c(this,e),this.targetId=t,this.state=n,this.error=r}return f(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new AI(i.error.code,i.error.message))),a?new e(t,i.state,r):(xI("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dP=function(){function e(t,n){c(this,e),this.clientId=t,this.activeTargetIds=n}return f(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=RE(),o=0;i&&o<r.activeTargetIds.length;++o)i=pT(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xI("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pP=function(){function e(t,n){c(this,e),this.clientId=t,this.onlineState=n}return f(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xI("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vP=function(){function e(){c(this,e),this.activeTargetIds=RE()}return f(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),gP=function(){function e(t,n,r,i,a){c(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new QT(zI),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=uP(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new vP),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return f(e,[{key:"start",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a,o,s,c,l,f,h,d=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=p(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(uP(this.persistenceKey,i)))&&(o=dP.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(c=this.pr(s))&&this.Ir(c),l=p(this.cr);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ur(h)}catch(u){l.e(u)}finally{l.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lP(this.persistenceKey,e));if(n){var r=hP.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lP(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return _I("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){_I("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){_I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(_I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void xI("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(a(u().mark((function e(){var r,i,a,o,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}c=function(e){var t=VI.A;if(null!=e)try{var n=JSON.parse(e);EI("number"==typeof n),t=n}catch(e){xI("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==VI.A&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return l=t.Or(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new fP(this.currentUser,e,t,n),i=cP(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=cP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=lP(this.persistenceKey,e),i=new hP(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return dP.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return fP.tr(new yI(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return hP.tr(r,t)}},{key:"pr",value:function(e){return pP.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:_I("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=RE();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),mP=function(){function e(){c(this,e),this.Ur=new vP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new vP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),yP=function(){function e(){c(this,e)}return f(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kP=function(){function e(){var t=this;c(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return f(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){_I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){_I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wP=function(){function e(t){c(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return f(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),_P=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return f(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new gI;o.listenOnce(fI.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case lI.NO_ERROR:var t=o.getResponseJson();_I("Connection","XHR received:",JSON.stringify(t)),i(t);break;case lI.TIMEOUT:_I("Connection",'RPC "'+e+'" timed out'),a(new AI(NI.DEADLINE_EXCEEDED,"Request time out"));break;case lI.HTTP_ERROR:var n=o.getStatus();if(_I("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(NI).indexOf(t)>=0?t:NI.UNKNOWN}(r.status);a(new AI(s,r.message))}else a(new AI(NI.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new AI(NI.UNAVAILABLE,"Connection failed."));break;default:SI()}}finally{_I("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=uI(),a=cI(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new pI({})),this.lo(o.initMessageHeaders,t,n),j()||B()||U().indexOf("Electron/")>=0||z()||U().indexOf("MSAppHost/")>=0||q()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");_I("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new wP({Jr:function(e){l?_I("Connection","Not sending because WebChannel is closed:",e):(c||(_I("Connection","Opening WebChannel transport."),u.open(),c=!0),_I("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,vI.EventType.OPEN,(function(){l||_I("Connection","WebChannel transport opened.")})),h(u,vI.EventType.CLOSE,(function(){l||(l=!0,_I("Connection","WebChannel transport closed"),f.ro())})),h(u,vI.EventType.ERROR,(function(e){l||(l=!0,II("Connection","WebChannel transport errored:",e),f.ro(new AI(NI.UNAVAILABLE,"The operation could not be completed")))})),h(u,vI.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];EI(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){_I("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=vE[e];if(void 0!==t)return wE(t)}(a),s=i.message;void 0===o&&(o=NI.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new AI(o,s)),u.close()}else _I("Connection","WebChannel received:",n),f.oo(n)}})),h(a,hI.STAT_EVENT,(function(e){e.stat===dI.PROXY?_I("Connection","Detected buffering proxy"):e.stat===dI.NOPROXY&&_I("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){c(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);_I("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return _I("RestConnection","Received: ",e),e}),(function(t){throw II("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kI,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=bP[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function xP(){return"undefined"!=typeof window?window:null}function IP(){return"undefined"!=typeof document?document:null}function TP(e){return new WE(e,!0)}var SP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;c(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&_I("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),EP=function(){function e(t,n,r,i,a,o,s,u){c(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new SP(t,n)}return f(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===NI.RESOURCE_EXHAUSTED?(xI(n.toString()),xI("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===NI.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,o.Z)(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new AI(NI.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return _I("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(_I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),CP=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return f(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:SI()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(EI(void 0===t||"string"==typeof t),nT.fromBase64String(t||"")):(EI(void 0===t||t instanceof Uint8Array),nT.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?NI.UNKNOWN:wE(e.code);return new AI(t,e.message||"")}(o);n=new FE(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=XE(e,u.document.name),l=ZE(u.document.updateTime),f=new FT({mapValue:{fields:u.document.fields}}),h=jT.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new ME(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var g=XE(e,v.document),m=v.readTime?ZE(v.readTime):GI.min(),y=jT.newNoDocument(g,m),k=v.removedTargetIds||[];n=new ME([],k,y.key,y)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=XE(e,b.document),_=b.removedTargetIds||[];n=new ME([],_,w,null)}else{if(!("filter"in t))return SI();t.filter;var x=t.filter;x.targetId;var I=x.count||0,T=new kE(I),S=x.targetId;n=new LE(S,T)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return GI.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?GI.min():t.readTime?ZE(t.readTime):GI.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=tC(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=aS(r)?{documents:uC(e,r)}:{query:cC(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=HE(e,t.resumeToken):t.snapshotVersion.compareTo(GI.min())>0&&(n.readTime=KE(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return SI()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=tC(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(EP),NP=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return f(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,za(y(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(EI(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(EI(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ZE(e.updateTime):ZE(t);return n.isEqual(GI.min())&&(n=ZE(t)),new tE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ZE(e.commitTime);return this.listener.tu(n,t)}return EI(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=tC(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return oC(t.M,e)}))};this.Lo(n)}}]),n}(EP),AP=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return f(n,[{key:"iu",value:function(){if(this.su)throw new AI(NI.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,o.Z)(i,2),s=a[0],u=a[1];return r.So.co(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===NI.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new AI(NI.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,o.Z)(i,2),s=a[0],u=a[1];return r.So._o(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===NI.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new AI(NI.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return f((function e(){c(this,e)}))}()),PP=function(){function e(t,n){c(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return f(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(xI(t),this.uu=!1):_I("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),RP=f((function e(t,n,r,i,o){var s=this;c(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.Kr((function(e){r.enqueueAndForget(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zP(s),!e.t0){e.next=5;break}return _I("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=CI(t)).wu.add(4),e.next=4,MP(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,DP(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new PP(r,i)}));function DP(e){return OP.apply(this,arguments)}function OP(){return OP=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zP(t)){e.next=18;break}n=p(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),OP.apply(this,arguments)}function MP(e){return LP.apply(this,arguments)}function LP(){return LP=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),LP.apply(this,arguments)}function FP(e,t){var n=CI(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),BP(n)?qP(n):yR(n).Mo()&&jP(n,t))}function UP(e,t){var n=CI(e),r=yR(n);n._u.delete(t),r.Mo()&&VP(n,t),0===n._u.size&&(r.Mo()?r.$o():zP(n)&&n.yu.set("Unknown"))}function jP(e,t){e.pu.Z(t.targetId),yR(e).Ho(t)}function VP(e,t){e.pu.Z(t),yR(e).Jo(t)}function qP(e){e.pu=new jE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),yR(e).start(),e.yu.au()}function BP(e){return zP(e)&&!yR(e).ko()&&e._u.size>0}function zP(e){return 0===CI(e).wu.size}function WP(e){e.pu=void 0}function KP(e){return HP.apply(this,arguments)}function HP(){return HP=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){jP(t,e)}));case 1:case"end":return e.stop()}}),e)}))),HP.apply(this,arguments)}function GP(e,t){return ZP.apply(this,arguments)}function ZP(){return ZP=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WP(t),BP(t)?(t.yu.lu(n),qP(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ZP.apply(this,arguments)}function QP(e,t,n){return YP.apply(this,arguments)}function YP(){return YP=a(u().mark((function e(t,n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof FE&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),_I("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$P(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ME?t.pu.ut(n):n instanceof LE?t.pu._t(n):t.pu.ht(n),r.isEqual(GI.min())){e.next=29;break}return e.prev=14,e.next=17,LA(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(nT.EMPTY_BYTE_STRING,n.snapshotVersion)),VP(e,t);var r=new cN(n.target,t,1,n.sequenceNumber);jP(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),_I("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$P(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),YP.apply(this,arguments)}function $P(e,t,n){return XP.apply(this,arguments)}function XP(){return XP=a(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JC(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,MP(t);case 5:t.yu.set("Offline"),r||(r=function(){return LA(t.localStore)}),t.asyncQueue.enqueueRetryable(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _I("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,DP(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),XP.apply(this,arguments)}function JP(e,t){return t().catch((function(n){return $P(e,n,t)}))}function eR(e){return tR.apply(this,arguments)}function tR(){return tR=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=CI(t),r=kR(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!nR(n)){e.next=19;break}return e.prev=3,e.next=6,jA(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,rR(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$P(n,e.t0);case 17:e.next=2;break;case 19:iR(n)&&aR(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),tR.apply(this,arguments)}function nR(e){return zP(e)&&e.du.length<10}function rR(e,t){e.du.push(t);var n=kR(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function iR(e){return zP(e)&&!kR(e).ko()&&e.du.length>0}function aR(e){kR(e).start()}function oR(e){return sR.apply(this,arguments)}function sR(){return sR=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kR(t).nu();case 1:case"end":return e.stop()}}),e)}))),sR.apply(this,arguments)}function uR(e){return cR.apply(this,arguments)}function cR(){return cR=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kR(t),r=p(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t,n){return fR.apply(this,arguments)}function fR(){return fR=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=sN.from(i,n,r),e.next=3,JP(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,eR(t);case 5:case"end":return e.stop()}}),e)}))),fR.apply(this,arguments)}function hR(e,t){return dR.apply(this,arguments)}function dR(){return dR=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&kR(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bE(i=n.code)||i===NI.ABORTED){e.next=7;break}return r=t.du.shift(),kR(t).Fo(),e.next=5,JP(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,eR(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:iR(t)&&aR(t);case 5:case"end":return e.stop()}}),e)}))),dR.apply(this,arguments)}function pR(e,t){return vR.apply(this,arguments)}function vR(){return vR=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=CI(t)).asyncQueue.verifyOperationInProgress(),_I("RemoteStore","RemoteStore received new credentials"),i=zP(r),r.wu.add(3),e.next=6,MP(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,DP(r);case 12:case"end":return e.stop()}}),e)}))),vR.apply(this,arguments)}function gR(e,t){return mR.apply(this,arguments)}function mR(){return mR=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CI(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,DP(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,MP(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),mR.apply(this,arguments)}function yR(e){return e.Iu||(e.Iu=function(e,t,n){var r=CI(e);return r.iu(),new CP(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:KP.bind(null,e),eo:GP.bind(null,e),zo:QP.bind(null,e)}),e.mu.push(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),BP(e)?qP(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:WP(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function kR(e){return e.Tu||(e.Tu=function(e,t,n){var r=CI(e);return r.iu(),new NP(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:oR.bind(null,e),eo:hR.bind(null,e),eu:uR.bind(null,e),tu:lR.bind(null,e)}),e.mu.push(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,eR(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(_I("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var bR=function(){function e(t,n,r,i,a){c(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new PI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new AI(NI.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wR(e,t){if(xI("AsyncQueue","".concat(t,": ").concat(e)),JC(e))return new AI(NI.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _R=function(){function e(t){c(this,e),this.comparator=t?function(e,n){return t(e,n)||vT.comparator(e.key,n.key)}:function(e,t){return vT.comparator(e.key,t.key)},this.keyedMap=SE(),this.sortedSet=new QT(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xR=function(){function e(){c(this,e),this.Eu=new QT(vT.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):SI():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),IR=function(){function e(t,n,r,i,a,o,s,u){c(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&RS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,_R.emptySet(n),a,r,i,!0,!1)}}]),e}(),TR=f((function e(){c(this,e),this.Ru=void 0,this.listeners=[]})),SR=f((function e(){c(this,e),this.queries=new _E((function(e){return DS(e)}),RS),this.onlineState="Unknown",this.bu=new Set}));function ER(e,t){return CR.apply(this,arguments)}function CR(){return CR=a(u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CI(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new TR),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=wR(e.t0,"Initialization of query '".concat(OS(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&DR(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),CR.apply(this,arguments)}function NR(e,t){return AR.apply(this,arguments)}function AR(){return AR=a(u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CI(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),AR.apply(this,arguments)}function PR(e,t){var n,r=CI(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=p(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&DR(r)}function RR(e,t,n){var r=CI(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function DR(e){e.bu.forEach((function(e){e.next()}))}var OR=function(){function e(t,n,r){c(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new IR(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=IR.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),MR=function(){function e(t,n){c(this,e),this.payload=t,this.byteLength=n}return f(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),LR=function(){function e(t){c(this,e),this.M=t}return f(e,[{key:"wi",value:function(e){return XE(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?iC(this.M,e.document,!1):jT.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return ZE(e)}}]),e}(),FR=function(){function e(t,n,r){c(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UR(t)}return f(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=XI.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new LR(this.M),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=p(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||AE()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GA(this.localStore,new LR(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=p(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,QA(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function UR(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var jR=f((function e(t){c(this,e),this.key=t})),VR=f((function e(t){c(this,e),this.key=t})),qR=function(){function e(t,n){c(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=AE(),this.mutatedKeys=AE(),this.Gu=FS(t),this.Qu=new _R(this.Gu)}return f(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new xR,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=MS(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return SI()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new IR(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new xR,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=AE(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new VR(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new jR(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=AE();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return IR.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),BR=f((function e(t,n,r){c(this,e),this.query=t,this.targetId=n,this.view=r})),zR=f((function e(t){c(this,e),this.key=t,this.na=!1})),WR=function(){function e(t,n,r,i,a,o){c(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new _E((function(e){return DS(e)}),RS),this.ra=new Map,this.oa=new Set,this.ua=new QT(vT.comparator),this.aa=new Map,this.ca=new JA,this.ha={},this.la=new Map,this.fa=eA.yn(),this.onlineState="Unknown",this.da=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function KR(e,t){return HR.apply(this,arguments)}function HR(){return HR=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=UD(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,VA(r.localStore,AS(n));case 8:return s=e.sent,r.isPrimaryClient&&FP(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,GR(r,n,i,"current"===c);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),HR.apply(this,arguments)}function GR(e,t,n,r){return ZR.apply(this,arguments)}function ZR(){return ZR=a(u().mark((function e(t,n,r,i){var o,s,c,l,f,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,zA(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(pD(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zA(t.localStore,n,!0);case 3:return o=e.sent,s=new qR(n,o._i),c=s.Wu(o.documents),l=OE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),f=s.applyChanges(c,t.isPrimaryClient,l),pD(t,r,f.Xu),h=new BR(n,r,s),e.abrupt("return",(t.ia.set(n,h),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),ZR.apply(this,arguments)}function QR(e,t){return YR.apply(this,arguments)}function YR(){return YR=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CI(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!RS(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qA(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),UP(r.remoteStore,i.targetId),hD(r,i.targetId)})).catch(aA);case 9:e.next=14;break;case 11:return hD(r,i.targetId),e.next=14,qA(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),YR.apply(this,arguments)}function $R(e,t,n){return XR.apply(this,arguments)}function XR(){return XR=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jD(t),e.prev=1,e.next=4,function(e,t){var n,r=CI(e),i=HI.now(),a=t.reduce((function(e,t){return e.add(t.key)}),AE());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=p(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=sE(c,n.get(c.key));null!=l&&s.push(new fE(c.key,l,UT(l.value.mapValue),nE.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new QT(zI)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,mD(i,a.changes);case 9:return e.next=11,eR(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wR(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),XR.apply(this,arguments)}function JR(e,t){return eD.apply(this,arguments)}function eD(){return eD=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),e.prev=1,e.next=4,FA(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(EI(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?EI(n.na):e.removedDocuments.size>0&&(EI(n.na),n.na=!1))})),e.next=8,mD(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,aA(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),eD.apply(this,arguments)}function tD(e,t,n){var r=CI(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=CI(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&DR(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function nD(e,t,n){return rD.apply(this,arguments)}function rD(){return rD=a(u().mark((function e(t,n,r){var i,a,o,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=CI(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new QT(vT.comparator)).insert(o,jT.newNoDocument(o,GI.min())),c=AE().add(o),l=new DE(GI.min(),new Map,new XT(zI),s,c),e.next=9,JR(i,l);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),gD(i),e.next=16;break;case 14:return e.next=16,qA(i.localStore,n,!1).then((function(){return hD(i,n,r)})).catch(aA);case 16:case"end":return e.stop()}}),e)}))),rD.apply(this,arguments)}function iD(e,t){return aD.apply(this,arguments)}function aD(){return aD=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),i=n.batch.batchId,e.prev=1,e.next=4,MA(r.localStore,n);case 4:return a=e.sent,fD(r,i,null),lD(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,mD(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,aA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),aD.apply(this,arguments)}function oD(e,t,n){return sD.apply(this,arguments)}function sD(){return sD=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=CI(t),e.prev=1,e.next=4,function(e,t){var n=CI(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return EI(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,fD(i,n,r),lD(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,mD(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,aA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),sD.apply(this,arguments)}function uD(e,t){return cD.apply(this,arguments)}function cD(){return cD=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zP((r=CI(t)).remoteStore)||_I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=CI(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wR(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),cD.apply(this,arguments)}function lD(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function fD(e,t,n){var r=CI(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function hD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||dD(e,t)}))}function dD(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(UP(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),gD(e))}function pD(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof jR?(e.ca.addReference(a.key,t),vD(e,a)):a instanceof VR?(_I("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||dD(e,a.key)):SI()}}catch(o){i.e(o)}finally{i.f()}}function vD(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(_I("SyncEngine","New document in limbo: "+n),e.oa.add(r),gD(e))}function gD(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new vT(XI.fromString(t)),r=e.fa.next();e.aa.set(r,new zR(n)),e.ua=e.ua.insert(n,r),FP(e.remoteStore,new cN(AS(TS(n.path)),r,2,VI.A))}}function mD(e,t,n){return yD.apply(this,arguments)}function yD(){return yD=a(u().mark((function e(t,n,r){var i,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=CI(t),o=[],s=[],c=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){c.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=NA.Ys(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.sa.zo(o),e.next=9,function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ZC.forEach(n,(function(t){return ZC.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ZC.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),JC(e.t0)){e.next=10;break}throw e.t0;case 10:_I("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(c=r.ui.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.ui=r.ui.insert(s,f))}catch(u){i.e(u)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),yD.apply(this,arguments)}function kD(e,t){return bD.apply(this,arguments)}function bD(){return bD=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=CI(t)).currentUser.isEqual(n)){e.next=11;break}return _I("SyncEngine","User change. New user:",n.toKey()),e.next=5,DA(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new AI(NI.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,mD(r,i.di);case 11:case"end":return e.stop()}}),e)}))),bD.apply(this,arguments)}function wD(e,t){var n=CI(e),r=n.aa.get(t);if(r&&r.na)return AE().add(r.key);var i=AE(),a=n.ra.get(t);if(!a)return i;var o,s=p(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function _D(e,t){return xD.apply(this,arguments)}function xD(){return xD=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),e.next=3,zA(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&pD(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),xD.apply(this,arguments)}function ID(e,t){return TD.apply(this,arguments)}function TD(){return TD=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),e.abrupt("return",KA(r.localStore,n).then((function(e){return mD(r,e)})));case 2:case"end":return e.stop()}}),e)}))),TD.apply(this,arguments)}function SD(e,t,n,r){return ED.apply(this,arguments)}function ED(){return ED=a(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=CI(t),e.next=3,function(e,t){var n=CI(e),r=CI(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):ZC.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,eR(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(fD(a,n,i||null),lD(a,n),function(e,t){CI(CI(e).Bs)._n(t)}(a.localStore,n)):SI();case 11:return e.next=13,mD(a,o);case 13:e.next=16;break;case 15:_I("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),ED.apply(this,arguments)}function CD(e,t){return ND.apply(this,arguments)}function ND(){return ND=a(u().mark((function e(t,n){var r,i,a,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(UD(r=CI(t)),jD(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,AD(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,gR(r.remoteStore,!0);case 9:o=p(a);try{for(o.s();!(s=o.n()).done;)c=s.value,FP(r.remoteStore,c)}catch(u){o.e(u)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return l=[],f=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return hD(r,t),qA(r.localStore,t,!0)})),UP(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,AD(r,l);case 21:return function(e){var t=CI(e);t.aa.forEach((function(e,n){UP(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new QT(vT.comparator)}(r),r.da=!1,e.next=25,gR(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),ND.apply(this,arguments)}function AD(e,t,n){return PD.apply(this,arguments)}function PD(){return PD=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,v,g,m,y,k;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=CI(t),a=[],o=[],s=p(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.ra.get(l))||0===h.length){e.next=34;break}return e.next=11,VA(i.localStore,AS(h[0]));case 11:f=e.sent,d=p(h),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return g=v.value,m=i.ia.get(g),e.next=20,_D(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,WA(i.localStore,l);case 36:return k=e.sent,e.next=39,VA(i.localStore,k);case 39:return f=e.sent,e.next=42,GR(i,RD(k),l,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),PD.apply(this,arguments)}function RD(e){return IS(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function DD(e){var t=CI(e);return CI(CI(t.localStore).persistence).Fs()}function OD(e,t,n,r){return MD.apply(this,arguments)}function MD(){return MD=a(u().mark((function e(t,n,r,i){var a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=CI(t)).da){e.next=3;break}return e.abrupt("return",void _I("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,KA(a.localStore,LS(o[0]));case 10:return s=e.sent,c=DE.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,mD(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,qA(a.localStore,n,!0);case 17:return hD(a,n,i),e.abrupt("break",20);case 19:SI();case 20:case"end":return e.stop()}}),e)}))),MD.apply(this,arguments)}function LD(e,t,n){return FD.apply(this,arguments)}function FD(){return FD=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=UD(t)).da){e.next=45;break}a=p(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return _I("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,WA(i.localStore,s);case 12:return c=e.sent,e.next=15,VA(i.localStore,c);case 15:return l=e.sent,e.next=18,GR(i,RD(c),l.targetId,!1);case 18:FP(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=p(r),e.prev=30,d=u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,qA(i.localStore,t,!1).then((function(){UP(i.remoteStore,t),hD(i,t)})).catch(aA);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),FD.apply(this,arguments)}function UD(e){var t=CI(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nD.bind(null,t),t.sa.zo=PR.bind(null,t.eventManager),t.sa.wa=RR.bind(null,t.eventManager),t}function jD(e){var t=CI(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oD.bind(null,t),t}function VD(e,t,n){var r=CI(e);(function(){var e=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=CI(e),r=ZE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(UR(i)),a=new FR(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,mD(t,c.Lu,void 0);case 31:return e.next=33,function(e,t){var n=CI(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(II("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var qD=function(){function e(){c(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=TP(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return RA(this.persistence,new AA,e.initialUser,this.M)}},{key:"ya",value:function(e){return new aP(sP.Yi,this.M)}},{key:"ga",value:function(e){return new mP}},{key:"terminate",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BD=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return f(n,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,jD(this.Ta.syncEngine);case 6:return e.next=8,eR(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return RA(this.persistence,new AA,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new cA(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=EA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?HN.withCacheSize(this.cacheSizeBytes):HN.DEFAULT;return new IA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xP(),IP(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new mP}}]),n}(qD),zD=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return f(n,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){var r,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof gP,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:SD.bind(null,r),Br:OD.bind(null,r),Lr:LD.bind(null,r),Fs:DD.bind(null,r),Fr:ID.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CD(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=xP();if(!gP.vt(t))throw new AI(NI.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=EA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BD),WD=function(){function e(){c(this,e)}return f(e,[{key:"initialize",value:function(){var e=a(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return tD(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=kD.bind(null,this.syncEngine),e.next=12,gR(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new SR}},{key:"createDatastore",value:function(e){var t,n=TP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new _P(t));return function(e,t,n,r){return new AP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return tD(o.syncEngine,e,0)},a=kP.vt()?new kP:new yP,new RP(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new WR(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CI(t),_I("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,MP(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function KD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(u().mark((function r(){var i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var HD=function(){function e(t){c(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GD=function(){function e(t,n){var r=this;c(this,e),this.Ra=t,this.M=n,this.metadata=new PI,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return f(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=a(u().mark((function e(){var t,n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new MR(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ZD=function(){function e(t){c(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return f(e,[{key:"lookup",value:function(){var e=a(u().mark((function e(t){var n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new AI(NI.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),i=tC(r.M)+"/documents",a={documents:n.map((function(e){return $E(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=aC(r.M,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());EI(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new mE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=vT.fromPath(t);n.mutations.push(new yE(r,n.precondition(r)))})),e.next=7,function(){var e=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CI(t),i=tC(r.M)+"/documents",a={writes:n.map((function(e){return oC(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw SI();t=GI.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new AI(NI.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?nE.updateTime(t):nE.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(GI.min()))throw new AI(NI.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nE.updateTime(t)}return nE.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),QD=function(){function e(t,n,r,i,a){c(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new SP(this.asyncQueue,"transaction_retry")}return f(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ZD(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!hT(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!bE(t)}return!1}}]),e}(),YD=function(){function e(t,n,r,i){var o=this;c(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yI.UNAUTHENTICATED,this.clientId=BI.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _I("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return _I("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return f(e,[{key:"getConfiguration",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new AI(NI.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new PI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wR(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $D(e,t){return XD.apply(this,arguments)}function XD(){return XD=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),_I("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,DA(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),XD.apply(this,arguments)}function JD(e,t){return eO.apply(this,arguments)}function eO(){return eO=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tO(t);case 3:return r=e.sent,_I("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return pR(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return pR(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eO.apply(this,arguments)}function tO(e){return nO.apply(this,arguments)}function nO(){return nO=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return _I("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$D(t,new qD);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),nO.apply(this,arguments)}function rO(e){return iO.apply(this,arguments)}function iO(){return iO=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return _I("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,JD(t,new WD);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),iO.apply(this,arguments)}function aO(e){return tO(e).then((function(e){return e.persistence}))}function oO(e){return tO(e).then((function(e){return e.localStore}))}function sO(e){return rO(e).then((function(e){return e.remoteStore}))}function uO(e){return rO(e).then((function(e){return e.syncEngine}))}function cO(e){return lO.apply(this,arguments)}function lO(){return lO=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rO(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=KR.bind(null,n.syncEngine),r.onUnlisten=QR.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lO.apply(this,arguments)}function fO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new HD({next:function(a){t.enqueueAndForget((function(){return NR(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new AI(NI.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new AI(NI.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new OR(TS(n.path),a,{includeMetadataChanges:!0,ku:!0});return ER(e,o)},i.next=3,cO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new HD({next:function(n){t.enqueueAndForget((function(){return NR(e,o)})),n.fromCache&&"server"===r.source?i.reject(new AI(NI.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new OR(n,a,{includeMetadataChanges:!0,ku:!0});return ER(e,o)},i.next=3,cO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dO=new Map;function pO(e,t,n){if(!n)throw new AI(NI.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vO(e,t,n,r){if(!0===t&&!0===r)throw new AI(NI.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function gO(e){if(!vT.isDocumentKey(e))throw new AI(NI.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mO(e){if(vT.isDocumentKey(e))throw new AI(NI.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yO(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":SI()}function kO(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new AI(NI.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yO(e);throw new AI(NI.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function bO(e,t){if(t<=0)throw new AI(NI.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wO=function(){function e(t){var n;if(c(this,e),void 0===t.host){if(void 0!==t.ssl)throw new AI(NI.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new AI(NI.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),_O=function(){function e(t,n,r){c(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wO({}),this._settingsFrozen=!1,t instanceof fT?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new AI(NI.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fT(e.options.projectId)}(t))}return f(e,[{key:"app",get:function(){if(!this._app)throw new AI(NI.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new AI(NI.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wO(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new DI;switch(e.type){case"gapi":var t=e.client;return EI(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new FI(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new AI(NI.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=dO.get(e);t&&(_I("ComponentProvider","Removing Datastore"),dO.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function xO(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=kO(e,_O))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&II("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=yI.MOCK_USER;else{o=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new AI(NI.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new yI(u)}e._authCredentials=new OI(new RI(o,s))}}var IO=function(){function e(t,n,r){c(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new SO(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),TO=function(){function e(t,n,r){c(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),SO=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,TS(i)))._path=i,a.type="collection",a}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new IO(this.firestore,null,new vT(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(TO);function EO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_e(e),pO("collection","path",t),e instanceof _O){var a=XI.fromString.apply(XI,[t].concat(r));return mO(a),new SO(e,null,a)}if(!(e instanceof IO||e instanceof SO))throw new AI(NI.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(XI.fromString.apply(XI,[t].concat(r)));return mO(o),new SO(e.firestore,null,o)}function CO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_e(e),1===arguments.length&&(t=BI.R()),pO("doc","path",t),e instanceof _O){var a=XI.fromString.apply(XI,[t].concat(r));return gO(a),new IO(e,null,new vT(a))}if(!(e instanceof IO||e instanceof SO))throw new AI(NI.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(XI.fromString.apply(XI,[t].concat(r)));return gO(o),new IO(e.firestore,e instanceof SO?e.converter:null,new vT(o))}function NO(e,t){return e=_e(e),t=_e(t),(e instanceof IO||e instanceof SO)&&(t instanceof IO||t instanceof SO)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function AO(e,t){return e=_e(e),t=_e(t),e instanceof TO&&t instanceof TO&&e.firestore===t.firestore&&RS(e._query,t._query)&&e.converter===t.converter}var PO=function(){function e(){var t=this;c(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new SP(this,"async_queue_retry"),this.Qa=function(){var e=IP();e&&_I("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=IP();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return f(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=IP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new PI;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),JC(e.t0)){e.next=12;break}throw e.t0;case 12:_I("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xI("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=bR.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&SI()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=p(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function RO(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=p(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var DO=function(){function e(){c(this,e),this._progressObserver={},this._taskCompletionResolver=new PI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return f(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),OO=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new PO,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||LO(this),this._firestoreClient.terminate()}}]),n}(_O);function MO(e){return e._firestoreClient||LO(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function LO(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new lT(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new YD(e._authCredentials,e._appCheckCredentials,e._queue,r)}function FO(e,t,n){var r=new PI;return e.asyncQueue.enqueue(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$D(e,n);case 3:return i.next=5,JD(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===NI.FAILED_PRECONDITION||e.code===NI.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function UO(e){return function(e){return e.asyncQueue.enqueue(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aO(e);case 2:return n=t.sent,t.next=5,sO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=CI(e);return t.wu.delete(0),DP(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(MO(e=kO(e,OO)))}function jO(e){return function(e){return e.asyncQueue.enqueue(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aO(e);case 2:return n=t.sent,t.next=5,sO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=CI(t)).wu.add(0),e.next=4,MP(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(MO(e=kO(e,OO)))}function VO(e,t){var n=MO(e=kO(e,OO)),r=new DO;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GD(e,t)}(function(e,t){if(e instanceof Uint8Array)return KD(e,t);if(e instanceof ArrayBuffer)return KD(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,TP(t));e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=VD,t.next=3,uO(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function qO(e,t){return function(e,t){return e.asyncQueue.enqueue(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=CI(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,oO(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(MO(e=kO(e,OO)),t).then((function(t){return t?new TO(e,null,t.query):null}))}function BO(e){if(e._initialized||e._terminated)throw new AI(NI.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zO=function(){function e(){c(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new AI(NI.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eT(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var WO=function(){function e(t){c(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(nT.fromBase64String(t))}catch(t){throw new AI(NI.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(nT.fromUint8Array(t))}}]),e}(),KO=f((function e(t){c(this,e),this._methodName=t})),HO=function(){function e(t,n){if(c(this,e),!isFinite(t)||t<-90||t>90)throw new AI(NI.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new AI(NI.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return zI(this._lat,e._lat)||zI(this._long,e._long)}}]),e}(),GO=/^__.*__$/,ZO=function(){function e(t,n,r){c(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new fE(e,this.data,this.fieldMask,t,this.fieldTransforms):new lE(e,this.data,t,this.fieldTransforms)}}]),e}(),QO=function(){function e(t,n,r){c(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new fE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function YO(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw SI()}}var $O=function(){function e(t,n,r,i,a,o){c(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return mM(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(YO(this.ec)&&GO.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),XO=function(){function e(t,n,r){c(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||TP(t)}return f(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $O({ec:e,methodName:t,hc:n,path:eT.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function JO(e){var t=e._freezeSettings(),n=TP(e._databaseId);return new XO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function eM(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);dM("Data must be an object, but it was:",o,r);var s,u,c=fM(r,o);if(a.merge)s=new tT(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=p(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,v=pM(t,d,n);if(!o.contains(v))throw new AI(NI.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));yM(f,v)||f.push(v)}}catch(g){h.e(g)}finally{h.f()}s=new tT(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new ZO(new FT(c),s,u)}var tM=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(KO);function nM(e,t,n){return new $O({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var rM=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){return new eE(e.path,new HS)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(KO),iM=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).fc=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=nM(this,e,!0),n=this.fc.map((function(e){return lM(e,t)})),r=new GS(n);return new eE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(KO),aM=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).fc=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=nM(this,e,!0),n=this.fc.map((function(e){return lM(e,t)})),r=new QS(n);return new eE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(KO),oM=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).dc=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=new $S(e.M,qS(e.M,this.dc));return new eE(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(KO);function sM(e,t,n,r){var i=e.lc(1,t,n);dM("Data must be an object, but it was:",i,r);var a=[],o=FT.empty();QI(r,(function(e,r){var s=gM(t,e,n);r=_e(r);var u=i.oc(s);if(r instanceof tM)a.push(s);else{var c=lM(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new tT(a);return new QO(o,s,i.fieldTransforms)}function uM(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[pM(t,r,n)],u=[i];if(a.length%2!=0)throw new AI(NI.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(pM(t,a[c])),u.push(a[c+1]);for(var l=[],f=FT.empty(),h=s.length-1;h>=0;--h)if(!yM(l,s[h])){var d=s[h],p=u[h];p=_e(p);var v=o.oc(d);if(p instanceof tM)l.push(d);else{var g=lM(p,v);null!=g&&(l.push(d),f.set(d,g))}}var m=new tT(l);return new QO(f,m,o.fieldTransforms)}function cM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lM(n,e.lc(r?4:3,t))}function lM(e,t){if(hM(e=_e(e)))return dM("Unsupported field value:",t,e),fM(e,t);if(e instanceof KO)return function(e,t){if(!YO(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=lM(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=_e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qS(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=HI.fromDate(e);return{timestampValue:KE(t.M,n)}}if(e instanceof HI){var r=new HI(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:KE(t.M,r)}}if(e instanceof HO)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof WO)return{bytesValue:HE(t.M,e._byteString)};if(e instanceof IO){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:QE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(yO(e)))}(e,t)}function fM(e,t){var n={};return YI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):QI(e,(function(e,r){var i=lM(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function hM(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof HI||e instanceof HO||e instanceof WO||e instanceof IO||e instanceof KO)}function dM(e,t,n){if(!hM(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=yO(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function pM(e,t,n){if((t=_e(t))instanceof zO)return t._internalPath;if("string"==typeof t)return gM(e,t);throw mM("Field path arguments must be of type string or ",e,!1,void 0,n)}var vM=new RegExp("[~\\*/\\[\\]]");function gM(e,t,n){if(t.search(vM)>=0)throw mM("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(zO,(0,xe.Z)(t.split(".")))._internalPath}catch(r){throw mM("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function mM(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new AI(NI.INVALID_ARGUMENT,s+e+u)}function yM(e,t){return e.some((function(e){return e.isEqual(t)}))}var kM=function(){function e(t,n,r,i,a){c(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new IO(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new bM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(wM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),bM=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return za(y(n.prototype),"data",this).call(this)}}]),n}(kM);function wM(e,t){return"string"==typeof t?gM(e,t):t instanceof zO?t._internalPath:t._delegate._internalPath}var _M=function(){function e(t,n){c(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),xM=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return f(n,[{key:"exists",value:function(){return za(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new IM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(wM("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(kM),IM=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return za(y(n.prototype),"data",this).call(this,e)}}]),n}(xM),TM=function(){function e(t,n,r,i){c(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new _M(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new IM(n._firestore,n._userDataWriter,r.key,r,new _M(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new AI(NI.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new IM(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _M(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new IM(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _M(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:SM(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function SM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return SI()}}function EM(e,t){return e instanceof xM&&t instanceof xM?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof TM&&t instanceof TM&&e._firestore===t._firestore&&AO(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function CM(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new AI(NI.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var NM=f((function e(){c(this,e)}));function AM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var PM=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return f(n,[{key:"_apply",value:function(e){var t=JO(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new AI(NI.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){BM(o,a);var u,c=[],l=p(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(qM(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=qM(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||BM(o,a),s=cM(n,"where",o,"in"===a||"not-in"===a);var h=cS.create(i,a,s);return function(e,t){if(t.S()){var n=ES(e);if(null!==n&&!n.isEqual(t.field))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=SS(e);null!==r&&zM(e,t.field,r)}var i=function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new AI(NI.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new AI(NI.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new TO(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new xS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(NM);var RM=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return f(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new AI(NI.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new AI(NI.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new kS(t,n);return function(e,t){if(null===SS(e)){var n=ES(e);null!==n&&zM(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new TO(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new xS(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(NM);var DM=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return f(n,[{key:"_apply",value:function(e){return new TO(e.firestore,e.converter,PS(e._query,this.yc,this.Ic))}}]),n}(NM);var OM=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return f(n,[{key:"_apply",value:function(e){var t=VM(e,this.type,this.Tc,this.Ec);return new TO(e.firestore,e.converter,function(e,t){return new xS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(NM);function MM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OM("startAt",t,!0)}function LM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OM("startAfter",t,!1)}var FM=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return f(n,[{key:"_apply",value:function(e){var t=VM(e,this.type,this.Tc,this.Ec);return new TO(e.firestore,e.converter,function(e,t){return new xS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(NM);function UM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FM("endBefore",t,!1)}function jM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FM("endAt",t,!0)}function VM(e,t,n,r){if(n[0]=_e(n[0]),n[0]instanceof kM)return function(e,t,n,r,i){if(!r)throw new AI(NI.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=p(NS(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(TT(t,r.key));else{var c=r.data.field(u.field);if(sT(c))throw new AI(NI.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new AI(NI.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new yS(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=JO(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new AI(NI.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new AI(NI.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!CS(e)&&-1!==c.indexOf("/"))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(XI.fromString(c));if(!vT.isDocumentKey(l))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new vT(l);s.push(TT(t,f))}else{var h=cM(n,r,c);s.push(h)}}return new yS(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function qM(e,t,n){if("string"==typeof(n=_e(n))){if(""===n)throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(t)&&-1!==n.indexOf("/"))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(XI.fromString(n));if(!vT.isDocumentKey(r))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return TT(e,new vT(r))}if(n instanceof IO)return TT(e,n._key);throw new AI(NI.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yO(n),"."))}function BM(e,t){if(!Array.isArray(e)||0===e.length)throw new AI(NI.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new AI(NI.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function zM(e,t,n){if(!n.isEqual(t))throw new AI(NI.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var WM={maxAttempts:5},KM=function(){function e(){c(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yT(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aT(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oT(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw SI()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return QI(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new HO(aT(e.latitude),aT(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=uT(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cT(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=iT(e);return new HI(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=XI.fromString(e);EI(kC(n));var r=new fT(n.get(1),n.get(3)),i=new vT(n.popFirst(5));return r.isEqual(t)||xI("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function HM(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var GM=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new WO(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new IO(this.firestore,null,t)}}]),n}(KM),ZM=function(){function e(t,n){c(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=JO(t)}return f(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=QM(e,this._firestore),i=HM(r.converter,t,n),a=eM(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,nE.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=QM(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=_e(t))||t instanceof zO?uM(this._dataReader,"WriteBatch.update",i._key,t,n,o):sM(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,nE.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=QM(e,this._firestore);return this._mutations=this._mutations.concat(new mE(t._key,nE.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new AI(NI.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function QM(e,t){if((e=_e(e)).firestore!==t)throw new AI(NI.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var YM=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new WO(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new IO(this.firestore,null,t)}}]),n}(KM);function $M(e){e=kO(e,IO);var t=kO(e.firestore,OO),n=MO(t),r=new YM(t);return function(e,t){var n=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=CI(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new AI(NI.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wR(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new xM(t,r,e._key,n,new _M(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function XM(e){e=kO(e,TO);var t=kO(e.firestore,OO),n=MO(t),r=new YM(t);return function(e,t){var n=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zA(t,n,!0);case 3:i=e.sent,a=new qR(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=wR(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new TM(t,r,e,n)}))}function JM(e,t,n){e=kO(e,IO);var r=kO(e.firestore,OO),i=HM(e.converter,t,n);return rL(r,[eM(JO(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,nE.none())])}function eL(e,t,n){e=kO(e,IO);for(var r=kO(e.firestore,OO),i=JO(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return rL(r,[("string"==typeof(t=_e(t))||t instanceof zO?uM(i,"updateDoc",e._key,t,n,o):sM(i,"updateDoc",e._key,t)).toMutation(e._key,nE.exists(!0))])}function tL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=_e(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||RO(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(RO(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[l+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof IO)h=kO(e.firestore,OO),d=TS(e._key.path),f={next:function(t){n[l]&&n[l](iL(h,e,t))},error:n[l+1],complete:n[l+2]};else{var g=kO(e,TO);h=kO(g.firestore,OO),d=g._query;var m=new YM(h);f={next:function(e){n[l]&&n[l](new TM(h,m,g,e))},error:n[l+1],complete:n[l+2]},CM(e._query)}return function(e,t,n,r){var i=new HD(r),o=new OR(t,i,n);return e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ER,t.next=3,cO(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NR,t.next=3,cO(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MO(h),d,p,f)}function nL(e,t){return function(e,t){var n=new HD(t);return e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){CI(e).bu.add(t),t.next()},t.next=3,cO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){CI(e).bu.delete(t)},t.next=3,cO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MO(e=kO(e,OO)),RO(t)?t:{next:t})}function rL(e,t){return function(e,t){var n=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$R,r.next=3,uO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(MO(e),t)}function iL(e,t,n){var r=n.docs.get(t._key),i=new YM(e);return new xM(e,i,t._key,r,new _M(n.hasPendingWrites,n.fromCache),t.converter)}var aL=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r))._firestore=e,i}return f(n,[{key:"get",value:function(e){var t=this,r=QM(e,this._firestore),i=new YM(this._firestore);return za(y(n.prototype),"get",this).call(this,e).then((function(e){return new xM(t._firestore,i,r._key,e._document,new _M(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){c(this,e),this._firestore=t,this._transaction=n,this._dataReader=JO(t)}return f(e,[{key:"get",value:function(e){var t=this,n=QM(e,this._firestore),r=new GM(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return SI();var i=e[0];if(i.isFoundDocument())return new kM(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new kM(t._firestore,r,n._key,null,n.converter);throw SI()}))}},{key:"set",value:function(e,t,n){var r=QM(e,this._firestore),i=HM(r.converter,t,n),a=eM(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=QM(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=_e(t))||t instanceof zO?uM(this._dataReader,"Transaction.update",i._key,t,n,o):sM(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=QM(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function oL(e,t,n){e=kO(e,OO);var r=Object.assign(Object.assign({},WM),n);return function(e){if(e.maxAttempts<1)throw new AI(NI.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function i(){var a;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return rO(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new QD(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(MO(e),(function(n){return t(new aL(e,n))}),r)}function sL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iM("arrayUnion",t)}function uL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aM("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kI=e}(wt),pt(new Ie("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new OO(i,new MI(e.getProvider("auth-internal")),new jI(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Et(mI,"3.4.9",e),Et(mI,"3.4.9","esm2017")}();function cL(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new AI("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function lL(){if("undefined"===typeof Uint8Array)throw new AI("unimplemented","Uint8Arrays are not available in this environment.")}function fL(){if("undefined"==typeof atob)throw new AI("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hL=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"toBase64",value:function(){return fL(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return lL(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return fL(),new e(WO.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return lL(),new e(WO.fromUint8Array(t))}}]),e}();function dL(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=p(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var pL=function(){function e(){c(this,e)}return f(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){BO(e=kO(e,OO));var n=MO(e),r=e._freezeSettings(),i=new WD;return FO(n,i,new BD(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){BO(e=kO(e,OO));var t=MO(e),n=e._freezeSettings(),r=new WD;return FO(t,r,new zD(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new AI(NI.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new PI;return e._queue.enqueueAndForgetEvenWhileRestricted(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(YC.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,YC.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(EA(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),vL=function(){function e(t,n,r){var i=this;c(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fT||(this._appCompat=t)}return f(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||II("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xO(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return UO(this._delegate)}},{key:"disableNetwork",value:function(){return jO(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&vO("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new PI;return e.asyncQueue.enqueueAndForget(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=uD,n.next=3,uO(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(MO(e=kO(e,OO)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return nL(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new AI("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new NL(this,EO(this._delegate,e))}catch(t){throw wL(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new bL(this,CO(this._delegate,e))}catch(t){throw wL(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new SL(this,function(e,t){if(e=kO(e,_O),pO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new AI(NI.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new TO(e,null,function(e){return new xS(XI.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wL(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return oL(this._delegate,(function(n){return e(new mL(t,n))}))}},{key:"batch",value:function(){var e=this;return MO(this._delegate),new yL(new ZM(this._delegate,(function(t){return rL(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return VO(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return qO(this._delegate,e).then((function(e){return e?new SL(t,e):null}))}}]),e}(),gL=function(e){m(n,e);var t=_(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new hL(new WO(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return bL.forKey(t,this.firestore,null)}}]),n}(KM);var mL=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new gL(t)}return f(e,[{key:"get",value:function(e){var t=this,n=AL(e);return this._delegate.get(n).then((function(e){return new IL(t._firestore,new xM(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=AL(e);return n?(cL("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AL(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AL(e);return this._delegate.delete(t),this}}]),e}(),yL=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"set",value:function(e,t,n){var r=AL(e);return n?(cL("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=AL(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=AL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),kL=function(){function e(t,n,r){c(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return f(e,[{key:"fromFirestore",value:function(e,t){var n=new IM(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new gL(t),n),i.set(n,a)),a}}]),e}();kL.INSTANCES=new WeakMap;var bL=function(){function e(t,n){c(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gL(t)}return f(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new NL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new NL(this.firestore,EO(this._delegate,e))}catch(t){throw wL(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=_e(e))instanceof IO&&NO(this._delegate,e)}},{key:"set",value:function(e,t){t=cL("DocumentReference.set",t);try{return t?JM(this._delegate,e,t):JM(this._delegate,e)}catch(n){throw wL(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?eL(this._delegate,e):eL.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw wL(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return rL(kO(e.firestore,OO),[new mE(e._key,nE.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_L(n),a=xL(n,(function(t){return new IL(e.firestore,new xM(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return tL(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$M(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kO(e,IO);var t=kO(e.firestore,OO);return fO(MO(t),e._key,{source:"server"}).then((function(n){return iL(t,e,n)}))}(this._delegate):function(e){e=kO(e,IO);var t=kO(e.firestore,OO);return fO(MO(t),e._key).then((function(n){return iL(t,e,n)}))}(this._delegate),t.then((function(e){return new IL(n.firestore,new xM(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(kL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new AI("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new IO(n._delegate,r,new vT(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new IO(n._delegate,r,t))}}]),e}();function wL(e,t,n){return e.message=e.message.replace(t,n),e}function _L(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!dL(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function xL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=dL(e[0])?e[0]:dL(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var IL=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"ref",get:function(){return new bL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return EM(this._delegate,e._delegate)}}]),e}(),TL=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||SI()}(void 0!==t),t}}]),n}(IL),SL=function(){function e(t,n){c(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gL(t)}return f(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,AM(this._delegate,function(e,t,n){var r=t,i=wM("where",e);return new PM(i,r,n)}(t,n,r)))}catch(i){throw wL(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,AM(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wM("orderBy",e);return new RM(n,t)}(t,n)))}catch(r){throw wL(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,AM(this._delegate,function(e){return bO("limit",e),new DM("limit",e,"F")}(t)))}catch(n){throw wL(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,AM(this._delegate,function(e){return bO("limitToLast",e),new DM("limitToLast",e,"L")}(t)))}catch(n){throw wL(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,AM(this._delegate,MM.apply(void 0,arguments)))}catch(t){throw wL(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,AM(this._delegate,LM.apply(void 0,arguments)))}catch(t){throw wL(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,AM(this._delegate,UM.apply(void 0,arguments)))}catch(t){throw wL(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,AM(this._delegate,jM.apply(void 0,arguments)))}catch(t){throw wL(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return AO(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?XM(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kO(e,TO);var t=kO(e.firestore,OO),n=MO(t),r=new YM(t);return hO(n,e._query,{source:"server"}).then((function(n){return new TM(t,r,e,n)}))}(this._delegate):function(e){e=kO(e,TO);var t=kO(e.firestore,OO),n=MO(t),r=new YM(t);return CM(e._query),hO(n,e._query).then((function(n){return new TM(t,r,e,n)}))}(this._delegate),t.then((function(e){return new CL(n.firestore,new TM(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_L(n),a=xL(n,(function(t){return new CL(e.firestore,new TM(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return tL(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(kL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),EL=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new TL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),CL=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"query",get:function(){return new SL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new TL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new EL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new TL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return EM(this._delegate,e._delegate)}}]),e}(),NL=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return f(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new bL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new bL(this.firestore,void 0===e?CO(this._delegate):CO(this._delegate,e))}catch(t){throw wL(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=kO(e.firestore,OO),r=CO(e),i=HM(e.converter,t);return rL(n,[eM(JO(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,nE.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new bL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return NO(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(kL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(SL);function AL(e){return kO(e,IO)}var PL=function(){function e(){c(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(zO,n)}return f(e,[{key:"isEqual",value:function(e){return(e=_e(e))instanceof zO&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(eT.keyField().canonicalString())}}]),e}(),RL=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new rM("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new tM("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=sL.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=uL.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new oM("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),DL={Firestore:vL,GeoPoint:HO,Timestamp:HI,Blob:hL,Transaction:mL,WriteBatch:yL,DocumentReference:bL,DocumentSnapshot:IL,Query:SL,QueryDocumentSnapshot:TL,QuerySnapshot:CL,CollectionReference:NL,FieldPath:PL,FieldValue:RL,setLogLevel:function(e){!function(e){bI.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ie("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},DL)))}(e,(function(e,t){return new vL(e,t,new pL)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Xt);function OL(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function ML(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return ML(e)}));if("function"===typeof e||"object"===typeof e)return OL(e,(function(e){return ML(e)}));throw new Error("Data cannot be encoded in JSON: "+e)}function LL(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return LL(e)})):"function"===typeof e||"object"===typeof e?OL(e,(function(e){return LL(e)})):e}var FL="functions",UL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jL=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,"".concat(FL,"/").concat(e),r||"")).details=i,a}return f(n)}(Z);function VL(e,t){var n=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),r=n,i=void 0;try{var a=t&&t.error;if(a){var o=a.status;if("string"===typeof o){if(!UL[o])return new jL("internal","internal");n=UL[o],r=o}var s=a.message;"string"===typeof s&&(r=s),void 0!==(i=a.details)&&(i=LL(i))}}catch(u){}return"ok"===n?null:new jL(n,r,i)}var qL=function(){function e(t,n,r){var i=this;c(this,e),this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((function(e){return i.auth=e}),(function(){})),this.messaging||n.get().then((function(e){return i.messaging=e}),(function(){})),this.appCheck||r.get().then((function(e){return i.appCheck=e}),(function(){}))}return f(e,[{key:"getAuthToken",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.auth.getToken();case 5:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.accessToken);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getMessagingToken",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.messaging&&"Notification"in self&&"granted"===Notification.permission){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.messaging.getToken();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAppCheckToken",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appCheck){e.next=7;break}return e.next=3,this.appCheck.getToken();case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",t.token);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){var e=a(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthToken();case 2:return t=e.sent,e.next=5,this.getMessagingToken();case 5:return n=e.sent,e.next=8,this.getAppCheckToken();case 8:return r=e.sent,e.abrupt("return",{authToken:t,messagingToken:n,appCheckToken:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BL="us-central1";function zL(e){var t=null;return{promise:new Promise((function(n,r){t=setTimeout((function(){r(new jL("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:function(){t&&clearTimeout(t)}}}var WL=function(){function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:BL,s=arguments.length>5?arguments[5]:void 0;c(this,e),this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new qL(n,r,i),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return Promise.resolve(e())}}));try{var u=new URL(o);this.customDomain=u.origin,this.region=BL}catch(l){this.customDomain=null,this.region=o}}return f(e,[{key:"_delete",value:function(){return this.deleteService()}},{key:"_url",value:function(e){var t=this.app.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}]),e}();function KL(e,t,n){return function(r){return function(e,t,n,r){var i=e._url(t);return ZL(e,i,n,r)}(e,t,r,n||{})}}function HL(e,t,n,r){return GL.apply(this,arguments)}function GL(){return(GL=a(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r["Content-Type"]="application/json",e.prev=1,e.next=4,i(t,{method:"POST",body:JSON.stringify(n),headers:r});case 4:a=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{status:0,json:null});case 10:return o=null,e.prev=11,e.next=14,a.json();case 14:o=e.sent,e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:return e.abrupt("return",{status:a.status,json:o});case 20:case"end":return e.stop()}}),e,null,[[1,7],[11,17]])})))).apply(this,arguments)}function ZL(e,t,n,r){return QL.apply(this,arguments)}function QL(){return QL=a(u().mark((function e(t,n,r,i){var a,o,s,c,l,f,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ML(r),a={data:r},o={},e.next=5,t.contextProvider.getContext();case 5:return(s=e.sent).authToken&&(o.Authorization="Bearer "+s.authToken),s.messagingToken&&(o["Firebase-Instance-ID-Token"]=s.messagingToken),null!==s.appCheckToken&&(o["X-Firebase-AppCheck"]=s.appCheckToken),c=i.timeout||7e4,l=zL(c),e.next=13,Promise.race([HL(n,a,o,t.fetchImpl),l.promise,t.cancelAllRequests]);case 13:if(f=e.sent,l.cancel(),f){e.next=17;break}throw new jL("cancelled","Firebase Functions instance was deleted.");case 17:if(!(h=VL(f.status,f.json))){e.next=20;break}throw h;case 20:if(f.json){e.next=22;break}throw new jL("internal","Response is not valid JSON object.");case 22:if("undefined"===typeof(d=f.json.data)&&(d=f.json.result),"undefined"!==typeof d){e.next=26;break}throw new jL("internal","Response is missing data field.");case 26:return p=LL(d),e.abrupt("return",{data:p});case 28:case"end":return e.stop()}}),e)}))),QL.apply(this,arguments)}var YL="@firebase/functions",$L="0.8.1";function XL(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(_e(e),t,n)}function JL(e,t,n){return function(e,t,n){return function(r){return ZL(e,t,r,n||{})}}(_e(e),t,n)}!function(e,t){pt(new Ie(FL,(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),o=t.getProvider("messaging-internal"),s=t.getProvider("app-check-internal");return new WL(i,a,o,s,r,e)}),"PUBLIC").setMultipleInstances(!0)),Et(YL,$L,t),Et(YL,$L,"esm2017")}(fetch.bind(self));var eF,tF=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}return f(e,[{key:"httpsCallable",value:function(e,t){return function(e,t,n){return KL(_e(e),t,n)}(this._delegate,e,t)}},{key:"httpsCallableFromURL",value:function(e,t){return JL(this._delegate,e,t)}},{key:"useFunctionsEmulator",value:function(e){var t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==t)throw new Z("functions","No origin provided to useFunctionsEmulator()");if(null==t[2])throw new Z("functions","Port missing in origin provided to useFunctionsEmulator()");return XL(this._delegate,t[1],Number(t[2]))}},{key:"useEmulator",value:function(e,t){return XL(this._delegate,e,t)}}]),e}(),nF=function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("functions").getImmediate({identifier:null!==n&&void 0!==n?n:"us-central1"});return new tF(r,i)};!function(){var e={Functions:tF};Xt.INTERNAL.registerComponent(new Ie("functions-compat",nF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),Xt.registerVersion("@firebase/functions-compat","0.2.1");var rF,iF,aF="/firebase-messaging-sw.js",oF="/firebase-cloud-messaging-push-scope",sF="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uF="google.c.a.c_id";function cF(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,xe.Z)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lF(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(rF||(rF={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(iF||(iF={}));var fF="fcm_token_details_db",hF="fcm_token_object_Store";function dF(e){return pF.apply(this,arguments)}function pF(){return pF=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("databases"in indexedDB)){e.next=7;break}return e.next=3,indexedDB.databases();case 3:if(n=e.sent,r=n.map((function(e){return e.name})),r.includes(fF)){e.next=7;break}return e.abrupt("return",null);case 7:return i=null,e.next=10,Ye(fF,5,{upgrade:function(){var e=a(s.mark((function e(n,r,a,o){var u,c,l,f,h,d;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<2)){e.next=2;break}return e.abrupt("return");case 2:if(n.objectStoreNames.contains(hF)){e.next=4;break}return e.abrupt("return");case 4:return c=o.objectStore(hF),e.next=7,c.index("fcmSenderId").get(t);case 7:return l=e.sent,e.next=10,c.clear();case 10:if(l){e.next=12;break}return e.abrupt("return");case 12:if(2!==r){e.next=19;break}if((f=l).auth&&f.p256dh&&f.endpoint){e.next=16;break}return e.abrupt("return");case 16:i={token:f.fcmToken,createTime:null!==(u=f.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:"string"===typeof f.vapidKey?f.vapidKey:cF(f.vapidKey)}},e.next=20;break;case 19:3===r?i={token:(h=l).fcmToken,createTime:h.createTime,subscriptionOptions:{auth:cF(h.auth),p256dh:cF(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:cF(h.vapidKey)}}:4===r&&(i={token:(d=l).fcmToken,createTime:d.createTime,subscriptionOptions:{auth:cF(d.auth),p256dh:cF(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:cF(d.vapidKey)}});case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()});case 10:return e.sent.close(),e.next=14,$e(fF);case 14:return e.next=16,$e("fcm_vapid_details_db");case 16:return e.next=18,$e("undefined");case 18:return e.abrupt("return",vF(i)?i:null);case 19:case"end":return e.stop()}}),e)}))),pF.apply(this,arguments)}function vF(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var gF="firebase-messaging-store",mF=null;function yF(){return mF||(mF=Ye("firebase-messaging-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(gF)}})),mF}function kF(e){return bF.apply(this,arguments)}function bF(){return bF=a(s.mark((function e(t){var n,r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=TF(t),e.next=3,yF();case 3:return r=e.sent,e.next=6,r.transaction(gF).objectStore(gF).get(n);case 6:if(!(i=e.sent)){e.next=11;break}return e.abrupt("return",i);case 11:return e.next=13,dF(t.appConfig.senderId);case 13:if(!(a=e.sent)){e.next=18;break}return e.next=17,wF(t,a);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)}))),bF.apply(this,arguments)}function wF(e,t){return _F.apply(this,arguments)}function _F(){return _F=a(s.mark((function e(t,n){var r,i,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TF(t),e.next=3,yF();case 3:return i=e.sent,a=i.transaction(gF,"readwrite"),e.next=7,a.objectStore(gF).put(n,r);case 7:return e.next=9,a.done;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),_F.apply(this,arguments)}function xF(e){return IF.apply(this,arguments)}function IF(){return IF=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=TF(t),e.next=3,yF();case 3:return r=e.sent,i=r.transaction(gF,"readwrite"),e.next=7,i.objectStore(gF).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),IF.apply(this,arguments)}function TF(e){return e.appConfig.appId}var SF=(eF={},(0,h.Z)(eF,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,h.Z)(eF,"only-available-in-window","This method is available in a Window context."),(0,h.Z)(eF,"only-available-in-sw","This method is available in a service worker context."),(0,h.Z)(eF,"permission-default","The notification permission was not granted and dismissed instead."),(0,h.Z)(eF,"permission-blocked","The notification permission was not granted and blocked instead."),(0,h.Z)(eF,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,h.Z)(eF,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,h.Z)(eF,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,h.Z)(eF,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,h.Z)(eF,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,h.Z)(eF,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,h.Z)(eF,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,h.Z)(eF,"token-update-no-token","FCM returned no token when updating the user to push."),(0,h.Z)(eF,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,h.Z)(eF,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,h.Z)(eF,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,h.Z)(eF,"invalid-vapid-key","The public VAPID key must be a string."),(0,h.Z)(eF,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),eF),EF=new Q("messaging","Messaging",SF);function CF(e,t){return NF.apply(this,arguments)}function NF(){return(NF=a(s.mark((function e(t,n){var r,i,a,o,u,c;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MF(t);case 2:return r=e.sent,i=FF(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(OF(t.appConfig),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),EF.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw c=o.error.message,EF.create("token-subscribe-failed",{errorInfo:c});case 20:if(o.token){e.next=22;break}throw EF.create("token-subscribe-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function AF(e,t){return PF.apply(this,arguments)}function PF(){return(PF=a(s.mark((function e(t,n){var r,i,a,o,u,c;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MF(t);case 2:return r=e.sent,i=FF(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(OF(t.appConfig),"/").concat(n.token),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),EF.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw c=o.error.message,EF.create("token-update-failed",{errorInfo:c});case 20:if(o.token){e.next=22;break}throw EF.create("token-update-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function RF(e,t){return DF.apply(this,arguments)}function DF(){return(DF=a(s.mark((function e(t,n){var r,i,a,o,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MF(t);case 2:return r=e.sent,i={method:"DELETE",headers:r},e.prev=4,e.next=7,fetch("".concat(OF(t.appConfig),"/").concat(n),i);case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(o=e.sent).error){e.next=14;break}throw u=o.error.message,EF.create("token-unsubscribe-failed",{errorInfo:u});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(4),EF.create("token-unsubscribe-failed",{errorInfo:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function OF(e){var t=e.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}function MF(e){return LF.apply(this,arguments)}function LF(){return(LF=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FF(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==sF&&(a.web.applicationPubKey=i),a}var UF=6048e5;function jF(e){return VF.apply(this,arguments)}function VF(){return(VF=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GF(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:cF(n.getKey("auth")),p256dh:cF(n.getKey("p256dh"))},e.next=6,kF(t.firebaseDependencies);case 6:if(i=e.sent){e.next=11;break}return e.abrupt("return",KF(t.firebaseDependencies,r));case 11:if(QF(i.subscriptionOptions,r)){e.next=23;break}return e.prev=12,e.next=15,RF(t.firebaseDependencies,i.token);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.warn(e.t0);case 20:return e.abrupt("return",KF(t.firebaseDependencies,r));case 23:if(!(Date.now()>=i.createTime+UF)){e.next=27;break}return e.abrupt("return",zF(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}));case 27:return e.abrupt("return",i.token);case 28:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}function qF(e){return BF.apply(this,arguments)}function BF(){return(BF=a(s.mark((function e(t){var n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kF(t.firebaseDependencies);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,RF(t.firebaseDependencies,n.token);case 6:return e.next=8,xF(t.firebaseDependencies);case 8:return e.next=10,t.swRegistration.pushManager.getSubscription();case 10:if(!(r=e.sent)){e.next=13;break}return e.abrupt("return",r.unsubscribe());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zF(e,t){return WF.apply(this,arguments)}function WF(){return(WF=a(s.mark((function e(t,n){var r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,AF(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,wF(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,qF(t);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function KF(e,t){return HF.apply(this,arguments)}function HF(){return(HF=a(s.mark((function e(t,n){var r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CF(t,n);case 2:return r=e.sent,i={token:r,createTime:Date.now(),subscriptionOptions:n},e.next=6,wF(t,i);case 6:return e.abrupt("return",i.token);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GF(e,t){return ZF.apply(this,arguments)}function ZF(){return(ZF=a(s.mark((function e(t,n){var r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lF(n)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QF(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&r&&i&&a}function YF(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function $F(e){return"object"===typeof e&&!!e&&uF in e}function XF(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function JF(e){return EF.create("missing-app-config-values",{valueName:e})}XF("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),XF("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var eU=function(){function e(t,n,r){c(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw JF("App Configuration Object");if(!e.name)throw JF("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw JF(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return f(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function tU(e){return nU.apply(this,arguments)}function nU(){return(nU=a(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(aF,{scope:oF});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch((function(){})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),EF.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function rU(e,t){return iU.apply(this,arguments)}function iU(){return(iU=a(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||t.swRegistration){e.next=3;break}return e.next=3,tU(t);case 3:if(n||!t.swRegistration){e.next=5;break}return e.abrupt("return");case 5:if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw EF.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aU(e,t){return oU.apply(this,arguments)}function oU(){return(oU=a(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=sF);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sU(e,t){return uU.apply(this,arguments)}function uU(){return(uU=a(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw EF.create("only-available-in-window");case 2:if("default"!==Notification.permission){e.next=5;break}return e.next=5,Notification.requestPermission();case 5:if("granted"===Notification.permission){e.next=7;break}throw EF.create("permission-blocked");case 7:return e.next=9,aU(t,null===n||void 0===n?void 0:n.vapidKey);case 9:return e.next=11,rU(t,null===n||void 0===n?void 0:n.serviceWorkerRegistration);case 11:return e.abrupt("return",jF(t));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cU(e,t,n){return lU.apply(this,arguments)}function lU(){return(lU=a(s.mark((function e(t,n,r){var i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fU(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r["google.c.a.c_id"],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fU(e){switch(e){case iF.NOTIFICATION_CLICKED:return"notification_open";case iF.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hU(){return(hU=a(s.mark((function e(t,n){var r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===iF.PUSH_RECEIVED&&("function"===typeof t.onMessageHandler?t.onMessageHandler(YF(r)):t.onMessageHandler.next(YF(r))),!$F(i=r.data)||"1"!==i["google.c.a.e"]){e.next=8;break}return e.next=8,cU(t,r.messageType,i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dU,pU="@firebase/messaging",vU="0.9.13",gU=function(e){var t=new eU(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(function(e){return function(e,t){return hU.apply(this,arguments)}(t,e)})),t},mU=function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return sU(t,e)}}};function yU(){return(yU=a(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw EF.create("only-available-in-window");case 2:if(t.swRegistration){e.next=5;break}return e.next=5,tU(t);case 5:return e.abrupt("return",qF(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kU(e,t){return bU.apply(this,arguments)}function bU(){return(bU=a(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_e(t),e.abrupt("return",sU(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wU(e){return function(e){return yU.apply(this,arguments)}(e=_e(e))}function _U(e,t){return function(e,t){if(!navigator)throw EF.create("only-available-in-window");return e.onMessageHandler=t,function(){e.onMessageHandler=null}}(e=_e(e),t)}pt(new Ie("messaging",gU,"PUBLIC")),pt(new Ie("messaging-internal",mU,"PRIVATE")),Et(pU,vU),Et(pU,vU,"esm2017");var xU,IU,TU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",SU="FCM_MSG";function EU(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,xe.Z)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CU(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(xU||(xU={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(IU||(IU={}));var NU="fcm_token_details_db",AU="fcm_token_object_Store";function PU(e){return RU.apply(this,arguments)}function RU(){return RU=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("databases"in indexedDB)){e.next=7;break}return e.next=3,indexedDB.databases();case 3:if(n=e.sent,r=n.map((function(e){return e.name})),r.includes(NU)){e.next=7;break}return e.abrupt("return",null);case 7:return i=null,e.next=10,Ye(NU,5,{upgrade:function(){var e=a(u().mark((function e(n,r,a,o){var s,c,l,f,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<2)){e.next=2;break}return e.abrupt("return");case 2:if(n.objectStoreNames.contains(AU)){e.next=4;break}return e.abrupt("return");case 4:return c=o.objectStore(AU),e.next=7,c.index("fcmSenderId").get(t);case 7:return l=e.sent,e.next=10,c.clear();case 10:if(l){e.next=12;break}return e.abrupt("return");case 12:if(2!==r){e.next=19;break}if((f=l).auth&&f.p256dh&&f.endpoint){e.next=16;break}return e.abrupt("return");case 16:i={token:f.fcmToken,createTime:null!==(s=f.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:"string"===typeof f.vapidKey?f.vapidKey:EU(f.vapidKey)}},e.next=20;break;case 19:3===r?i={token:(h=l).fcmToken,createTime:h.createTime,subscriptionOptions:{auth:EU(h.auth),p256dh:EU(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:EU(h.vapidKey)}}:4===r&&(i={token:(d=l).fcmToken,createTime:d.createTime,subscriptionOptions:{auth:EU(d.auth),p256dh:EU(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:EU(d.vapidKey)}});case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()});case 10:return e.sent.close(),e.next=14,$e(NU);case 14:return e.next=16,$e("fcm_vapid_details_db");case 16:return e.next=18,$e("undefined");case 18:return e.abrupt("return",DU(i)?i:null);case 19:case"end":return e.stop()}}),e)}))),RU.apply(this,arguments)}function DU(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var OU="firebase-messaging-store",MU=null;function LU(){return MU||(MU=Ye("firebase-messaging-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(OU)}})),MU}function FU(e){return UU.apply(this,arguments)}function UU(){return UU=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zU(t),e.next=3,LU();case 3:return r=e.sent,e.next=6,r.transaction(OU).objectStore(OU).get(n);case 6:if(!(i=e.sent)){e.next=11;break}return e.abrupt("return",i);case 11:return e.next=13,PU(t.appConfig.senderId);case 13:if(!(a=e.sent)){e.next=18;break}return e.next=17,jU(t,a);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)}))),UU.apply(this,arguments)}function jU(e,t){return VU.apply(this,arguments)}function VU(){return VU=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zU(t),e.next=3,LU();case 3:return i=e.sent,a=i.transaction(OU,"readwrite"),e.next=7,a.objectStore(OU).put(n,r);case 7:return e.next=9,a.done;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),VU.apply(this,arguments)}function qU(e){return BU.apply(this,arguments)}function BU(){return BU=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zU(t),e.next=3,LU();case 3:return r=e.sent,i=r.transaction(OU,"readwrite"),e.next=7,i.objectStore(OU).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),BU.apply(this,arguments)}function zU(e){return e.appConfig.appId}var WU=(dU={},(0,h.Z)(dU,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,h.Z)(dU,"only-available-in-window","This method is available in a Window context."),(0,h.Z)(dU,"only-available-in-sw","This method is available in a service worker context."),(0,h.Z)(dU,"permission-default","The notification permission was not granted and dismissed instead."),(0,h.Z)(dU,"permission-blocked","The notification permission was not granted and blocked instead."),(0,h.Z)(dU,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,h.Z)(dU,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,h.Z)(dU,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,h.Z)(dU,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,h.Z)(dU,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,h.Z)(dU,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,h.Z)(dU,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,h.Z)(dU,"token-update-no-token","FCM returned no token when updating the user to push."),(0,h.Z)(dU,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,h.Z)(dU,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,h.Z)(dU,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,h.Z)(dU,"invalid-vapid-key","The public VAPID key must be a string."),(0,h.Z)(dU,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),dU),KU=new Q("messaging","Messaging",WU);function HU(e,t){return GU.apply(this,arguments)}function GU(){return(GU=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JU(t);case 2:return r=e.sent,i=tj(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(XU(t.appConfig),a);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),KU.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw c=o.error.message,KU.create("token-subscribe-failed",{errorInfo:c});case 20:if(o.token){e.next=22;break}throw KU.create("token-subscribe-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function ZU(e,t){return QU.apply(this,arguments)}function QU(){return(QU=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JU(t);case 2:return r=e.sent,i=tj(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(XU(t.appConfig),"/").concat(n.token),a);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),KU.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw c=o.error.message,KU.create("token-update-failed",{errorInfo:c});case 20:if(o.token){e.next=22;break}throw KU.create("token-update-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function YU(e,t){return $U.apply(this,arguments)}function $U(){return($U=a(u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JU(t);case 2:return r=e.sent,i={method:"DELETE",headers:r},e.prev=4,e.next=7,fetch("".concat(XU(t.appConfig),"/").concat(n),i);case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(o=e.sent).error){e.next=14;break}throw s=o.error.message,KU.create("token-unsubscribe-failed",{errorInfo:s});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(4),KU.create("token-unsubscribe-failed",{errorInfo:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function XU(e){var t=e.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}function JU(e){return ej.apply(this,arguments)}function ej(){return(ej=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tj(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==TU&&(a.web.applicationPubKey=i),a}var nj=6048e5;function rj(e){return ij.apply(this,arguments)}function ij(){return(ij=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fj(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:EU(n.getKey("auth")),p256dh:EU(n.getKey("p256dh"))},e.next=6,FU(t.firebaseDependencies);case 6:if(i=e.sent){e.next=11;break}return e.abrupt("return",cj(t.firebaseDependencies,r));case 11:if(dj(i.subscriptionOptions,r)){e.next=23;break}return e.prev=12,e.next=15,YU(t.firebaseDependencies,i.token);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.warn(e.t0);case 20:return e.abrupt("return",cj(t.firebaseDependencies,r));case 23:if(!(Date.now()>=i.createTime+nj)){e.next=27;break}return e.abrupt("return",sj(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}));case 27:return e.abrupt("return",i.token);case 28:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}function aj(e){return oj.apply(this,arguments)}function oj(){return(oj=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FU(t.firebaseDependencies);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,YU(t.firebaseDependencies,n.token);case 6:return e.next=8,qU(t.firebaseDependencies);case 8:return e.next=10,t.swRegistration.pushManager.getSubscription();case 10:if(!(r=e.sent)){e.next=13;break}return e.abrupt("return",r.unsubscribe());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sj(e,t){return uj.apply(this,arguments)}function uj(){return(uj=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ZU(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,jU(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,aj(t);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function cj(e,t){return lj.apply(this,arguments)}function lj(){return(lj=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HU(t,n);case 2:return r=e.sent,i={token:r,createTime:Date.now(),subscriptionOptions:n},e.next=6,jU(t,i);case 6:return e.abrupt("return",i.token);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fj(e,t){return hj.apply(this,arguments)}function hj(){return(hj=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:CU(n)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dj(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&r&&i&&a}function pj(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function vj(e){return new Promise((function(t){setTimeout(t,e)}))}function gj(e,t){return mj.apply(this,arguments)}function mj(){return(mj=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=yj,e.t1=n,e.next=4,t.firebaseDependencies.installations.getId();case 4:e.t2=e.sent,r=(0,e.t0)(e.t1,e.t2),kj(t,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yj(e,t){var n,r,i={};return e.from&&(i.project_number=e.from),e.fcmMessageId&&(i.message_id=e.fcmMessageId),i.instance_id=t,e.notification?i.message_type=xU.DISPLAY_NOTIFICATION.toString():i.message_type=xU.DATA_MESSAGE.toString(),i.sdk_platform=3..toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(i.collapse_key=e.collapse_key),i.event=1..toString(),(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)&&(i.analytics_label=null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label),i}function kj(e,t){var n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),e.logEvents.push(n)}function bj(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function wj(){return wj=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.newSubscription){e.next=5;break}return e.next=4,aj(n);case 4:return e.abrupt("return");case 5:return e.next=7,FU(n.firebaseDependencies);case 7:return a=e.sent,e.next=10,aj(n);case 10:return n.vapidKey=null!==(i=null===(r=null===a||void 0===a?void 0:a.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:TU,e.next=13,rj(n);case 13:case"end":return e.stop()}}),e)}))),wj.apply(this,arguments)}function _j(){return(_j=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Tj(t)){e.next=3;break}return e.abrupt("return");case 3:if(!n.deliveryMetricsExportedToBigQueryEnabled){e.next=6;break}return e.next=6,gj(n,r);case 6:return e.next=8,Aj();case 8:if(!Cj(i=e.sent)){e.next=11;break}return e.abrupt("return",Nj(i,r));case 11:if(!r.notification){e.next=14;break}return e.next=14,Pj(Ij(r));case 14:if(n){e.next=16;break}return e.abrupt("return");case 16:if(!n.onBackgroundMessageHandler){e.next=24;break}if(a=pj(r),"function"!==typeof n.onBackgroundMessageHandler){e.next=23;break}return e.next=21,n.onBackgroundMessageHandler(a);case 21:e.next=24;break;case 23:n.onBackgroundMessageHandler.next(a);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xj(){return xj=a(u().mark((function e(t){var n,r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(r=null===(n=t.notification)||void 0===n?void 0:n.data)||void 0===r?void 0:r.FCM_MSG){e.next=5;break}return e.abrupt("return");case 5:if(!t.action){e.next=7;break}return e.abrupt("return");case 7:if(t.stopImmediatePropagation(),t.notification.close(),a=Rj(i)){e.next=12;break}return e.abrupt("return");case 12:if(o=new URL(a,self.location.href),s=new URL(self.location.origin),o.host===s.host){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Sj(o);case 18:if(c=e.sent){e.next=27;break}return e.next=22,self.clients.openWindow(a);case 22:return c=e.sent,e.next=25,vj(3e3);case 25:e.next=30;break;case 27:return e.next=29,c.focus();case 29:c=e.sent;case 30:if(c){e.next=32;break}return e.abrupt("return");case 32:return i.messageType=IU.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,e.abrupt("return",c.postMessage(i));case 35:case"end":return e.stop()}}),e)}))),xj.apply(this,arguments)}function Ij(e){var t=Object.assign({},e.notification);return t.data=(0,h.Z)({},SU,e),t}function Tj(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function Sj(e){return Ej.apply(this,arguments)}function Ej(){return Ej=a(u().mark((function e(t){var n,r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj();case 2:n=e.sent,r=p(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=13;break}if(a=i.value,o=new URL(a.url,self.location.href),t.host!==o.host){e.next=11;break}return e.abrupt("return",a);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])}))),Ej.apply(this,arguments)}function Cj(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}function Nj(e,t){t.isFirebaseMessaging=!0,t.messageType=IU.PUSH_RECEIVED;var n,r=p(e);try{for(r.s();!(n=r.n()).done;){n.value.postMessage(t)}}catch(i){r.e(i)}finally{r.f()}}function Aj(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Pj(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports ".concat(r," actions. The remaining actions will not be displayed.")),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function Rj(e){var t,n,r,i,a=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return a||("object"===typeof(i=e.data)&&i&&"google.c.a.c_id"in i?self.location.origin:null)}function Dj(e){return KU.create("missing-app-config-values",{valueName:e})}bj("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bj("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Oj=function(){function e(t,n,r){c(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Dj("App Configuration Object");if(!e.name)throw Dj("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw Dj(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return f(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}(),Mj=function(e){var t=new Oj(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(function(e){e.waitUntil(function(e,t){return _j.apply(this,arguments)}(e,t))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(function(e,t){return wj.apply(this,arguments)}(e,t))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(function(e){return xj.apply(this,arguments)}(e))})),t};function Lj(e,t){return function(e,t){if(void 0!==self.document)throw KU.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,function(){e.onBackgroundMessageHandler=null}}(e=_e(e),t)}pt(new Ie("messaging-sw",Mj,"PUBLIC"));var Fj,Uj=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n,this.app=t,this._delegate=n}return f(e,[{key:"getToken",value:function(){var e=a(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kU(this._delegate,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteToken",value:function(){var e=a(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wU(this._delegate));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMessage",value:function(e){return _U(this._delegate,e)}},{key:"onBackgroundMessage",value:function(e){return Lj(this._delegate,e)}}]),e}(),jj=function(e){return self&&"ServiceWorkerGlobalScope"in self?new Uj(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()):new Uj(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate())},Vj={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?K()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!==typeof window&&K()&&G()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};Xt.INTERNAL.registerComponent(new Ie("messaging-compat",jj,"PUBLIC").setServiceProps(Vj)),Xt.registerVersion("@firebase/messaging-compat","0.1.13");var qj,Bj,zj="@firebase/performance",Wj="0.5.9",Kj=Wj,Hj="FB-PERF-TRACE-START",Gj="FB-PERF-TRACE-STOP",Zj="FB-PERF-TRACE-MEASURE",Qj="_wt_",Yj="_fcp",$j="_fid",Xj="@firebase/performance/config",Jj="@firebase/performance/configexpire",eV="Performance",tV=(Fj={},(0,h.Z)(Fj,"trace started","Trace {$traceName} was started before."),(0,h.Z)(Fj,"trace stopped","Trace {$traceName} is not running."),(0,h.Z)(Fj,"nonpositive trace startTime","Trace {$traceName} startTime should be positive."),(0,h.Z)(Fj,"nonpositive trace duration","Trace {$traceName} duration should be positive."),(0,h.Z)(Fj,"no window","Window is not available."),(0,h.Z)(Fj,"no app id","App id is not available."),(0,h.Z)(Fj,"no project id","Project id is not available."),(0,h.Z)(Fj,"no api key","Api key is not available."),(0,h.Z)(Fj,"invalid cc log","Attempted to queue invalid cc event"),(0,h.Z)(Fj,"FB not default","Performance can only start when Firebase app instance is the default one."),(0,h.Z)(Fj,"RC response not ok","RC response is not ok"),(0,h.Z)(Fj,"invalid attribute name","Attribute name {$attributeName} is invalid."),(0,h.Z)(Fj,"invalid attribute value","Attribute value {$attributeValue} is invalid."),(0,h.Z)(Fj,"invalid custom metric name","Custom metric name {$customMetricName} is invalid"),(0,h.Z)(Fj,"invalid String merger input","Input for String merger is invalid, contact support team to resolve."),(0,h.Z)(Fj,"already initialized","initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."),Fj),nV=new Q("performance",eV,tV),rV=new Me(eV);rV.logLevel=Ce.INFO;var iV,aV,oV=function(){function e(t){if(c(this,e),this.window=t,!t)throw nV.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return f(e,[{key:"getUrl",value:function(){return this.windowLocation.href.split("?")[0]}},{key:"mark",value:function(e){this.performance&&this.performance.mark&&this.performance.mark(e)}},{key:"measure",value:function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}},{key:"getEntriesByType",value:function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}},{key:"getEntriesByName",value:function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}},{key:"getTimeOrigin",value:function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}},{key:"requiredApisAvailable",value:function(){return fetch&&Promise&&G()?!!K()||(rV.info("IndexedDB is not supported by current browswer"),!1):(rV.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}},{key:"setupObserver",value:function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){var n,r=p(e.getEntries());try{for(r.s();!(n=r.n()).done;){var i=n.value;t(i)}}catch(a){r.e(a)}finally{r.f()}})).observe({entryTypes:[e]})}}],[{key:"getInstance",value:function(){return void 0===qj&&(qj=new e(Bj)),qj}}]),e}();function sV(){return iV}function uV(e,t){var n=e.length-t.length;if(n<0||n>1)throw nV.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var cV,lV=function(){function e(){c(this,e),this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=uV("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=uV("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return f(e,[{key:"getFlTransportFullUrl",value:function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}}],[{key:"getInstance",value:function(){return void 0===aV&&(aV=new e),aV}}]),e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(cV||(cV={}));var fV=["firebase_","google_","ga_"],hV=new RegExp("^[a-zA-Z]\\w*$");function dV(){var e=oV.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function pV(){switch(oV.getInstance().document.visibilityState){case"visible":return cV.VISIBLE;case"hidden":return cV.HIDDEN;default:return cV.UNKNOWN}}function vV(){var e=oV.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function gV(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw nV.create("no app id");return n}var mV="0.0.1",yV=!0,kV="FIREBASE_INSTALLATIONS_AUTH";function bV(e,t){var n=function(){var e=oV.getInstance().localStorage;if(!e)return;var t=e.getItem(Jj);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem(Xj);if(!r)return;try{return JSON.parse(r)}catch(mD){return}}();return n?(_V(n),Promise.resolve()):function(e,t){return function(e){var t=e.getToken();return t.then((function(e){})),t}(e.installations).then((function(n){var r=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw nV.create("no project id");return n}(e.app),i=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw nV.create("no api key");return n}(e.app),a="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(r,"/namespaces/fireperf:fetch?key=").concat(i),o=new Request(a,{method:"POST",headers:{Authorization:"".concat(kV," ").concat(n)},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:gV(e.app),app_version:Kj,sdk_version:mV})});return fetch(o).then((function(e){if(e.ok)return e.json();throw nV.create("RC response not ok")}))})).catch((function(){rV.info(wV)}))}(e,t).then(_V).then((function(e){return function(e){var t=oV.getInstance().localStorage;if(!e||!t)return;t.setItem(Xj,JSON.stringify(e)),t.setItem(Jj,String(Date.now()+60*lV.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var wV="Could not fetch config, will use default configs";function _V(e){if(!e)return e;var t=lV.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=yV,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=xV(t.tracesSamplingRate),t.logNetworkAfterSampling=xV(t.networkRequestsSamplingRate),e}function xV(e){return Math.random()<=e}var IV,TV=1;function SV(e){return TV=2,IV=IV||function(e){return function(){var e=oV.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return function(e){var t=e.getId();return t.then((function(e){iV=e})),t}(e.installations)})).then((function(t){return bV(e,t)})).then((function(){return EV()}),(function(){return EV()}))}(e),IV}function EV(){TV=3}var CV,NV=1e4,AV=3,PV=[],RV=!1;function DV(e){setTimeout((function(){if(0!==AV)return PV.length?void function(){var e=PV.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=lV.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||rV.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=NV;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(PV=[].concat((0,xe.Z)(t),(0,xe.Z)(PV)),rV.info("Retry transport request later.")),AV=3,DV(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:lV.getInstance().logSource,log_event:t},e).catch((function(){PV=[].concat((0,xe.Z)(e),(0,xe.Z)(PV)),AV--,rV.info("Tries left: ".concat(AV,".")),DV(NV)}))}():DV(NV)}),e)}function OV(e){if(!e.eventTime||!e.message)throw nV.create("invalid cc log");PV=[].concat((0,xe.Z)(PV),[e])}function MV(e,t){CV||(CV=function(e){return function(){OV({message:e.apply(void 0,arguments),eventTime:Date.now()})}}(UV)),CV(e,t)}function LV(e){var t=lV.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&oV.getInstance().requiredApisAvailable()&&(e.isAuto&&pV()!==cV.VISIBLE||(3===TV?FV(e):SV(e.performanceController).then((function(){return FV(e)}),(function(){return FV(e)}))))}function FV(e){if(sV()){var t=lV.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return MV(e,1)}),0)}}function UV(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:jV(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:jV(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function jV(e){return{google_app_id:gV(e),app_instance_id:sV(),web_app_info:{sdk_version:Kj,page_url:oV.getInstance().getUrl(),service_worker_status:dV(),visibility_state:pV(),effective_connection_type:vV()},application_process_state:0}}var VV=["_fp",Yj,$j];var qV=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;c(this,e),this.performanceController=t,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=oV.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat(Hj,"-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat(Gj,"-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=i||"".concat(Zj,"-").concat(this.randomId,"-").concat(this.name),i&&this.calculateTraceMetrics())}return f(e,[{key:"start",value:function(){if(1!==this.state)throw nV.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}},{key:"stop",value:function(){if(2!==this.state)throw nV.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),LV(this)}},{key:"record",value:function(e,t,n){if(e<=0)throw nV.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw nV.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var a=i[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Math.floor(Number(n.metrics[a])))}LV(this)}},{key:"incrementMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}},{key:"putMetric",value:function(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(Qj)&&VV.indexOf(n)>-1)&&n.startsWith("_"))throw nV.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){var t=Math.floor(e);return t<e&&rV.info("Metric value should be an Integer, setting the value as : ".concat(t,".")),t}(null!==t&&void 0!==t?t:0)}},{key:"getMetric",value:function(e){return this.counters[e]||0}},{key:"putAttribute",value:function(e,t){var n,r=!(0===(n=e).length||n.length>40)&&!fV.some((function(e){return n.startsWith(e)}))&&!!n.match(hV),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw nV.create("invalid attribute name",{attributeName:e});if(!i)throw nV.create("invalid attribute value",{attributeValue:t})}}},{key:"getAttribute",value:function(e){return this.customAttributes[e]}},{key:"removeAttribute",value:function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}},{key:"getAttributes",value:function(){return Object.assign({},this.customAttributes)}},{key:"setStartTime",value:function(e){this.startTimeUs=e}},{key:"setDuration",value:function(e){this.durationUs=e}},{key:"calculateTraceMetrics",value:function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}}],[{key:"createOobTrace",value:function(t,n,r,i){var a=oV.getInstance().getUrl();if(a){var o=new e(t,Qj+a,!0),s=Math.floor(1e3*oV.getInstance().getTimeOrigin());o.setStartTime(s),n&&n[0]&&(o.setDuration(Math.floor(1e3*n[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*n[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*n[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*n[0].loadEventEnd)));if(r){var u=r.find((function(e){return"first-paint"===e.name}));u&&u.startTime&&o.putMetric("_fp",Math.floor(1e3*u.startTime));var c=r.find((function(e){return"first-contentful-paint"===e.name}));c&&c.startTime&&o.putMetric(Yj,Math.floor(1e3*c.startTime)),i&&o.putMetric($j,Math.floor(1e3*i))}LV(o)}}},{key:"createUserTimingTrace",value:function(t,n){LV(new e(t,n,!1,n))}}]),e}();function BV(e,t){var n=t;if(n&&void 0!==n.responseStart){var r=oV.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),a=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){var t=lV.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return MV(e,0)}),0)}}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:o})}}function zV(e){sV()&&(setTimeout((function(){return function(e){var t=oV.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){var i=setTimeout((function(){qV.createOobTrace(e,n,r),i=void 0}),5e3);t.onFirstInputDelay((function(t){i&&(clearTimeout(i),qV.createOobTrace(e,n,r,t))}))}else qV.createOobTrace(e,n,r)}(e)}),0),setTimeout((function(){return function(e){var t,n=oV.getInstance(),r=p(n.getEntriesByType("resource"));try{for(r.s();!(t=r.n()).done;){var i=t.value;BV(e,i)}}catch(a){r.e(a)}finally{r.f()}n.setupObserver("resource",(function(t){return BV(e,t)}))}(e)}),0),setTimeout((function(){return function(e){var t,n=oV.getInstance(),r=p(n.getEntriesByType("measure"));try{for(r.s();!(t=r.n()).done;){var i=t.value;WV(e,i)}}catch(a){r.e(a)}finally{r.f()}n.setupObserver("measure",(function(t){return WV(e,t)}))}(e)}),0))}function WV(e,t){var n=t.name;n.substring(0,Zj.length)!==Zj&&qV.createUserTimingTrace(e,n)}var KV=function(){function e(t,n){c(this,e),this.app=t,this.installations=n,this.initialized=!1}return f(e,[{key:"_init",value:function(e){var t=this;this.initialized||(void 0!==(null===e||void 0===e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null===e||void 0===e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),oV.getInstance().requiredApisAvailable()?H().then((function(e){e&&(RV||(DV(5500),RV=!0),SV(t).then((function(){return zV(t)}),(function(){return zV(t)})),t.initialized=!0)})).catch((function(e){rV.info("Environment doesn't support IndexedDB: ".concat(e))})):rV.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}},{key:"instrumentationEnabled",get:function(){return lV.getInstance().instrumentationEnabled},set:function(e){lV.getInstance().instrumentationEnabled=e}},{key:"dataCollectionEnabled",get:function(){return lV.getInstance().dataCollectionEnabled},set:function(e){lV.getInstance().dataCollectionEnabled=e}}]),e}();var HV=function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw nV.create("FB not default");if("undefined"===typeof window)throw nV.create("no window");!function(e){Bj=e}(window);var a=new KV(r,i);return a._init(n),a};pt(new Ie("performance",HV,"PUBLIC")),Et(zj,Wj),Et(zj,Wj,"esm2017");var GV,ZV,QV=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n}return f(e,[{key:"instrumentationEnabled",get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e}},{key:"dataCollectionEnabled",get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e}},{key:"trace",value:function(e){return function(e,t){return e=_e(e),new qV(e,t)}(this._delegate,e)}}]),e}();function YV(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new QV(t,n)}(GV=Xt).INTERNAL.registerComponent(new Ie("performance-compat",YV,"PUBLIC")),GV.registerVersion("@firebase/performance-compat","0.1.9");var $V="@firebase/remote-config",XV="0.3.8",JV=function(){function e(){c(this,e),this.listeners=[]}return f(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}(),eq="remote-config",tq=(ZV={},(0,h.Z)(ZV,"registration-window","Undefined window object. This SDK only supports usage in a browser environment."),(0,h.Z)(ZV,"registration-project-id","Undefined project identifier. Check Firebase app initialization."),(0,h.Z)(ZV,"registration-api-key","Undefined API key. Check Firebase app initialization."),(0,h.Z)(ZV,"registration-app-id","Undefined app identifier. Check Firebase app initialization."),(0,h.Z)(ZV,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"fetch-client-network","Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"fetch-timeout",'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),(0,h.Z)(ZV,"fetch-throttle",'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),(0,h.Z)(ZV,"fetch-client-parse","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,h.Z)(ZV,"fetch-status","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,h.Z)(ZV,"indexed-db-unavailable","Indexed DB is not supported by current browser"),ZV),nq=new Q("remoteconfig","Remote Config",tq);function rq(e,t){return e instanceof Z&&-1!==e.code.indexOf(t)}var iq=["1","true","t","yes","y","on"],aq=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c(this,e),this._source=t,this._value=n}return f(e,[{key:"asString",value:function(){return this._value}},{key:"asBoolean",value:function(){return"static"!==this._source&&iq.indexOf(this._value.toLowerCase())>=0}},{key:"asNumber",value:function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e}},{key:"getSource",value:function(){return this._source}}]),e}();function oq(e){return sq.apply(this,arguments)}function sq(){return sq=a(s.mark((function e(t){var n,r,i,a,u;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e(t),e.next=3,Promise.all([n._storage.getLastSuccessfulFetchResponse(),n._storage.getActiveConfigEtag()]);case 3:if(r=e.sent,i=(0,o.Z)(r,2),a=i[0],u=i[1],a&&a.config&&a.eTag&&a.eTag!==u){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,Promise.all([n._storageCache.setActiveConfig(a.config),n._storage.setActiveConfigEtag(a.eTag)]);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),sq.apply(this,arguments)}function uq(e){var t=_e(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),t._initializePromise}function cq(e){return lq.apply(this,arguments)}function lq(){return lq=a(s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e(t),r=new JV,setTimeout(a(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.abort();case 1:case"end":return e.stop()}}),e)}))),n.settings.fetchTimeoutMillis),e.prev=3,e.next=6,n._client.fetch({cacheMaxAgeMillis:n.settings.minimumFetchIntervalMillis,signal:r});case 6:return e.next=8,n._storageCache.setLastFetchStatus("success");case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(3),i=rq(e.t0,"fetch-throttle")?"throttle":"failure",e.next=15,n._storageCache.setLastFetchStatus(i);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,10]])}))),lq.apply(this,arguments)}function fq(e){var t=_e(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(Object.assign(Object.assign({},e),t))}(t._storageCache.getActiveConfig(),t.defaultConfig).reduce((function(t,n){return t[n]=hq(e,n),t}),{})}function hq(e,t){var n=_e(e);n._isInitializationComplete||n._logger.debug('A value was requested for key "'.concat(t,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");var r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new aq("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new aq("default",String(n.defaultConfig[t])):(n._logger.debug('Returning static value for key "'.concat(t,'".')+" Define a default or remote value if this is unintentional."),new aq("static"))}var dq=function(){function e(t,n,r,i){c(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return f(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(n,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(r,".")),r}},{key:"fetch",value:function(){var e=a(s.mark((function e(t){var n,r,i,a,u,c;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);case 2:if(n=e.sent,r=(0,o.Z)(n,2),i=r[0],!(a=r[1])||!this.isCachedDataFresh(t.cacheMaxAgeMillis,i)){e.next=8;break}return e.abrupt("return",a);case 8:return t.eTag=a&&a.eTag,e.next=11,this.client.fetch(t);case 11:return u=e.sent,c=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&c.push(this.storage.setLastSuccessfulFetchResponse(u)),e.next=16,Promise.all(c);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function pq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var vq=function(){function e(t,n,r,i,a,o){c(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return f(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=a(s.mark((function e(t){var n,r,i,a,u,c,l,f,h,d,p,v,g,m,y,k,b,w;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]);case 2:return n=e.sent,r=(0,o.Z)(n,2),i=r[0],a=r[1],u=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",c="".concat(u,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},f={sdk_version:this.sdkVersion,app_instance_id:i,app_instance_id_token:a,app_id:this.appId,language_code:pq()},h={method:"POST",headers:l,body:JSON.stringify(f)},d=fetch(c,h),p=new Promise((function(e,n){t.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),e.prev=13,e.next=16,Promise.race([d,p]);case 16:return e.next=18,d;case 18:v=e.sent,e.next=26;break;case 21:throw e.prev=21,e.t0=e.catch(13),g="fetch-client-network","AbortError"===e.t0.name&&(g="fetch-timeout"),nq.create(g,{originalErrorMessage:e.t0.message});case 26:if(m=v.status,y=v.headers.get("ETag")||void 0,200!==v.status){e.next=40;break}return e.prev=29,e.next=32,v.json();case 32:w=e.sent,e.next=38;break;case 35:throw e.prev=35,e.t1=e.catch(29),nq.create("fetch-client-parse",{originalErrorMessage:e.t1.message});case 38:k=w.entries,b=w.state;case 40:if("INSTANCE_STATE_UNSPECIFIED"===b?m=500:"NO_CHANGE"===b?m=304:"NO_TEMPLATE"!==b&&"EMPTY_CONFIG"!==b||(k={}),304===m||200===m){e.next=43;break}throw nq.create("fetch-status",{httpStatus:m});case 43:return e.abrupt("return",{status:m,eTag:y,config:k});case 44:case"end":return e.stop()}}),e,this,[[13,21],[29,35]])})));return function(t){return e.apply(this,arguments)}}())}]),e}();function gq(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(nq.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function mq(e){if(!(e instanceof Z)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var yq=function(){function e(t,n){c(this,e),this.client=t,this.storage=n}return f(e,[{key:"fetch",value:function(){var e=a(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getThrottleMetadata();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return n=e.t0,e.abrupt("return",this.attemptFetch(t,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attemptFetch",value:function(){var e=a(s.mark((function e(t,n){var r,i,a,o;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.throttleEndTimeMillis,i=n.backoffCount,e.next=3,gq(t.signal,r);case 3:return e.prev=3,e.next=6,this.client.fetch(t);case 6:return a=e.sent,e.next=9,this.storage.deleteThrottleMetadata();case 9:return e.abrupt("return",a);case 12:if(e.prev=12,e.t0=e.catch(3),mq(e.t0)){e.next=16;break}throw e.t0;case 16:return o={throttleEndTimeMillis:Date.now()+we(i),backoffCount:i+1},e.next=19,this.storage.setThrottleMetadata(o);case 19:return e.abrupt("return",this.attemptFetch(t,o));case 20:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),kq=function(){function e(t,n,r,i,a){c(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return f(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function bq(e,t){var n=e.target.error||void 0;return nq.create(t,{originalErrorMessage:n&&n.message})}var wq="app_namespace_store";function _q(){return new Promise((function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(bq(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;if(0===e.oldVersion)t.createObjectStore(wq,{keyPath:"compositeKey"})}}catch(xd){t(nq.create("storage-open",{originalErrorMessage:xd}))}}))}var xq=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_q();c(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return f(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(){var e=a(s.mark((function e(t){var n,r=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,i){var a=n.transaction([wq],"readonly").objectStore(wq),o=r.createCompositeKey(t);try{var s=a.get(o);s.onerror=function(e){i(bq(e,"storage-get"))},s.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)}}catch(u){i(nq.create("storage-get",{originalErrorMessage:u&&u.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=a(s.mark((function e(t,n){var r,i=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,a){var o=r.transaction([wq],"readwrite").objectStore(wq),s=i.createCompositeKey(t);try{var u=o.put({compositeKey:s,value:n});u.onerror=function(e){a(bq(e,"storage-set"))},u.onsuccess=function(){e()}}catch(c){a(nq.create("storage-set",{originalErrorMessage:c&&c.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(s.mark((function e(t){var n,r=this;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,i){var a=n.transaction([wq],"readwrite").objectStore(wq),o=r.createCompositeKey(t);try{var s=a.delete(o);s.onerror=function(e){i(bq(e,"storage-delete"))},s.onsuccess=function(){e()}}catch(u){i(nq.create("storage-delete",{originalErrorMessage:u&&u.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Iq=function(){function e(t){c(this,e),this.storage=t}return f(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=a(s.mark((function e(){var t,n,r,i,a,o;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),e.next=5,t;case 5:return(i=e.sent)&&(this.lastFetchStatus=i),e.next=9,n;case 9:return(a=e.sent)&&(this.lastSuccessfulFetchTimestampMillis=a),e.next=13,r;case 13:(o=e.sent)&&(this.activeConfig=o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Tq(){return(Tq=a(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_e(t),e.next=3,cq(t);case 3:return e.abrupt("return",oq(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sq(){return Eq.apply(this,arguments)}function Eq(){return(Eq=a(s.mark((function e(){var t;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,H();case 5:return t=e.sent,e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}pt(new Ie(eq,(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"===typeof window)throw nq.create("registration-window");if(!K())throw nq.create("indexed-db-unavailable");var a=r.options,o=a.projectId,s=a.apiKey,u=a.appId;if(!o)throw nq.create("registration-project-id");if(!s)throw nq.create("registration-api-key");if(!u)throw nq.create("registration-app-id");n=n||"firebase";var c=new xq(u,r.name,n),l=new Iq(c),f=new Me($V);f.logLevel=Ce.ERROR;var h=new vq(i,wt,n,o,s,u),d=new yq(h,c),p=new dq(d,c,l,f),v=new kq(r,p,l,c,f);return uq(v),v}),"PUBLIC").setMultipleInstances(!0)),Et($V,XV),Et($V,XV,"esm2017");var Cq=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n}return f(e,[{key:"defaultConfig",get:function(){return this._delegate.defaultConfig},set:function(e){this._delegate.defaultConfig=e}},{key:"fetchTimeMillis",get:function(){return this._delegate.fetchTimeMillis}},{key:"lastFetchStatus",get:function(){return this._delegate.lastFetchStatus}},{key:"settings",get:function(){return this._delegate.settings},set:function(e){this._delegate.settings=e}},{key:"activate",value:function(){return oq(this._delegate)}},{key:"ensureInitialized",value:function(){return uq(this._delegate)}},{key:"fetch",value:function(){return cq(this._delegate)}},{key:"fetchAndActivate",value:function(){return function(e){return Tq.apply(this,arguments)}(this._delegate)}},{key:"getAll",value:function(){return fq(this._delegate)}},{key:"getBoolean",value:function(e){return function(e,t){return hq(_e(e),t).asBoolean()}(this._delegate,e)}},{key:"getNumber",value:function(e){return function(e,t){return hq(_e(e),t).asNumber()}(this._delegate,e)}},{key:"getString",value:function(e){return function(e,t){return hq(_e(e),t).asString()}(this._delegate,e)}},{key:"getValue",value:function(e){return hq(this._delegate,e)}},{key:"setLogLevel",value:function(e){!function(e,t){var n=_e(e);switch(t){case"debug":n._logger.logLevel=Ce.DEBUG;break;case"silent":n._logger.logLevel=Ce.SILENT;break;default:n._logger.logLevel=Ce.ERROR}}(this._delegate,e)}}]),e}();function Nq(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("remote-config").getImmediate({identifier:n});return new Cq(r,i)}!function(e){e.INTERNAL.registerComponent(new Ie("remoteConfig-compat",Nq,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:Sq})),e.registerVersion("@firebase/remote-config-compat","0.1.9")}(Xt);var Aq="firebasestorage.googleapis.com",Pq=function(e){m(n,e);var t=_(n);function n(e,r){var i;return c(this,n),(i=t.call(this,Rq(e),"Firebase Storage: ".concat(r," (").concat(Rq(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(v(i),n.prototype),i}return f(n,[{key:"_codeEquals",value:function(e){return Rq(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Z);function Rq(e){return"storage/"+e}function Dq(){return new Pq("unknown","An unknown error occurred, please check the error payload for server response.")}function Oq(){return new Pq("canceled","User canceled the upload/download.")}function Mq(){return new Pq("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lq(e){return new Pq("invalid-argument",e)}function Fq(){return new Pq("app-deleted","The Firebase app was deleted.")}function Uq(e){return new Pq("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jq(e,t){return new Pq("invalid-format","String does not match format '"+e+"': "+t)}function Vq(e){throw new Pq("internal-error","Internal error: "+e)}var qq,Bq=function(){function e(t,n){c(this,e),this.bucket=t,this.path_=n}return f(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Pq("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Aq?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Pq("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),zq=function(){function e(t){c(this,e),this.promise_=Promise.reject(t)}return f(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Wq(e){return"string"===typeof e||e instanceof String}function Kq(e){return Hq()&&e instanceof Blob}function Hq(){return"undefined"!==typeof Blob}function Gq(e,t,n,r){if(r<t)throw Lq("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Lq("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Zq(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Qq(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qq||(qq={}));var Yq=function(){function e(t,n,r,i,a,o,s,u,l,f,h){var d=this;c(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return f(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Dq();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Fq():Oq());else i(new Pq("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new $q(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new $q(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===qq.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new $q(o,r))}else{var s=r.getErrorCode()===qq.ABORT;t(!1,new $q(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),$q=f((function e(t,n,r){c(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Xq(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Jq(){for(var e=Xq(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Hq())return new Blob(n);throw new Pq("unsupported-environment","This browser doesn't seem to support creating Blobs")}var eB={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},tB=f((function e(t,n){c(this,e),this.data=t,this.contentType=n||null}));function nB(e,t){switch(e){case eB.RAW:return new tB(rB(t));case eB.BASE64:case eB.BASE64URL:return new tB(iB(e,t));case eB.DATA_URL:return new tB(function(e){var t=new aB(e);return t.base64?iB(eB.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw jq(eB.DATA_URL,"Malformed data URL.")}return rB(t)}(t.rest)}(t),new aB(t).contentType)}throw Dq()}function rB(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function iB(e,t){switch(e){case eB.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw jq(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case eB.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw jq(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw jq(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var aB=f((function e(t){c(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw jq(eB.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var oB=function(){function e(t,n){c(this,e);var r=0,i="";Kq(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return f(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Kq(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Hq()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Jq.apply(null,i))}var a=n.map((function(e){return Wq(e)?nB(eB.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function sB(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function uB(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function cB(e,t){return t}var lB=f((function e(t,n,r,i){c(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||cB})),fB=null;function hB(){if(fB)return fB;var e=[];e.push(new lB("bucket")),e.push(new lB("generation")),e.push(new lB("metageneration")),e.push(new lB("name","fullPath",!0));var t=new lB("name");t.xform=function(e,t){return function(e){return!Wq(e)||e.length<2?e:uB(e)}(t)},e.push(t);var n=new lB("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new lB("timeCreated")),e.push(new lB("updated")),e.push(new lB("md5Hash",null,!0)),e.push(new lB("cacheControl",null,!0)),e.push(new lB("contentDisposition",null,!0)),e.push(new lB("contentEncoding",null,!0)),e.push(new lB("contentLanguage",null,!0)),e.push(new lB("contentType",null,!0)),e.push(new lB("metadata","customMetadata",!0)),fB=e}function dB(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Bq(n,r);return t._makeStorageReference(i)}})}(r,e),r}function pB(e,t,n){var r=sB(t);return null===r?null:dB(e,r,n)}function vB(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function gB(e,t,n){var r=sB(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=p(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new Bq(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var u,c=p(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new Bq(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var mB=f((function e(t,n,r,i){c(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function yB(e){if(!e)throw Dq()}function kB(e,t){return function(n,r){var i=pB(e,r,t);return yB(null!==i),i}}function bB(e,t){return function(n,r){var i=pB(e,r,t);return yB(null!==i),function(e,t,n,r){var i=sB(t);if(null===i)return null;if(!Wq(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Zq("/b/"+o(i)+"/o/"+o(a),n,r)+Qq({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function wB(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Pq("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Pq("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Pq("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Pq("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function _B(e){var t=wB(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Pq("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function xB(e,t,n){var r=Zq(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new mB(r,"GET",kB(e,n),i);return a.errorHandler=_B(t),a}function IB(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Zq(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new mB(o,"GET",function(e,t){return function(n,r){var i=gB(e,t,r);return yB(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=wB(t),u}function TB(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function SB(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=TB(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vB(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=oB.getBlob(c,r,l);if(null===f)throw Mq();var h={name:u.fullPath},d=Zq(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new mB(d,"POST",kB(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=wB(t),v}var EB=f((function e(t,n,r,i){c(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function CB(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){yB(!1)}return yB(!!n&&-1!==(t||["active"]).indexOf(n)),n}var NB=262144;function AB(e,t,n,r,i,a,o,s){var u=new EB(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Pq("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw Mq();var v=t.maxUploadRetryTime,g=new mB(n,"POST",(function(e,n){var i,o=CB(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?kB(t,a)(e,n):null,new EB(s,c,"final"===o,i)}),v);return g.headers=d,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=wB(e),g}var PB={STATE_CHANGED:"state_changed"},RB={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DB(e){switch(e){case"running":case"pausing":case"canceling":return RB.RUNNING;case"paused":return RB.PAUSED;case"success":return RB.SUCCESS;case"canceled":return RB.CANCELED;default:return RB.ERROR}}var OB=f((function e(t,n,r){c(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function MB(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var LB=function(){function e(){var t=this;c(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qq.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qq.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qq.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return f(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Vq("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Vq("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Vq("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Vq("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Vq("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),FB=function(e){m(n,e);var t=_(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(LB);function UB(){return new FB}var jB=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=hB(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return f(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=(0,o.Z)(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=TB(t,r,i),s={name:o.fullPath},u=Zq(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=vB(o,n),f=e.maxUploadRetryTime,h=new mB(u,"POST",(function(e){var t;CB(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){yB(!1)}return yB(Wq(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=wB(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,UB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new mB(n,"POST",(function(e){var t=CB(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){yB(!1)}n||yB(!1);var i=Number(n);return yB(!isNaN(i)),new EB(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=wB(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,UB,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=NB*this._chunkMultiplier,n=new EB(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=AB(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,UB,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){NB*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=xB(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,UB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=SB(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,UB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Oq(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=DB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new OB(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(DB(this._state)){case RB.SUCCESS:MB(this._resolve.bind(null,this.snapshot))();break;case RB.CANCELED:case RB.ERROR:MB(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(DB(this._state)){case RB.RUNNING:case RB.PAUSED:e.next&&MB(e.next.bind(e,this.snapshot))();break;case RB.SUCCESS:e.complete&&MB(e.complete.bind(e))();break;default:e.error&&MB(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),VB=function(){function e(t,n){c(this,e),this._service=t,this._location=n instanceof Bq?n:Bq.makeFromUrl(n,t.host)}return f(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Bq(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return uB(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Bq(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Uq(e)}}]),e}();function qB(e,t,n){return BB.apply(this,arguments)}function BB(){return(BB=a(u().mark((function e(t,n,r){var i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,zB(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,(0,xe.Z)(s.prefixes)),(a=n.items).push.apply(a,(0,xe.Z)(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,qB(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zB(e,t){null!=t&&"number"===typeof t.maxResults&&Gq("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=IB(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,UB)}function WB(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Zq(t.fullServerUrl(),e.host,e._protocol),a=vB(n,r),o=e.maxOperationRetryTime,s=new mB(i,"PATCH",kB(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=_B(t),s}(e.storage,e._location,t,hB());return e.storage.makeRequestWithTokens(n,UB)}function KB(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Zq(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new mB(r,"GET",bB(e,n),i);return a.errorHandler=_B(t),a}(e.storage,e._location,hB());return e.storage.makeRequestWithTokens(t,UB).then((function(e){if(null===e)throw new Pq("no-download-url","The given file does not have any download URLs.");return e}))}function HB(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Zq(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new mB(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=_B(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,UB)}function GB(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Bq(e._location.bucket,n);return new VB(e.storage,r)}function ZB(e,t){if(e instanceof XB){var n=e;if(null==n._bucket)throw new Pq("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new VB(n,n._bucket);return null!=t?ZB(r,t):r}return void 0!==t?GB(e,t):e}function QB(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof XB)return new VB(e,t);throw Lq("To use ref(service, url), the first argument must be a Storage instance.")}return ZB(e,t)}function YB(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Bq.makeFromBucketSpec(n,e)}function $B(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:F(i,e.app.options.projectId))}var XB=function(){function e(t,n,r,i,a){c(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Aq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bq.makeFromBucketSpec(i,this._host):YB(this._host,this.app.options)}return f(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Bq.makeFromBucketSpec(this._url,e):this._bucket=YB(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Gq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Gq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new VB(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new zq(Fq());var a=function(e,t,n,r,i,a){var o=Qq(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Yq(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=a(u().mark((function e(t,n){var r,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=(0,o.Z)(r,2),a=i[0],s=i[1],e.abrupt("return",this._makeRequest(t,n,a,s).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),JB="@firebase/storage",ez="0.9.6",tz="storage";function nz(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new jB(e,new oB(t),n)}(e=_e(e),t,n)}function rz(e){return function(e){e._throwIfRoot("getMetadata");var t=xB(e.storage,e._location,hB());return e.storage.makeRequestWithTokens(t,UB)}(e=_e(e))}function iz(e){return function(e){var t={prefixes:[],items:[]};return qB(e,t).then((function(){return t}))}(e=_e(e))}function az(e,t){return QB(e=_e(e),t)}function oz(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$B(e,t,n,r)}function sz(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new XB(r,i,a,n,wt)}pt(new Ie(tz,sz,"PUBLIC").setMultipleInstances(!0)),Et(JB,ez,""),Et(JB,ez,"esm2017");var uz=function(){function e(t,n,r){c(this,e),this._delegate=t,this.task=n,this.ref=r}return f(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),cz=function(){function e(t,n){c(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return f(e,[{key:"snapshot",get:function(){return new uz(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new uz(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new uz(e,i,i._ref))}:{next:t.next?function(e){return t.next(new uz(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),lz=function(){function e(t,n){c(this,e),this._delegate=t,this._service=n}return f(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new fz(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new fz(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),fz=function(){function e(t,n){c(this,e),this._delegate=t,this.storage=n}return f(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return GB(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new cz(nz(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eB.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=nB(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new cz(new jB(this._delegate,new oB(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return iz(this._delegate).then((function(t){return new lz(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return zB(e=_e(e),t)}(this._delegate,e||void 0).then((function(e){return new lz(e,t.storage)}))}},{key:"getMetadata",value:function(){return rz(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return WB(e=_e(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return KB(_e(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),HB(_e(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Uq(e)}}]),e}(),hz=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n}return f(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(dz(e))throw Lq("ref() expected a child path but got a URL, use refFromURL instead.");return new fz(az(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!dz(e))throw Lq("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bq.makeFromUrl(e,this._delegate.host)}catch(t){throw Lq("refFromUrl() expected a valid full URL but got an invalid one.")}return new fz(az(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oz(this._delegate,e,t,n)}}]),e}();function dz(e){return/^[A-Za-z]+:\/\//.test(e)}function pz(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new hz(r,i)}!function(e){var t={TaskState:RB,TaskEvent:PB,StringFormat:eB,Storage:hz,Reference:fz};e.INTERNAL.registerComponent(new Ie("storage-compat",pz,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(Xt);var vz=Xt.initializeApp({apiKey:"AIzaSyDVaNxM6qaAYmDLqaUpWdb6xqEEzZw7G4E",authDomain:"reactinstatutorial-6da2c.firebaseapp.com",projectId:"reactinstatutorial-6da2c",storageBucket:"reactinstatutorial-6da2c.appspot.com",messagingSenderId:"77580410583",appId:"1:77580410583:web:c23aeee7fa7ab29925da92"}).firestore(),gz=Xt.auth(),mz=Xt.storage(),yz=new Xt.auth.GoogleAuthProvider,kz=function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gz.signInWithPopup(yz).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bz=n(184),wz=(0,t.createContext)(),_z=function(e){var n=(0,t.useState)(null),r=(0,o.Z)(n,2),i=r[0],a=r[1];return(0,bz.jsx)(wz.Provider,{value:{user:[i,a]},children:e.children})};function xz(){var e=(0,o.Z)((0,t.useContext)(wz).user,2)[1],n=function(){var t=a(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kz();case 2:(n=t.sent)&&e(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,bz.jsx)("div",{className:"signInBtn",onClick:n,children:(0,bz.jsx)("p",{children:"Sign In With Google"})})}function Iz(e){var t=e.username,n=e.caption;return(0,bz.jsx)("div",{class:"comment",children:(0,bz.jsxs)("p",{children:[(0,bz.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:t}),n]})})}function Tz(){var e=(0,o.Z)((0,t.useContext)(wz).user,2),n=e[0];e[1];return(0,bz.jsxs)("div",{className:"navbar",children:[(0,bz.jsx)("p",{children:"ReactSocial"}),n?(0,bz.jsx)("img",{className:"navbar__img",src:n.photoURL}):(0,bz.jsx)(xz,{})]})}var Sz=n(86);function Ez(){var e=(0,o.Z)((0,t.useContext)(wz).user,2),n=e[0],r=(e[1],(0,t.useState)("")),i=(0,o.Z)(r,2),a=i[0],s=i[1],u=(0,t.useState)(null),c=(0,o.Z)(u,2),l=c[0],f=c[1],h=(0,t.useState)(0),d=(0,o.Z)(h,2),p=d[0],v=d[1];return(0,bz.jsx)("div",{className:"createPost",children:n?(0,bz.jsxs)("div",{className:"createPost__loggedIn",children:[(0,bz.jsx)("p",{children:"Create Post"}),(0,bz.jsxs)("div",{className:"createPost__loggedInCenter",children:[(0,bz.jsx)("textarea",{className:"createPost__textarea",rows:"3",placeholder:"enter caption here..",value:a,onChange:function(e){return s(e.target.value)}}),(0,bz.jsx)("div",{className:"createPost__imagePreview",children:(0,bz.jsx)("img",{id:"image-preview",alt:""})})]}),(0,bz.jsxs)("div",{className:"createPost__loggedInBottom",children:[(0,bz.jsxs)("div",{className:"createPost__imageUpload",children:[(0,bz.jsx)("label",{htmlFor:"fileInput",children:(0,bz.jsx)(Sz.Z,{style:{cursor:"pointer",fontSize:"20px"}})}),(0,bz.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){f(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("image-preview");n.src=t,n.style.display="block"}}})]}),(0,bz.jsx)("button",{className:"createPost__uploadBtn",onClick:function(){if(l){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}(10);mz.ref("images/".concat(e,".jpg")).put(l).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){mz.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){vz.collection("posts").add({timestamp:Xt.firestore.FieldValue.serverTimestamp(),caption:a,photoUrl:e,username:n.email.replace("@gmail.com",""),profileUrl:n.photoURL})})),s(""),v(0),f(null),document.getElementById("image-preview").style.display="none"}))}},style:{color:a?"#000":"lightgrey"},children:"Upload ".concat(0!=p?p:"")})]})]}):(0,bz.jsxs)("div",{children:[(0,bz.jsx)(xz,{}),(0,bz.jsx)("p",{style:{marginLeft:"12px"},children:"to Post & Comment"})]})})}function Cz(e){var n=e.comments,r=e.id,i=(0,o.Z)((0,t.useContext)(wz).user,2),a=i[0],s=(i[1],(0,t.useState)("")),u=(0,o.Z)(s,2),c=u[0],l=u[1],f=(0,t.useState)(n||[]),h=(0,o.Z)(f,2),d=h[0];h[1];return(0,bz.jsxs)("div",{className:"commentInput",children:[(0,bz.jsx)("textarea",{className:"commentInput__textarea",rows:"1",placeholder:"write a comment..",value:c,onChange:function(e){return l(e.target.value)}}),(0,bz.jsx)("button",{onClick:function(){""!=c&&(d.push({comment:c,username:a.email.replace("@gmail.com","").toLowerCase()}),vz.collection("posts").doc(r).update({comments:d}).then((function(){l(""),console.log("comment added")})).catch((function(e){console.log("Error ".concat(e))})))},className:"commentInput__btn",children:"Post"})]})}function Nz(e){var n=e.profileUrl,r=e.username,i=e.id,a=e.photoURl,s=e.caption,u=e.comments,c=(0,o.Z)((0,t.useContext)(wz).user,2),l=c[0];c[1];return(0,bz.jsxs)("div",{className:"post",children:[(0,bz.jsxs)("div",{className:"post__header",children:[(0,bz.jsxs)("div",{className:"post__headerLeft",children:[(0,bz.jsx)("img",{className:"post__profilePic",src:n}),(0,bz.jsx)("p",{style:{marginLeft:"8px"},children:r})]}),(0,bz.jsx)("button",{onClick:function(){mz.refFromURL(a).delete().then((function(){console.log("delete successfull")})).catch((function(e){console.log("Error ".concat(e))})),vz.collection("posts").doc(i).delete().then((function(){console.log("delete post info successfull")})).catch((function(e){console.log("Error post info delete ".concat(e))}))},className:"post__delete",children:"Delete"})]}),(0,bz.jsx)("div",{className:"post__center",children:(0,bz.jsx)("img",{className:"post__photoUrl",src:a})}),(0,bz.jsx)("div",{children:(0,bz.jsxs)("p",{children:[(0,bz.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:r}),s]})}),u?u.map((function(e){return(0,bz.jsx)(Iz,{username:e.username,caption:e.comment})})):(0,bz.jsx)(bz.Fragment,{}),l?(0,bz.jsx)(Cz,{comments:u,id:i}):(0,bz.jsx)(bz.Fragment,{})]})}function Az(){var e=(0,t.useState)([]),n=(0,o.Z)(e,2),r=n[0],i=n[1];return(0,t.useEffect)((function(){vz.collection("posts").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),(0,bz.jsx)("div",{className:"feed",children:r.map((function(e){var t=e.id,n=e.post;return(0,bz.jsx)(Nz,{id:t,profileUrl:n.profileUrl,username:n.username,photoURl:n.photoUrl,caption:n.caption,comments:n.comments},t)}))})}function Pz(){return(0,bz.jsxs)("div",{className:"home",children:[(0,bz.jsx)(Tz,{}),(0,bz.jsx)(Ez,{}),(0,bz.jsx)(Az,{})]})}var Rz=function(){return(0,bz.jsx)(_z,{children:(0,bz.jsx)("div",{className:"app",children:(0,bz.jsx)(Pz,{})})})},Dz=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,bz.jsx)(t.StrictMode,{children:(0,bz.jsx)(Rz,{})})),Dz()}()}();
//# sourceMappingURL=main.01bf60b2.js.map